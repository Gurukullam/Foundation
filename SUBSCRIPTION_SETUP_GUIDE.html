<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription System Setup Guide</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin: 20px 0;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            padding: 15px;
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: white;
            border-radius: 8px;
            font-size: 1.5em;
        }
        h3 {
            color: #7f8c8d;
            margin-top: 30px;
            padding-left: 10px;
            border-left: 3px solid #3498db;
        }
        code {
            background-color: #f1f2f6;
            padding: 3px 6px;
            border-radius: 4px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }
        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        .success {
            color: #27ae60;
            font-weight: bold;
        }
        .warning {
            color: #f39c12;
            font-weight: bold;
        }
        .error {
            color: #e74c3c;
            font-weight: bold;
        }
        .info {
            color: #3498db;
            font-weight: bold;
        }
        ul, ol {
            padding-left: 25px;
        }
        li {
            margin-bottom: 8px;
        }
        .feature-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .feature-box h2 {
            margin-top: 0;
            background: none;
            padding: 0;
        }
        .pricing-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #3498db;
        }
        .checklist {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 5px solid #27ae60;
        }
        .checklist h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        .demo-box {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #f39c12;
        }
        .emoji {
            font-size: 1.2em;
            margin-right: 8px;
        }
        .congratulations {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .step-counter {
            background: #3498db;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><span class="emoji">üí≥</span>Subscription System Setup Guide</h1>

        <div class="feature-box">
            <h2><span class="emoji">üéâ</span>What You've Got</h2>
            <p>Your French learning website now has a <strong>complete subscription system</strong> with:</p>
            <ul>
                <li><span class="success">‚úÖ</span> Beautiful subscription modal with monthly/yearly plans</li>
                <li><span class="success">‚úÖ</span> Stripe payment integration for secure card processing</li>
                <li><span class="success">‚úÖ</span> Firebase database tracking for all subscriptions</li>
                <li><span class="success">‚úÖ</span> Admin panel for managing users and subscriptions</li>
                <li><span class="success">‚úÖ</span> Premium features control system</li>
                <li><span class="success">‚úÖ</span> Subscription status tracking (free, premium, expired, cancelled)</li>
            </ul>
        </div>

        <div class="demo-box">
            <h2><span class="emoji">üöÄ</span>Current Demo Mode</h2>
            <p><strong>Your system is currently working in demo mode!</strong> You can:</p>
            <ol>
                <li><strong>Test the full flow</strong> - Sign up, select plans, enter test card details</li>
                <li><strong>View subscription data</strong> in Firebase Console</li>
                <li><strong>Use admin commands</strong> to manage subscriptions</li>
                <li><strong>See premium status</strong> updates in real-time</li>
            </ol>
        </div>

        <h2><span class="emoji">üî•</span>Upgrade to Production (Real Payments)</h2>
        <p>To accept real payments, follow these steps:</p>

        <h3><span class="step-counter">1</span>Create Stripe Account</h3>
        <ol>
            <li><strong>Go to:</strong> <a href="https://stripe.com" target="_blank">stripe.com</a></li>
            <li><strong>Click:</strong> "Start now" or "Sign up"</li>
            <li><strong>Create account</strong> with your business details</li>
            <li><strong>Complete verification</strong> (may take 1-2 days)</li>
        </ol>

        <h3><span class="step-counter">2</span>Get Stripe API Keys</h3>
        <ol>
            <li><strong>Log into</strong> your Stripe Dashboard</li>
            <li><strong>Go to:</strong> Developers ‚Üí API keys</li>
            <li><strong>Copy your keys:</strong>
                <ul>
                    <li><strong>Publishable key</strong> (starts with <code>pk_live_</code> or <code>pk_test_</code>)</li>
                    <li><strong>Secret key</strong> (starts with <code>sk_live_</code> or <code>sk_test_</code>)</li>
                </ul>
            </li>
        </ol>

        <h3><span class="step-counter">3</span>Update Your Website</h3>
        <p><strong>Replace the test key in <code>index.html</code>:</strong></p>
        <pre><code>// Find this line in index.html (around line 1150):
stripe = Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx'); // Replace this

// Replace with your real publishable key:
stripe = Stripe('pk_live_YOUR_REAL_PUBLISHABLE_KEY_HERE');</code></pre>

        <h3><span class="step-counter">4</span>Set Up Products in Stripe</h3>
        <ol>
            <li><strong>Stripe Dashboard</strong> ‚Üí <strong>Products</strong></li>
            <li><strong>Create product:</strong> "French Learning Premium"</li>
            <li><strong>Add prices:</strong>
                <ul>
                    <li><strong>Monthly:</strong> $9.99/month recurring</li>
                    <li><strong>Yearly:</strong> $99.99/year recurring</li>
                </ul>
            </li>
            <li><strong>Copy the Price IDs</strong> (you'll need these for webhooks)</li>
        </ol>

        <h2><span class="emoji">üõ°Ô∏è</span>Security Setup (Critical for Production)</h2>

        <h3>Stripe Webhook Configuration</h3>
        <ol>
            <li><strong>Stripe Dashboard</strong> ‚Üí <strong>Developers</strong> ‚Üí <strong>Webhooks</strong></li>
            <li><strong>Add endpoint:</strong> <code>https://your-domain.com/stripe-webhook</code></li>
            <li><strong>Select events:</strong>
                <ul>
                    <li><code>payment_intent.succeeded</code></li>
                    <li><code>invoice.payment_succeeded</code></li>
                    <li><code>customer.subscription.created</code></li>
                    <li><code>customer.subscription.updated</code></li>
                    <li><code>customer.subscription.deleted</code></li>
                </ul>
            </li>
        </ol>

        <h3>Firebase Security Rules Update</h3>
        <pre><code>rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users can only access their own data
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Admin access (add your admin email)
    match /admin/{document=**} {
      allow read, write: if request.auth != null && 
        request.auth.token.email in ["your-admin@email.com"];
    }
    
    // Subscription data (read-only for users, write for system)
    match /subscriptions/{subscriptionId} {
      allow read: if request.auth != null;
      allow write: if false; // Only server can write
    }
  }
}</code></pre>

        <h2><span class="emoji">üí∞</span>Current Pricing Structure</h2>

        <div class="pricing-box">
            <h3><span class="emoji">üìÖ</span>Monthly Premium - $9.99/month</h3>
            <ul>
                <li><span class="success">‚úÖ</span> Unlimited access to all modules</li>
                <li><span class="success">‚úÖ</span> Advanced pronunciation guides</li>
                <li><span class="success">‚úÖ</span> Interactive exercises</li>
                <li><span class="success">‚úÖ</span> Progress tracking</li>
                <li><span class="success">‚úÖ</span> Downloadable content</li>
                <li><span class="success">‚úÖ</span> Priority support</li>
            </ul>
        </div>

        <div class="pricing-box">
            <h3><span class="emoji">üìÜ</span>Yearly Premium - $99.99/year (17% off)</h3>
            <ul>
                <li><span class="success">‚úÖ</span> Everything in Monthly Premium</li>
                <li><span class="success">‚úÖ</span> 2 months free (14 months total)</li>
                <li><span class="success">‚úÖ</span> Advanced AI tutoring</li>
                <li><span class="success">‚úÖ</span> Custom learning paths</li>
                <li><span class="success">‚úÖ</span> Offline mode</li>
                <li><span class="success">‚úÖ</span> Certificate of completion</li>
            </ul>
        </div>

        <h2><span class="emoji">üß™</span>Testing Your Subscription System</h2>

        <h3>Test Credit Cards (Stripe Test Mode)</h3>
        <pre><code>Success: 4242 4242 4242 4242
Decline: 4000 0000 0000 0002
Insufficient Funds: 4000 0000 0000 9995
CVV: Any 3-digit number
Expiry: Any future date</code></pre>

        <h3>Testing Flow</h3>
        <ol>
            <li><strong>Sign up</strong> for an account</li>
            <li><strong>Click "Go Premium"</strong></li>
            <li><strong>Select a plan</strong></li>
            <li><strong>Enter test card details</strong></li>
            <li><strong>Complete payment</strong></li>
            <li><strong>Verify premium status</strong> appears</li>
            <li><strong>Check Firebase Console</strong> for subscription data</li>
        </ol>

        <h2><span class="emoji">üìä</span>Admin Management</h2>

        <h3>View Subscription Data</h3>
        <p>Open browser console (F12) and run:</p>
        <pre><code>// Get all subscription statistics
getSubscriptionStats()

// View all subscriptions
getAllSubscriptions()

// View premium subscribers only
getPremiumSubscribers()

// Check for expired subscriptions
getExpiredSubscriptions()

// Calculate revenue
calculateRevenue()</code></pre>

        <h3>Manage Subscriptions</h3>
        <pre><code>// Cancel a user's subscription
cancelUserSubscription('user@example.com')

// Reactivate subscription
reactivateUserSubscription('user@example.com', 'monthly')

// Update subscription manually
updateUserSubscription('user@example.com', {
    status: 'premium',
    plan: 'yearly',
    active: true,
    startDate: new Date().toISOString(),
    endDate: new Date(Date.now() + 365*24*60*60*1000).toISOString()
})

// Export data
exportSubscriptionsCSV()</code></pre>

        <h2><span class="emoji">üåê</span>Deployment to Production</h2>

        <h3><span class="step-counter">1</span>Update Configuration</h3>
        <ol>
            <li><strong>Replace Stripe test key</strong> with live key</li>
            <li><strong>Update Firebase security rules</strong></li>
            <li><strong>Test thoroughly</strong> in staging environment</li>
        </ol>

        <h3><span class="step-counter">2</span>GitHub Pages Deployment</h3>
        <ol>
            <li><strong>Upload all files</strong> to your GitHub repository:
                <ul>
                    <li><code>index.html</code> (with live Stripe key)</li>
                    <li><code>French-Alphabets.html</code></li>
                    <li><code>French-Numbers.html</code></li>
                    <li><code>French-Verbs.html</code></li>
                </ul>
            </li>
            <li><strong>Enable GitHub Pages</strong>:
                <ul>
                    <li>Repository Settings ‚Üí Pages</li>
                    <li>Source: Deploy from branch</li>
                    <li>Branch: main</li>
                </ul>
            </li>
            <li><strong>Add domain to Firebase</strong>:
                <ul>
                    <li>Firebase Console ‚Üí Authentication ‚Üí Settings ‚Üí Authorized domains</li>
                    <li>Add: <code>your-username.github.io</code></li>
                </ul>
            </li>
        </ol>

        <h3><span class="step-counter">3</span>Add Domain to Stripe</h3>
        <ol>
            <li><strong>Stripe Dashboard</strong> ‚Üí <strong>Settings</strong> ‚Üí <strong>Branding</strong></li>
            <li><strong>Add your domain</strong> for payment page branding</li>
        </ol>

        <h2><span class="emoji">üîí</span>Security Best Practices</h2>

        <div class="checklist">
            <h3>Never Expose Secret Keys</h3>
            <ul>
                <li><span class="success">‚úÖ Use:</span> Publishable keys (<code>pk_</code>) in frontend</li>
                <li><span class="error">‚ùå Never:</span> Put secret keys (<code>sk_</code>) in frontend code</li>
                <li><span class="emoji">üõ°Ô∏è</span> <strong>Secret keys</strong> should only be used on your backend server</li>
            </ul>

            <h3>Validate on Server</h3>
            <ul>
                <li><strong>Frontend:</strong> Collect payment info, create PaymentMethod</li>
                <li><strong>Backend:</strong> Process payment, update subscription status</li>
                <li><strong>Webhook:</strong> Handle subscription changes from Stripe</li>
            </ul>

            <h3>PCI Compliance</h3>
            <ul>
                <li><span class="success">‚úÖ</span> <strong>Stripe handles</strong> all sensitive card data</li>
                <li><span class="success">‚úÖ</span> <strong>Your website</strong> never stores card numbers</li>
                <li><span class="success">‚úÖ</span> <strong>PCI compliance</strong> managed by Stripe</li>
            </ul>
        </div>

        <h2><span class="emoji">üìà</span>Monitoring & Analytics</h2>

        <h3>Stripe Dashboard</h3>
        <ul>
            <li><strong>Payments:</strong> Real-time payment tracking</li>
            <li><strong>Customers:</strong> Subscriber management</li>
            <li><strong>Analytics:</strong> Revenue insights</li>
        </ul>

        <h3>Firebase Console</h3>
        <ul>
            <li><strong>Authentication:</strong> User sign-ups</li>
            <li><strong>Firestore:</strong> Subscription data</li>
            <li><strong>Analytics:</strong> User engagement</li>
        </ul>

        <h3>Your Admin Panel</h3>
        <ul>
            <li><strong>Browser Console:</strong> Real-time subscription stats</li>
            <li><strong>CSV Exports:</strong> Data analysis</li>
            <li><strong>Manual Management:</strong> Subscription changes</li>
        </ul>

        <h2><span class="emoji">üéØ</span>Revenue Optimization Tips</h2>

        <h3>A/B Testing Ideas</h3>
        <ul>
            <li><strong>Pricing:</strong> Test different price points</li>
            <li><strong>Plans:</strong> Offer different feature sets</li>
            <li><strong>UI:</strong> Test different button colors/text</li>
        </ul>

        <h3>Conversion Optimization</h3>
        <ul>
            <li><strong>Free trial:</strong> Offer 7-day free trial</li>
            <li><strong>Social proof:</strong> Show subscriber count</li>
            <li><strong>Urgency:</strong> Limited-time discounts</li>
        </ul>

        <h3>Retention Strategies</h3>
        <ul>
            <li><strong>Email campaigns:</strong> Engagement reminders</li>
            <li><strong>Feature updates:</strong> Keep content fresh</li>
            <li><strong>Support:</strong> Excellent customer service</li>
        </ul>

        <h2><span class="emoji">üÜò</span>Troubleshooting</h2>

        <h3>Common Issues</h3>
        <p><strong>"Stripe is not defined" error:</strong></p>
        <ul>
            <li>Check Stripe.js script is loaded before your code</li>
            <li>Verify publishable key is correct</li>
        </ul>

        <p><strong>Payments not processing:</strong></p>
        <ul>
            <li>Check browser console for errors</li>
            <li>Verify Stripe account is activated</li>
            <li>Ensure test mode matches key type</li>
        </ul>

        <p><strong>Subscription not updating:</strong></p>
        <ul>
            <li>Check Firebase security rules</li>
            <li>Verify user authentication</li>
            <li>Check browser network tab for API errors</li>
        </ul>

        <p><strong>Firebase permission denied:</strong></p>
        <ul>
            <li>Verify user is signed in</li>
            <li>Check security rules syntax</li>
            <li>Ensure user accessing own data only</li>
        </ul>

        <h2><span class="emoji">üìû</span>Support Resources</h2>

        <h3>Documentation</h3>
        <ul>
            <li><strong>Stripe:</strong> <a href="https://stripe.com/docs" target="_blank">https://stripe.com/docs</a></li>
            <li><strong>Firebase:</strong> <a href="https://firebase.google.com/docs" target="_blank">https://firebase.google.com/docs</a></li>
            <li><strong>GitHub Pages:</strong> <a href="https://pages.github.com" target="_blank">https://pages.github.com</a></li>
        </ul>

        <h3>Testing Tools</h3>
        <ul>
            <li><strong>Stripe Test Cards:</strong> <a href="https://stripe.com/docs/testing" target="_blank">https://stripe.com/docs/testing</a></li>
            <li><strong>Firebase Emulator:</strong> For local testing</li>
            <li><strong>Browser DevTools:</strong> Network and Console tabs</li>
        </ul>

        <h3>Community</h3>
        <ul>
            <li><strong>Stack Overflow:</strong> Technical questions</li>
            <li><strong>Stripe Support:</strong> Payment processing help</li>
            <li><strong>Firebase Support:</strong> Database and auth issues</li>
        </ul>

        <div class="congratulations">
            <h2><span class="emoji">üéä</span>Congratulations!</h2>
            <p>You now have a <strong>production-ready subscription system</strong> with:</p>
            <ul style="text-align: left; max-width: 600px; margin: 0 auto;">
                <li><span class="success">‚úÖ</span> Secure payment processing (Stripe)</li>
                <li><span class="success">‚úÖ</span> User management (Firebase Authentication)</li>
                <li><span class="success">‚úÖ</span> Subscription tracking (Firestore Database)</li>
                <li><span class="success">‚úÖ</span> Admin controls (Browser Console)</li>
                <li><span class="success">‚úÖ</span> Premium features (Status-based access)</li>
                <li><span class="success">‚úÖ</span> Analytics & reporting (Built-in admin panel)</li>
                <li><span class="success">‚úÖ</span> Mobile responsive design</li>
                <li><span class="success">‚úÖ</span> PCI compliant payment handling</li>
            </ul>
            <p style="font-size: 1.3em; margin-top: 30px;"><strong>Your French learning platform is ready to generate revenue!</strong> <span class="emoji">üöÄ</span></p>
        </div>

        <h2><span class="emoji">üí°</span>Next Steps</h2>
        <ol>
            <li><strong>Set up Stripe account</strong> and get live API keys</li>
            <li><strong>Test thoroughly</strong> with real payment flows</li>
            <li><strong>Deploy to production</strong> with GitHub Pages</li>
            <li><strong>Monitor subscriptions</strong> with admin panel</li>
            <li><strong>Optimize conversion</strong> with A/B testing</li>
            <li><strong>Scale your business</strong> with premium features</li>
        </ol>

        <p style="text-align: center; font-size: 1.2em; margin-top: 40px; color: #3498db;">
            <strong>Ready to launch your premium French learning platform!</strong> <span class="emoji">üá´üá∑‚ú®</span>
        </p>
    </div>
</body>
</html> 