<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>French Verbs Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #faf8f1 0%, #f5f1e8 100%);
            padding: 0;
            margin: 0;
            display: flex;
            padding-top: 8rem;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1001;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            min-height: 120px;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .nav-top-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .nav-menu-row {
            display: flex;
            justify-content: flex-start;
            width: 100%;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 3rem;
        }

        .auth-status {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #8b4513;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .gk-logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #8b4513, #d4af37);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            transition: all 0.3s ease;
        }

        .gk-logo:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .gk-letters {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            font-size: 18px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transform: skew(-10deg) rotate(-5deg);
            letter-spacing: -2px;
            position: relative;
        }

        .gk-letters::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, white, transparent);
            animation: running-line 2s ease-in-out infinite;
        }

        @keyframes running-line {
            0%, 100% { transform: translateX(-100%); opacity: 0; }
            50% { transform: translateX(0); opacity: 1; }
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }
        
        .logo-image {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            object-fit: cover;
            border: 2px solid #8b4513;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #3c2d1f;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: #8b4513;
            text-decoration: none;
        }

        .nav-links > li > a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: #8b4513;
            transition: width 0.3s ease;
        }

        .nav-links > li > a:hover::after {
            width: 100%;
        }

        /* Navigation Donate Button Styles - Matched to menu items */
        .nav-donate {
            display: none; /* Hidden by default, shown only when user is signed in */
        }

        .nav-donate-btn {
            background: none;
            border: none;
            color: #3c2d1f; /* Match menu items color */
            font-weight: 500; /* Match menu items font-weight */
            font-size: 1rem; /* Match menu items font-size */
            cursor: pointer;
            transition: color 0.3s ease; /* Match menu items transition */
            position: relative; /* For underline effect */
            padding: 0; /* Remove padding to match menu links */
            text-decoration: none;
            display: inline-block; /* Match menu links display */
            line-height: normal;
        }

        .nav-donate-btn:hover {
            color: #8b4513; /* Match menu items hover color */
            background: none;
            text-decoration: none; /* Match menu items hover */
        }

        .nav-donate-btn::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px; /* Match menu items underline height */
            bottom: -5px; /* Match menu items underline position */
            left: 0; /* Match menu items underline alignment */
            background-color: #8b4513; /* Match menu items underline color */
            transition: width 0.3s ease; /* Match menu items transition */
        }

        .nav-donate-btn:hover::after {
            width: 100%;
        }

        /* Donation Modal Styles */
        .donation-amounts {
            margin: 2rem 0;
        }

        .amount-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .amount-btn {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            color: #495057;
            border: 2px solid #dee2e6;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .amount-btn:hover {
            background: linear-gradient(135deg, #e9ecef, #dee2e6);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .amount-btn.selected {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border-color: #c0392b;
        }

        .custom-amount {
            text-align: center;
            margin-top: 1.5rem;
        }

        .custom-amount label {
            display: block;
            margin-bottom: 0.5rem;
            color: #666;
            font-weight: 500;
        }

        .amount-input-container {
            display: inline-flex;
            align-items: center;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            background: white;
            max-width: 200px;
            margin: 0 auto;
        }

        .currency-symbol {
            padding: 0.75rem 0.5rem 0.75rem 1rem;
            background: #f8f9fa;
            color: #666;
            font-weight: 600;
            font-size: 1.1rem;
        }

        #customAmount {
            border: none;
            outline: none;
            padding: 0.75rem 1rem 0.75rem 0.5rem;
            font-size: 1.1rem;
            width: 120px;
            background: transparent;
        }

        .selected-amount-display {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .selected-amount-display p {
            margin: 0;
            font-size: 1.1rem;
            color: #495057;
        }

        @media (max-width: 768px) {
            .amount-buttons {
                gap: 0.5rem;
            }
            
            .amount-btn {
                padding: 0.8rem 1rem;
                font-size: 1rem;
                min-width: 60px;
            }
        }

        /* Dropdown Menu Styles */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            border-radius: 8px;
            z-index: 1002;
            top: 100%;
            left: 0;
            overflow: hidden;
            border: 1px solid #e2e8f0;
        }

        .dropdown-content.show {
            display: block;
            animation: dropdownFadeIn 0.3s ease;
        }

        @keyframes dropdownFadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-item {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s ease;
            position: relative;
            white-space: nowrap;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .dropdown-item:hover {
            background-color: #f5f1e8;
            color: #8b4513;
            text-decoration: none;
        }

        .dropdown-item::after {
            display: none;
        }

        .dropdown-toggle {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dropdown-arrow {
            font-size: 0.8rem;
            transition: transform 0.3s ease;
        }

        .dropdown.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        /* Nested Dropdown */
        .nested-dropdown {
            position: relative;
        }

        .nested-dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 180px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            border-radius: 8px;
            z-index: 1003;
            top: 0;
            left: 100%;
            margin-left: 5px;
            border: 1px solid #e2e8f0;
        }

        .nested-dropdown-content.show {
            display: block;
            animation: dropdownFadeIn 0.3s ease;
        }

        .nested-dropdown:hover .nested-dropdown-content {
            display: block;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 260px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            border-radius: 12px;
            padding: 0;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            border: 1px solid rgba(255,255,255,0.2);
            position: fixed;
            top: 160px;
            height: calc(100vh - 180px);
            overflow-y: auto;
            z-index: 1000;
        }
        
        /* Legacy sidebar styles - overridden by new theme */
        .sidebar h3 {
            color: #374151;
            margin: 1.5rem 0 0.5rem 0;
            font-size: 1.1rem;
            padding-bottom: 0.5rem;
        }
        
        .sidebar h3:first-child {
            margin-top: 0;
        }
        
        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0 0 1rem 0;
        }
        
        .sidebar li {
            margin: 0.3rem 0;
        }
        
        .sidebar a {
            color: #374151;
            text-decoration: none;
            display: block;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }
        
        .sidebar a:hover {
            background: #8b4513;
            color: #fff;
            transform: translateX(4px);
            text-decoration: none;
        }
        
        .sidebar a.category-link {
            background: #b8860b;
            color: #fff;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .sidebar a.category-link:hover {
            background: #d4af37;
            text-decoration: none;
        }
        
        /* Sidebar expand/collapse functionality */
        .sidebar .expandable-section {
            margin-bottom: 1rem;
        }
        
        .sidebar .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0;
            cursor: pointer;
            color: #374151;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .sidebar .section-header:hover {
            color: #8b4513;
        }
        
        .sidebar .expand-icon {
            transition: transform 0.3s ease;
            font-size: 0.9rem;
            color: #374151;
        }
        
        .sidebar .expand-icon.expanded {
            transform: rotate(90deg);
        }
        
        .sidebar .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            opacity: 0;
        }
        
        .sidebar .collapsible-content.expanded {
            max-height: 1000px;
            opacity: 1;
        }
        
        .sidebar .collapsible-content ul {
            margin: 0;
            padding-left: 0.5rem;
        }

        /* Nested expandable sections styling */
        .sidebar .expandable-section .expandable-section {
            margin-left: 0.5rem;
            padding-left: 0.5rem;
        }
        
        .sidebar .expandable-section .expandable-section .section-header {
            margin-bottom: 0.3rem;
        }

        /* Ensure nested collapsible content works properly */
        .sidebar .expandable-section .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            opacity: 0;
        }
        
        .sidebar .expandable-section .collapsible-content.expanded {
            max-height: 1000px;
            opacity: 1;
        }

        /* Back Button */
        .back-button-section {
            padding: 1rem 1rem 0.5rem 1rem;
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            text-decoration: none !important;
            color: #374151;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 10px;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 0.875rem;
            border: 1px solid #e5e7eb;
        }

        .back-button:hover {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: white;
            transform: translateX(-3px);
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.25);
            text-decoration: none;
        }

        .back-icon {
            font-size: 1.25rem;
            font-weight: bold;
            transition: transform 0.2s ease;
        }

        .back-button:hover .back-icon {
            transform: translateX(-3px);
        }

        .back-text {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Sidebar Header */
        .sidebar-header {
            padding: 1rem 1.25rem;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }

        .sidebar-header h3 {
            color: #374151;
            font-size: 0.875rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin: 0;
        }

        /* Updated Navigation Styles */
        .nav-section {
            padding: 0.5rem 0;
        }

        .nav-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .nav-list li {
            margin: 0;
            border-bottom: 1px solid #f8fafc;
        }

        .nav-list li:last-child {
            border-bottom: none;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.25rem;
            text-decoration: none;
            color: #374151;
            background: transparent;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 0.875rem;
            position: relative;
        }

        .nav-link:hover {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: white;
            padding-left: 1.5rem;
            text-decoration: none;
        }
        
        /* Main Content Styles */
        .main-content {
            margin-left: 260px;
            padding: 2rem;
            flex: 1;
            min-height: 100vh;
        }
        
        /* Professional Content Spacing */
        .main-content > div {
            margin-bottom: 3rem;
        }
        
        .main-content h1 {
            margin-bottom: 1rem;
            margin-top: 0;
        }
        
        .main-content h2 {
            margin-top: 3rem;
            margin-bottom: 1.5rem;
        }
        
        .search-container {
            margin: 2rem 0;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .dropdown-content {
                position: fixed;
                top: 70px;
                left: 10px;
                right: 10px;
                min-width: auto;
                max-width: none;
            }

            .nested-dropdown-content {
                position: static;
                box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
                margin: 5px 0;
                border-radius: 4px;
            }

            .sidebar {
                width: 250px;
                transform: translateX(-100%);
                top: 80px;
                height: calc(100vh - 80px);
                border-radius: 0;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .menu-toggle {
                display: block;
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 1001;
                background: #b8860b;
                color: #fff;
                border: none;
                padding: 0.5rem;
                border-radius: 4px;
                cursor: pointer;
            }
        }
        
        .menu-toggle {
            display: none;
        }
        
        h1, h2 {
            color: #3c2d1f;
            text-align: center;
        }
        
        table {
            margin: 2rem auto;
            border-collapse: collapse;
            width: 80%;
            background: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        th, td {
            border: 1px solid #d4af37;
            padding: 0.75rem 1rem;
            text-align: center;
        }
        
        th {
            background: #f5f1e8;
        }
        
        a {
            color: #8b4513;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        button {
            background: #b8860b;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 0.4rem 1rem;
            cursor: pointer;
            font-size: 1rem;
        }
        
        button:hover {
            background: #d4af37;
        }
        
        .master-play {
            display: block;
            margin: 0 auto 1.5rem auto;
            font-size: 1.1rem;
            padding: 0.5rem 1.5rem;
        }
        
        .drill-up {
            display: block;
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }
        
        .verb-section {
            margin-bottom: 3rem;
        }
        
        /* Search Bar Styles */
        .search-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .search-box {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            align-items: center;
        }

        #searchInput {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        #searchInput:focus {
            outline: none;
            border-color: #b8860b;
            box-shadow: 0 0 0 3px rgba(184, 134, 11, 0.1);
        }

        #searchButton {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #b8860b, #d4af37);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        #searchButton:hover {
            background: linear-gradient(135deg, #d4af37, #cd853f);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(184, 134, 11, 0.3);
        }

        .search-results {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            display: none;
            font-size: 0.9rem;
        }

        .search-results.show {
            display: block;
        }

        .search-result-item {
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: white;
            border-left: 3px solid #b8860b;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .search-result-item:hover {
            background: #f1f5f9;
            transform: translateX(2px);
        }

        .search-no-results {
            color: #6b7280;
            text-align: center;
            padding: 1rem;
            font-style: italic;
        }

        /* Word highlighting when audio is playing */
        .word-highlight {
            background: linear-gradient(135deg, #ffd700, #ffed4e) !important;
            color: #8b4513 !important;
            padding: 2px 6px !important;
            border-radius: 4px !important;
            font-weight: bold !important;
            animation: pulse 1.5s ease-in-out infinite !important;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4) !important;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Authentication Styles */
        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sign-in-btn, .sign-up-btn, .sign-out-btn {
            padding: 0.25rem 0.6rem;
            border: none;
            border-radius: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.7rem;
        }

        .sign-in-btn {
            background: transparent;
            color: #8b4513;
            border: 2px solid #8b4513;
        }

        .sign-in-btn:hover {
            background: #8b4513;
            color: white;
        }

        .sign-up-btn {
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            border: 2px solid transparent;
        }

        .sign-up-btn:hover {
            background: linear-gradient(135deg, #d4af37, #cd853f);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.3);
        }

        .sign-out-btn {
            background: #dc3545;
            color: white;
            font-size: 0.8rem;
            padding: 0.3rem 0.8rem;
        }

        .sign-out-btn:hover {
            background: #c82333;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            border: 2px solid #8b4513;
        }

        .user-profile span {
            color: #8b4513;
            font-weight: 500;
            font-size: 0.9rem;
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
            max-height: 85vh;
            overflow-y: auto;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 10px;
        }

        .close:hover {
            color: #8b4513;
        }

        .modal h2 {
            color: #8b4513;
            margin-bottom: 0.8rem;
            text-align: center;
            font-size: 1.2rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #3c2d1f;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #8b4513;
            box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
        }

        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            background-color: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .form-group select:focus {
            outline: none;
            border-color: #8b4513;
            box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
        }

        .auth-btn {
            width: 100%;
            padding: 0.75rem;
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 1rem 0;
        }

        .auth-btn:hover {
            background: linear-gradient(135deg, #654321, #b8860b);
            transform: translateY(-2px);
        }

        .auth-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .switch-auth {
            text-align: center;
            margin-top: 1rem;
            color: #666;
        }

        .switch-auth a {
            color: #8b4513;
            text-decoration: none;
            font-weight: 500;
        }

        .switch-auth a:hover {
            text-decoration: underline;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 0.75rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 1px solid #f5c6cb;
            display: none;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 0.75rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 1px solid #c3e6cb;
            display: none;
        }

        .spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #8b4513;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .user-status {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            flex-wrap: wrap;
        }

        .user-greeting {
            color: #2d3748;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .subscription-status {
            font-size: 0.625rem;
            padding: 0.15rem 0.4rem;
            border-radius: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .subscription-status.premium {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #8b4513;
            border: 1px solid #d4af37;
        }

        .subscription-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            padding: 0.25rem 0.6rem;
            border-radius: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.7rem;
            text-decoration: none;
            display: none; /* Hide by default to prevent flash for premium users - overridden by JS */
            align-items: center;
            gap: 0.4rem;
        }

        .subscription-btn:hover {
            background: linear-gradient(135deg, #218838, #1fa186);
            transform: translateY(-2px);
        }

        .subscription-btn.premium {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #8b4513;
            font-weight: 600;
        }

        .subscription-btn.premium:hover {
            background: linear-gradient(135deg, #ffed4e, #ff7f00);
        }

        /* Subscription Modal Styles */
        .subscription-modal-content {
            max-width: 950px;
            padding: 1.2rem;
            max-height: 90vh;
            overflow-y: auto;
        }

        .subscription-plans {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1.2rem 0;
        }

        .plan-card {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 0.8rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            min-height: 320px;
        }

        .plan-card:hover {
            border-color: #28a745;
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.2);
            transform: translateY(-3px);
        }

        .plan-card.selected {
            border: 3px solid #28a745;
            box-shadow: 0 8px 30px rgba(40, 167, 69, 0.3);
            transform: translateY(-5px);
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(32, 201, 151, 0.1));
        }

        .plan-card.selected::before {
            content: '✅ SELECTED';
            position: absolute;
            top: 15px;
            right: 15px;
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .plan-card.popular {
            border-color: #3498db;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        }

        .plan-card.popular:hover, .plan-card.popular.selected {
            border-color: #2980b9;
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.3);
        }

        .plan-card.premium {
            border-color: #ffd700;
            background: linear-gradient(135deg, #fff9c4, #ffeaa7);
        }

        .plan-card.premium:hover, .plan-card.premium.selected {
            border-color: #ff8c00;
            box-shadow: 0 8px 25px rgba(255, 140, 0, 0.3);
        }

        .plan-name {
            font-size: 1.1rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 0.4rem;
        }

        .plan-price {
            font-size: 1.4rem;
            font-weight: 800;
            color: #27ae60;
            margin-bottom: 0.8rem;
        }

        .plan-price .currency {
            font-size: 0.9rem;
            vertical-align: top;
        }

        .plan-price .period {
            font-size: 0.8rem;
            color: #7f8c8d;
            font-weight: 400;
        }

        .plan-features {
            list-style: none;
            padding: 0;
            margin: 0.5rem 0;
            font-size: 0.75rem;
        }

        .plan-features li {
            padding: 0.15rem 0;
            color: #2c3e50;
            position: relative;
        }

        .plan-features li::before {
            content: '✓';
            color: #28a745;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        /* Responsive design for subscription plans */
        @media (max-width: 768px) {
            .subscription-modal-content {
                max-width: 95%;
                padding: 1rem;
            }
            
            .subscription-plans {
                grid-template-columns: 1fr;
            }
            
            .plan-card {
                min-height: auto;
            }
        }

        @media (max-width: 1024px) and (min-width: 769px) {
            .subscription-plans {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .payment-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px solid #e2e8f0;
        }

        .payment-form {
            margin-top: 1rem;
        }

        #card-element {
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin: 1rem 0;
            transition: border-color 0.3s ease;
        }

        #card-element:focus {
            border-color: #28a745;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
        }

        .subscription-btn-modal {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .subscription-btn-modal:hover {
            background: linear-gradient(135deg, #218838, #1e7e34);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3);
        }

        .subscription-btn-modal:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <!-- Top Row: Logo + Auth -->
            <div class="nav-top-row">
                <a href="index.html" class="logo-container">
                    <div class="gk-logo">
                        <span class="gk-letters">GK</span>
                    </div>
                    <span class="logo">Foundation</span>
                </a>
                <div class="auth-status">
                    <div id="userStatus" class="user-status" style="display: none;">
                        <span id="userGreeting" class="user-greeting"></span>
                        <button id="subscriptionBtn" class="subscription-btn" onclick="openSubscriptionModal()">💎 Go Premium</button>
                    </div>
                    <div class="auth-buttons">
                        <button id="signInBtn" class="sign-in-btn" onclick="openSignInModal()">Sign In</button>
                        <button id="signUpBtn" class="sign-up-btn" onclick="openSignUpModal()">Sign Up</button>
                        <button id="signOutBtn" class="sign-out-btn" style="display: none;" onclick="signOut()">Sign Out</button>
                    </div>
                </div>
            </div>
            
            <!-- Bottom Row: Menu Items -->
            <div class="nav-menu-row">
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" onclick="toggleDropdown(event, 'frenchLearningDropdown')">
                            Our Offerings
                            <span class="dropdown-arrow">▼</span>
                        </a>
                        <div class="dropdown-content" id="frenchLearningDropdown">
                                                            <a href="French-for-Beginners.html" class="dropdown-item">🎓 French for Beginners</a>
                        </div>
                    </li>
                    <li><a href="index.html#modules">Learning Modules</a></li>
                    <li><a href="index.html#features">Features</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li class="nav-donate">
                        <button class="nav-donate-btn" onclick="openDonationModal()">❤️ Support Us</button>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <button class="menu-toggle" onclick="toggleSidebar()">☰ Menu</button>
    
    <div class="sidebar" id="sidebar">
        <!-- Back Button -->
        <div class="back-button-section">
            <a href="French-for-Beginners.html" class="back-button">
                <span class="back-icon">←</span>
                <span class="back-text">Back</span>
            </a>
        </div>
        
        <!-- Page-Specific Navigation -->
        <div class="nav-section">
            <ul class="nav-list">
                <li><a href="#top" class="nav-link">↑ Back to Top</a></li>
                <li><a href="#verb-overview" class="nav-link">Overview</a></li>
            </ul>
        </div>
        
        <div class="expandable-section">
            <div class="section-header" onclick="toggleSection('verbs')">
                <span>📚 Verbs</span>
                <span class="expand-icon" id="verbs-icon">▶</span>
            </div>
            <div class="collapsible-content" id="verbs-content">
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('regular-er')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>📝 Regular -er Verbs</span>
                        <span class="expand-icon" id="regular-er-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="regular-er-content">
                        <ul class="nav-list">
                            <li><a href="#accepter" class="nav-link">accepter (to accept)</a></li>
                            <li><a href="#aimer">aimer (to like, to love)</a></li>
                            <li><a href="#annuler">annuler (to cancel)</a></li>
                            <li><a href="#apporter">apporter (to bring)</a></li>
                            <li><a href="#attraper">attraper (to catch)</a></li>
                            <li><a href="#augmenter">augmenter (to increase)</a></li>
                            <li><a href="#bavarder">bavarder (to chat)</a></li>
                            <li><a href="#casser">casser (to break)</a></li>
                            <li><a href="#chercher">chercher (to look for)</a></li>
                            <li><a href="#commander">commander (to order)</a></li>
                            <li><a href="#couper">couper (to cut)</a></li>
                            <li><a href="#danser">danser (to dance)</a></li>
                            <li><a href="#dejeuner">déjeuner (to have lunch)</a></li>
                            <li><a href="#demander">demander (to ask)</a></li>
                            <li><a href="#dessiner">dessiner (to draw)</a></li>
                            <li><a href="#donner">donner (to give)</a></li>
                            <li><a href="#emprunter">emprunter (to borrow)</a></li>
                            <li><a href="#etudier">étudier (to study)</a></li>
                            <li><a href="#exprimer">exprimer (to express)</a></li>
                            <li><a href="#gagner">gagner (to win, to earn)</a></li>
                            <li><a href="#garder">garder (to keep)</a></li>
                            <li><a href="#habiter">habiter (to live)</a></li>
                            <li><a href="#laver">laver (to wash)</a></li>
                            <li><a href="#meriter">mériter (to deserve)</a></li>
                            <li><a href="#oublier">oublier (to forget)</a></li>
                            <li><a href="#parler">parler (to speak)</a></li>
                            <li><a href="#porter">porter (to carry)</a></li>
                            <li><a href="#preter">prêter (to lend)</a></li>
                            <li><a href="#refuser">refuser (to refuse)</a></li>
                            <li><a href="#regarder">regarder (to watch)</a></li>
                            <li><a href="#saluer">saluer (to greet)</a></li>
                            <li><a href="#sauter">sauter (to jump)</a></li>
                            <li><a href="#tomber">tomber (to fall)</a></li>
                            <li><a href="#travailler">travailler (to work)</a></li>
                            <li><a href="#visiter">visiter (to visit)</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('cer-verbs')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>🔄 -cer Verbs</span>
                        <span class="expand-icon" id="cer-verbs-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="cer-verbs-content">
                        <ul>
                            <li><a href="#annoncer">annoncer (to announce)</a></li>
                            <li><a href="#avancer">avancer (to move forward)</a></li>
                            <li><a href="#balancer">balancer (to swing)</a></li>
                            <li><a href="#commencer">commencer (to start)</a></li>
                            <li><a href="#defoncer">défoncer (to smash in)</a></li>
                            <li><a href="#deplacer">déplacer (to move)</a></li>
                            <li><a href="#devancer">devancer (to get ahead of)</a></li>
                            <li><a href="#effacer">effacer (to erase)</a></li>
                            <li><a href="#epicer">épicer (to spice)</a></li>
                            <li><a href="#faconner">façonner (to craft, to manufacture)</a></li>
                            <li><a href="#financer">financer (to finance)</a></li>
                            <li><a href="#grimacer">grimaçer (to make faces)</a></li>
                            <li><a href="#influencer">influencer (to influence)</a></li>
                            <li><a href="#lacer">lacer (to lace up, to tie)</a></li>
                            <li><a href="#menacer">menacer (to threaten)</a></li>
                            <li><a href="#percer">percer (to pierce)</a></li>
                            <li><a href="#placer">placer (to place)</a></li>
                            <li><a href="#poncer">poncer (to sand)</a></li>
                            <li><a href="#remplacer">remplacer (to replace)</a></li>
                            <li><a href="#renoncer">renoncer (to give up)</a></li>
                            <li><a href="#prononcer">prononcer (to pronounce)</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('ger-verbs')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>🔀 -ger Verbs</span>
                        <span class="expand-icon" id="ger-verbs-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="ger-verbs-content">
                        <ul>
                            <li><a href="#bouger">bouger (to move)</a></li>
                            <li><a href="#changer">changer (to change)</a></li>
                            <li><a href="#corriger">corriger (to correct)</a></li>
                            <li><a href="#degager">dégager (to release, to free)</a></li>
                            <li><a href="#demenager">déménager (to move house)</a></li>
                            <li><a href="#encourager">encourager (to encourage)</a></li>
                            <li><a href="#exiger">exiger (to demand)</a></li>
                            <li><a href="#heberger">héberger (to host)</a></li>
                            <li><a href="#manger">manger (to eat)</a></li>
                            <li><a href="#melanger">mélanger (to mix)</a></li>
                            <li><a href="#nager">nager (to swim)</a></li>
                            <li><a href="#negliger">négliger (to neglect)</a></li>
                            <li><a href="#partager">partager (to share)</a></li>
                            <li><a href="#plonger">plonger (to dive)</a></li>
                            <li><a href="#proteger">protéger (to protect)</a></li>
                            <li><a href="#ranger">ranger (to put away)</a></li>
                            <li><a href="#venger">venger (to avenge)</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('accent-verbs')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>📐 -e + consonant + -er Verbs</span>
                        <span class="expand-icon" id="accent-verbs-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="accent-verbs-content">
                        <ul>
                            <li><a href="#achever">achever (to complete)</a></li>
                            <li><a href="#ceder">céder (to yield)</a></li>
                            <li><a href="#celebrer">célébrer (to celebrate)</a></li>
                            <li><a href="#considerer">considérer (to consider)</a></li>
                            <li><a href="#deleguer">déléguer (to delegate)</a></li>
                            <li><a href="#emmener">emmener (to take along)</a></li>
                            <li><a href="#enlever">enlever (to remove)</a></li>
                            <li><a href="#esperer">espérer (to hope)</a></li>
                            <li><a href="#exagerer">exagérer (to exaggerate)</a></li>
                            <li><a href="#gerer">gérer (to manage)</a></li>
                            <li><a href="#lecher">lécher (to lick)</a></li>
                            <li><a href="#lever">lever (to raise)</a></li>
                            <li><a href="#mener">mener (to lead)</a></li>
                            <li><a href="#peser">peser (to weigh)</a></li>
                            <li><a href="#posseder">posséder (to own)</a></li>
                            <li><a href="#preferer">préférer (to prefer)</a></li>
                            <li><a href="#reveler">révéler (to reveal)</a></li>
                            <li><a href="#semer">semer (to sow)</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('eler-verbs')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>📞 -e + l + -er Verbs</span>
                        <span class="expand-icon" id="eler-verbs-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="eler-verbs-content">
                        <ul>
                            <li><a href="#appeler">appeler (to call)</a></li>
                            <li><a href="#ensorceler">ensorceler (to bewitch)</a></li>
                            <li><a href="#etinceler">étinceler (to sparkle)</a></li>
                            <li><a href="#ficeler">ficeler (to tie)</a></li>
                            <li><a href="#niveler">niveler (to level)</a></li>
                            <li><a href="#rappeler">rappeler (to remind)</a></li>
                            <li><a href="#renouveler">renouveler (to renew)</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('ir-verbs')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>🏗️ Type 1 -ir Verbs</span>
                        <span class="expand-icon" id="ir-verbs-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="ir-verbs-content">
                        <ul>
                            <li><a href="#accomplir">accomplir (to accomplish)</a></li>
                            <li><a href="#adoucir">adoucir (to soften)</a></li>
                            <li><a href="#agrandir">agrandir (to enlarge)</a></li>
                            <li><a href="#applaudir">applaudir (to applaud)</a></li>
                            <li><a href="#batir">bâtir (to build)</a></li>
                            <li><a href="#benir">bénir (to bless)</a></li>
                            <li><a href="#eclaircir">éclaircir (to lighten)</a></li>
                            <li><a href="#epanouir">s'épanouir (to bloom)</a></li>
                            <li><a href="#evanouir">s'évanouir (to faint)</a></li>
                            <li><a href="#finir">finir (to finish)</a></li>
                            <li><a href="#grandir">grandir (to grow up)</a></li>
                            <li><a href="#grossir">grossir (to put on weight)</a></li>
                            <li><a href="#investir">investir (to invest)</a></li>
                            <li><a href="#maigrir">maigrir (to lose weight)</a></li>
                            <li><a href="#mincir">mincir (to slim down)</a></li>
                            <li><a href="#obeir">obéir (to obey)</a></li>
                            <li><a href="#palir">pâlir (to turn pale)</a></li>
                            <li><a href="#rafraichir">rafraîchir (to refresh)</a></li>
                            <li><a href="#ralentir">ralentir (to slow down)</a></li>
                            <li><a href="#reflechir">réfléchir (to reflect)</a></li>
                            <li><a href="#remplir">remplir (to fill)</a></li>
                            <li><a href="#reussir">réussir (to succeed)</a></li>
                            <li><a href="#rougir">rougir (to blush)</a></li>
                            <li><a href="#saisir">saisir (to seize)</a></li>
                            <li><a href="#vieillir">vieillir (to grow old)</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('ir2-verbs')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>⚡ Type 2 -ir Verbs</span>
                        <span class="expand-icon" id="ir2-verbs-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="ir2-verbs-content">
                        <ul>
                            <li><a href="#bouillir">bouillir (to boil)</a></li>
                            <li><a href="#courir">courir (to run)</a></li>
                            <li><a href="#couvrir">couvrir (to cover)</a></li>
                            <li><a href="#cueillir">cueillir (to pick)</a></li>
                            <li><a href="#dormir">dormir (to sleep)</a></li>
                            <li><a href="#fuir">fuir (to flee)</a></li>
                            <li><a href="#mentir">mentir (to lie)</a></li>
                            <li><a href="#mourir">mourir (to die)</a></li>
                            <li><a href="#obtenir">obtenir (to get)</a></li>
                            <li><a href="#offrir">offrir (to offer)</a></li>
                            <li><a href="#ouvrir">ouvrir (to open)</a></li>
                            <li><a href="#partir">partir (to leave)</a></li>
                            <li><a href="#sentir">sentir (to feel/smell)</a></li>
                            <li><a href="#servir">servir (to serve)</a></li>
                            <li><a href="#souffrir">souffrir (to suffer)</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('re-verbs')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>🔗 Regular -re Verbs</span>
                        <span class="expand-icon" id="re-verbs-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="re-verbs-content">
                        <ul>
                            <li><a href="#attendre">attendre (to wait)</a></li>
                            <li><a href="#defendre">défendre (to defend)</a></li>
                            <li><a href="#descendre">descendre (to go down)</a></li>
                            <li><a href="#detendre">détendre (to relax)</a></li>
                            <li><a href="#entendre">entendre (to hear)</a></li>
                            <li><a href="#etendre">étendre (to extend)</a></li>
                            <li><a href="#mordre">mordre (to bite)</a></li>
                            <li><a href="#perdre">perdre (to lose)</a></li>
                            <li><a href="#pretendre">prétendre (to claim)</a></li>
                            <li><a href="#rendre">rendre (to return)</a></li>
                            <li><a href="#repandre">répandre (to spread)</a></li>
                            <li><a href="#repondre">répondre (to answer)</a></li>
                            <li><a href="#tendre">tendre (to stretch)</a></li>
                            <li><a href="#tordre">tordre (to twist)</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="expandable-section" style="margin-left: 1rem;">
                    <div class="section-header" onclick="toggleSection('irre-verbs')" style="font-size: 0.95rem; padding: 0.3rem 0;">
                        <span>🔄 Irregular -re Verbs</span>
                        <span class="expand-icon" id="irre-verbs-icon">▶</span>
                    </div>
                    <div class="collapsible-content" id="irre-verbs-content">
                        <ul>
                            <li><a href="#apprendre">apprendre (to learn)</a></li>
                            <li><a href="#comprendre">comprendre (to understand)</a></li>
                            <li><a href="#entreprendre">entreprendre (to undertake)</a></li>
                            <li><a href="#surprendre">surprendre (to surprise)</a></li>
                        </ul>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    
    <div class="main-content">
        <div id="top">
            <h1>French Verbs Learning</h1>
            <p>Master French verb conjugations with comprehensive tables, pronunciation guides, and example sentences. Learn regular and irregular verbs across all major verb groups: -er, -ir, and -re verbs.</p>
        </div>
        
        <!-- Search Bar -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search for any verb (e.g., parler, aimer, finir)..." />
                <button id="searchButton" onclick="performSearch()">🔍 Search</button>
            </div>
            <div id="searchResults" class="search-results"></div>
        </div>
        
        <div id="verb-overview">
            <h2>French Verb Categories</h2>
            <div style="max-width: 800px; margin: 0 auto 1.5rem auto; background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem 1.5rem; color: #8b4513; font-size: 1.08rem;">
                <strong>Understanding French Verbs</strong><br>
                French verbs are categorized into three main groups based on their infinitive endings: -er, -ir, and -re verbs. Each group follows specific conjugation patterns, though some verbs have irregular forms that must be memorized individually.<br><br>
                <strong>Conjugation Patterns</strong><br>
                Regular verbs follow predictable patterns that change the verb ending based on the subject (je, tu, il/elle, nous, vous, ils/elles). Mastering these patterns is fundamental to speaking French correctly.
            </div>
            
            <table>
                <thead>
                    <tr>
                        <th>Verb Group</th>
                        <th>Pattern/Ending</th>
                        <th>Example</th>
                        <th>Explore</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>📝 Regular -er Verbs</td><td>-er</td><td>parler (to speak)</td><td><a href="#parler">Go</a></td></tr>
                    <tr><td>🔄 -cer Verbs</td><td>-cer</td><td>commencer (to start)</td><td><a href="#commencer">Go</a></td></tr>
                    <tr><td>🔀 -ger Verbs</td><td>-ger</td><td>manger (to eat)</td><td><a href="#manger">Go</a></td></tr>
                    <tr><td>📐 -e + consonant + -er Verbs</td><td>-e(consonant)er</td><td>préférer (to prefer)</td><td><a href="#preferer">Go</a></td></tr>
                    <tr><td>📞 -e + l + -er Verbs</td><td>-eler</td><td>appeler (to call)</td><td><a href="#appeler">Go</a></td></tr>
                    <tr><td>🏗️ Type 1 -ir Verbs</td><td>-ir (regular)</td><td>finir (to finish)</td><td><a href="#finir">Go</a></td></tr>
                    <tr><td>⚡ Type 2 -ir Verbs</td><td>-ir (irregular)</td><td>dormir (to sleep)</td><td><a href="#dormir">Go</a></td></tr>
                    <tr><td>🔗 Regular -re Verbs</td><td>-re</td><td>attendre (to wait)</td><td><a href="#attendre">Go</a></td></tr>
                    <tr><td>🔄 Irregular -re Verbs</td><td>-re (irregular)</td><td>apprendre (to learn)</td><td><a href="#apprendre">Go</a></td></tr>
                </tbody>
            </table>
        </div>

        <!-- Main Verb Conjugation Sections with Examples -->
        <div class="verb-section" id="accepter">
            <a class="drill-up" href="#verb-overview">↑ Back to Overview</a>
            <h2>accepter (to accept)</h2>
            <button class="master-play" onclick="playAll('accepter')">▶️ Play All French Conjugations</button>
            <table>
                <thead>
                    <tr><th>French</th><th>English</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>J'accepte</td><td>I accept</td><td><button onclick="playAudio('J\'accepte')">🔊</button></td></tr>
                    <tr><td>Tu acceptes</td><td>You accept (singular/informal)</td><td><button onclick="playAudio('Tu acceptes')">🔊</button></td></tr>
                    <tr><td>Il/Elle accepte</td><td>He/She accepts</td><td><button onclick="playAudio('Il/Elle accepte')">🔊</button></td></tr>
                    <tr><td>Nous acceptons</td><td>We accept</td><td><button onclick="playAudio('Nous acceptons')">🔊</button></td></tr>
                    <tr><td>Vous acceptez</td><td>You accept (plural/formal)</td><td><button onclick="playAudio('Vous acceptez')">🔊</button></td></tr>
                    <tr><td>Ils/Elles acceptent</td><td>They accept (masculine/feminine)</td><td><button onclick="playAudio('Ils/Elles acceptent')">🔊</button></td></tr>
                </tbody>
            </table>
            
            <h3 style="margin-top: 2rem; text-align: center; color: #8b4513;">Example Sentences</h3>
            <button class="master-play" onclick="playAllSentences('accepter')">▶️ Play All Example Sentences</button>
            <table style="margin-top: 1rem;">
                <thead>
                    <tr><th>French Sentence</th><th>English Translation</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>J'accepte votre invitation.</td><td>I accept your invitation.</td><td><button onclick="playAudio('J\'accepte votre invitation')">🔊</button></td></tr>
                    <tr><td>Tu acceptes ce cadeau ?</td><td>Do you accept this gift?</td><td><button onclick="playAudio('Tu acceptes ce cadeau')">🔊</button></td></tr>
                    <tr><td>Il accepte le travail.</td><td>He accepts the job.</td><td><button onclick="playAudio('Il accepte le travail')">🔊</button></td></tr>
                    <tr><td>Nous acceptons vos conditions.</td><td>We accept your conditions.</td><td><button onclick="playAudio('Nous acceptons vos conditions')">🔊</button></td></tr>
                    <tr><td>Vous acceptez les cartes de crédit ?</td><td>Do you accept credit cards?</td><td><button onclick="playAudio('Vous acceptez les cartes de crédit')">🔊</button></td></tr>
                    <tr><td>Ils acceptent notre proposition.</td><td>They accept our proposal.</td><td><button onclick="playAudio('Ils acceptent notre proposition')">🔊</button></td></tr>
                </tbody>
            </table>
        </div>

        <div class="verb-section" id="aimer">
            <a class="drill-up" href="#verb-overview">↑ Back to Overview</a>
            <h2>aimer (to like, to love)</h2>
            <button class="master-play" onclick="playAll('aimer')">▶️ Play All French Conjugations</button>
            <table>
                <thead>
                    <tr><th>French</th><th>English</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>J'aime</td><td>I like/love</td><td><button onclick="playAudio('J\'aime')">🔊</button></td></tr>
                    <tr><td>Tu aimes</td><td>You like/love (singular/informal)</td><td><button onclick="playAudio('Tu aimes')">🔊</button></td></tr>
                    <tr><td>Il/Elle aime</td><td>He/She likes/loves</td><td><button onclick="playAudio('Il/Elle aime')">🔊</button></td></tr>
                    <tr><td>Nous aimons</td><td>We like/love</td><td><button onclick="playAudio('Nous aimons')">🔊</button></td></tr>
                    <tr><td>Vous aimez</td><td>You like/love (plural/formal)</td><td><button onclick="playAudio('Vous aimez')">🔊</button></td></tr>
                    <tr><td>Ils/Elles aiment</td><td>They like/love (masculine/feminine)</td><td><button onclick="playAudio('Ils/Elles aiment')">🔊</button></td></tr>
                </tbody>
            </table>
            
            <h3 style="margin-top: 2rem; text-align: center; color: #8b4513;">Example Sentences</h3>
            <button class="master-play" onclick="playAllSentences('aimer')">▶️ Play All Example Sentences</button>
            <table style="margin-top: 1rem;">
                <thead>
                    <tr><th>French Sentence</th><th>English Translation</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>J'aime le chocolat.</td><td>I like chocolate.</td><td><button onclick="playAudio('J\'aime le chocolat')">🔊</button></td></tr>
                    <tr><td>Tu aimes cette musique ?</td><td>Do you like this music?</td><td><button onclick="playAudio('Tu aimes cette musique')">🔊</button></td></tr>
                    <tr><td>Elle aime lire des livres.</td><td>She likes to read books.</td><td><button onclick="playAudio('Elle aime lire des livres')">🔊</button></td></tr>
                    <tr><td>Nous aimons voyager.</td><td>We like to travel.</td><td><button onclick="playAudio('Nous aimons voyager')">🔊</button></td></tr>
                    <tr><td>Vous aimez le café français ?</td><td>Do you like French coffee?</td><td><button onclick="playAudio('Vous aimez le café français')">🔊</button></td></tr>
                    <tr><td>Ils aiment jouer au football.</td><td>They like to play soccer.</td><td><button onclick="playAudio('Ils aiment jouer au football')">🔊</button></td></tr>
                </tbody>
            </table>
        </div>

        <div class="verb-section" id="parler">
            <a class="drill-up" href="#verb-overview">↑ Back to Overview</a>
            <h2>parler (to speak)</h2>
            <button class="master-play" onclick="playAll('parler')">▶️ Play All French Conjugations</button>
            <table>
                <thead>
                    <tr><th>French</th><th>English</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>Je parle</td><td>I speak</td><td><button onclick="playAudio('Je parle')">🔊</button></td></tr>
                    <tr><td>Tu parles</td><td>You speak (singular/informal)</td><td><button onclick="playAudio('Tu parles')">🔊</button></td></tr>
                    <tr><td>Il/Elle parle</td><td>He/She speaks</td><td><button onclick="playAudio('Il/Elle parle')">🔊</button></td></tr>
                    <tr><td>Nous parlons</td><td>We speak</td><td><button onclick="playAudio('Nous parlons')">🔊</button></td></tr>
                    <tr><td>Vous parlez</td><td>You speak (plural/formal)</td><td><button onclick="playAudio('Vous parlez')">🔊</button></td></tr>
                    <tr><td>Ils/Elles parlent</td><td>They speak (masculine/feminine)</td><td><button onclick="playAudio('Ils/Elles parlent')">🔊</button></td></tr>
                </tbody>
            </table>
            
            <h3 style="margin-top: 2rem; text-align: center; color: #8b4513;">Example Sentences</h3>
            <button class="master-play" onclick="playAllSentences('parler')">▶️ Play All Example Sentences</button>
            <table style="margin-top: 1rem;">
                <thead>
                    <tr><th>French Sentence</th><th>English Translation</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>Je parle français.</td><td>I speak French.</td><td><button onclick="playAudio('Je parle français')">🔊</button></td></tr>
                    <tr><td>Tu parles très bien.</td><td>You speak very well.</td><td><button onclick="playAudio('Tu parles très bien')">🔊</button></td></tr>
                    <tr><td>Il parle avec son ami.</td><td>He speaks with his friend.</td><td><button onclick="playAudio('Il parle avec son ami')">🔊</button></td></tr>
                    <tr><td>Nous parlons de nos projets.</td><td>We talk about our projects.</td><td><button onclick="playAudio('Nous parlons de nos projets')">🔊</button></td></tr>
                    <tr><td>Vous parlez quelle langue ?</td><td>What language do you speak?</td><td><button onclick="playAudio('Vous parlez quelle langue')">🔊</button></td></tr>
                    <tr><td>Elles parlent au téléphone.</td><td>They are talking on the phone.</td><td><button onclick="playAudio('Elles parlent au téléphone')">🔊</button></td></tr>
                </tbody>
            </table>
        </div>

        <div class="verb-section" id="manger">
            <a class="drill-up" href="#verb-overview">↑ Back to Overview</a>
            <h2>manger (to eat)</h2>
            <button class="master-play" onclick="playAll('manger')">▶️ Play All French Conjugations</button>
            <table>
                <thead>
                    <tr><th>French</th><th>English</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>Je mange</td><td>I eat</td><td><button onclick="playAudio('Je mange')">🔊</button></td></tr>
                    <tr><td>Tu manges</td><td>You eat (singular/informal)</td><td><button onclick="playAudio('Tu manges')">🔊</button></td></tr>
                    <tr><td>Il/Elle mange</td><td>He/She eats</td><td><button onclick="playAudio('Il/Elle mange')">🔊</button></td></tr>
                    <tr><td>Nous mangeons</td><td>We eat</td><td><button onclick="playAudio('Nous mangeons')">🔊</button></td></tr>
                    <tr><td>Vous mangez</td><td>You eat (plural/formal)</td><td><button onclick="playAudio('Vous mangez')">🔊</button></td></tr>
                    <tr><td>Ils/Elles mangent</td><td>They eat (masculine/feminine)</td><td><button onclick="playAudio('Ils/Elles mangent')">🔊</button></td></tr>
                </tbody>
            </table>
            
            <h3 style="margin-top: 2rem; text-align: center; color: #8b4513;">Example Sentences</h3>
            <button class="master-play" onclick="playAllSentences('manger')">▶️ Play All Example Sentences</button>
            <table style="margin-top: 1rem;">
                <thead>
                    <tr><th>French Sentence</th><th>English Translation</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>Je mange une pomme.</td><td>I eat an apple.</td><td><button onclick="playAudio('Je mange une pomme')">🔊</button></td></tr>
                    <tr><td>Tu manges au restaurant ?</td><td>Are you eating at the restaurant?</td><td><button onclick="playAudio('Tu manges au restaurant')">🔊</button></td></tr>
                    <tr><td>Il mange avec sa famille.</td><td>He eats with his family.</td><td><button onclick="playAudio('Il mange avec sa famille')">🔊</button></td></tr>
                    <tr><td>Nous mangeons ensemble.</td><td>We eat together.</td><td><button onclick="playAudio('Nous mangeons ensemble')">🔊</button></td></tr>
                    <tr><td>Vous mangez des légumes ?</td><td>Do you eat vegetables?</td><td><button onclick="playAudio('Vous mangez des légumes')">🔊</button></td></tr>
                    <tr><td>Elles mangent du poisson.</td><td>They eat fish.</td><td><button onclick="playAudio('Elles mangent du poisson')">🔊</button></td></tr>
                </tbody>
            </table>
        </div>

        <div class="verb-section" id="finir">
            <a class="drill-up" href="#verb-overview">↑ Back to Overview</a>
            <h2>finir (to finish)</h2>
            <button class="master-play" onclick="playAll('finir')">▶️ Play All French Conjugations</button>
            <table>
                <thead>
                    <tr><th>French</th><th>English</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>Je finis</td><td>I finish</td><td><button onclick="playAudio('Je finis')">🔊</button></td></tr>
                    <tr><td>Tu finis</td><td>You finish (singular/informal)</td><td><button onclick="playAudio('Tu finis')">🔊</button></td></tr>
                    <tr><td>Il/Elle finit</td><td>He/She finishes</td><td><button onclick="playAudio('Il/Elle finit')">🔊</button></td></tr>
                    <tr><td>Nous finissons</td><td>We finish</td><td><button onclick="playAudio('Nous finissons')">🔊</button></td></tr>
                    <tr><td>Vous finissez</td><td>You finish (plural/formal)</td><td><button onclick="playAudio('Vous finissez')">🔊</button></td></tr>
                    <tr><td>Ils/Elles finissent</td><td>They finish (masculine/feminine)</td><td><button onclick="playAudio('Ils/Elles finissent')">🔊</button></td></tr>
                </tbody>
            </table>
            
            <h3 style="margin-top: 2rem; text-align: center; color: #8b4513;">Example Sentences</h3>
            <button class="master-play" onclick="playAllSentences('finir')">▶️ Play All Example Sentences</button>
            <table style="margin-top: 1rem;">
                <thead>
                    <tr><th>French Sentence</th><th>English Translation</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>Je finis mes devoirs.</td><td>I finish my homework.</td><td><button onclick="playAudio('Je finis mes devoirs')">🔊</button></td></tr>
                    <tr><td>Tu finis à quelle heure ?</td><td>What time do you finish?</td><td><button onclick="playAudio('Tu finis à quelle heure')">🔊</button></td></tr>
                    <tr><td>Elle finit son travail.</td><td>She finishes her work.</td><td><button onclick="playAudio('Elle finit son travail')">🔊</button></td></tr>
                    <tr><td>Nous finissons le projet.</td><td>We finish the project.</td><td><button onclick="playAudio('Nous finissons le projet')">🔊</button></td></tr>
                    <tr><td>Vous finissez bientôt ?</td><td>Are you finishing soon?</td><td><button onclick="playAudio('Vous finissez bientôt')">🔊</button></td></tr>
                    <tr><td>Ils finissent leur repas.</td><td>They finish their meal.</td><td><button onclick="playAudio('Ils finissent leur repas')">🔊</button></td></tr>
                </tbody>
            </table>
        </div>

        <div class="verb-section" id="attendre">
            <a class="drill-up" href="#verb-overview">↑ Back to Overview</a>
            <h2>attendre (to wait)</h2>
            <button class="master-play" onclick="playAll('attendre')">▶️ Play All French Conjugations</button>
            <table>
                <thead>
                    <tr><th>French</th><th>English</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>J'attends</td><td>I wait</td><td><button onclick="playAudio('J\'attends')">🔊</button></td></tr>
                    <tr><td>Tu attends</td><td>You wait (singular/informal)</td><td><button onclick="playAudio('Tu attends')">🔊</button></td></tr>
                    <tr><td>Il/Elle/On attend</td><td>He/She/One waits</td><td><button onclick="playAudio('Il attend')">🔊</button></td></tr>
                    <tr><td>Nous attendons</td><td>We wait</td><td><button onclick="playAudio('Nous attendons')">🔊</button></td></tr>
                    <tr><td>Vous attendez</td><td>You wait (plural/formal)</td><td><button onclick="playAudio('Vous attendez')">🔊</button></td></tr>
                    <tr><td>Ils/Elles attendent</td><td>They wait</td><td><button onclick="playAudio('Ils attendent')">🔊</button></td></tr>
                </tbody>
            </table>
            
            <h3 style="margin-top: 2rem; text-align: center; color: #8b4513;">Example Sentences</h3>
            <button class="master-play" onclick="playAllSentences('attendre')">▶️ Play All Example Sentences</button>
            <table style="margin-top: 1rem;">
                <thead>
                    <tr><th>French Sentence</th><th>English Translation</th><th>Audio</th></tr>
                </thead>
                <tbody>
                    <tr><td>J'attends le bus.</td><td>I wait for the bus.</td><td><button onclick="playAudio('J\'attends le bus')">🔊</button></td></tr>
                    <tr><td>Tu attends longtemps ?</td><td>Do you wait long?</td><td><button onclick="playAudio('Tu attends longtemps')">🔊</button></td></tr>
                    <tr><td>Elle attend une réponse.</td><td>She waits for an answer.</td><td><button onclick="playAudio('Elle attend une réponse')">🔊</button></td></tr>
                    <tr><td>Nous attendons ensemble.</td><td>We wait together.</td><td><button onclick="playAudio('Nous attendons ensemble')">🔊</button></td></tr>
                    <tr><td>Vous attendez qui ?</td><td>Who are you waiting for?</td><td><button onclick="playAudio('Vous attendez qui')">🔊</button></td></tr>
                    <tr><td>Ils attendent leur tour.</td><td>They wait for their turn.</td><td><button onclick="playAudio('Ils attendent leur tour')">🔊</button></td></tr>
                </tbody>
            </table>
        </div>

        <!-- Add a note that more verbs are available -->
        <p style="text-align:center; margin-top:3rem; color:#666;">
            More verb conjugations are available by selecting from the sidebar navigation.<br>
            <a href="#top">Back to Top</a> | 
            <a href="index.html">Home</a> | 
            <a href="French-Alphabets.html">French Alphabets</a> | 
            <a href="#" onclick="return handleNumbersAccess(event, 'French-Numbers.html')">French Numbers 💎</a>
        </p>
    </div>

    <!-- Firebase SDK (v9 compat - standardized) -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <!-- Stripe.js (Tech-Pay Centralized Payment System) -->
    <script src="https://js.stripe.com/v3/"></script>

    <script>
        // Firebase Configuration (v9 compat syntax for HTML)
        const firebaseConfig = {
          apiKey: "AIzaSyA12z5FR90bSz1x5Q3ay-uJxV8xNOS_xjk",
          authDomain: "french-learning-app-46d95.firebaseapp.com",
          projectId: "french-learning-app-46d95",
          storageBucket: "french-learning-app-46d95.firebasestorage.app",
          messagingSenderId: "270430812441",
          appId: "1:270430812441:web:3fa199a9131794e90c2d88",
          measurementId: "G-GHZV5LJH4P"
        };

        // Initialize Firebase (v9 compat syntax)
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Authentication Functions for Firebase
        function firebaseSignUp(email, password, name, country) {
            return auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    
                    // Update user profile with name
                    return user.updateProfile({
                        displayName: name
                    }).then(() => {
                        // Store additional user data in Firestore with subscription info
                        return db.collection('users').doc(user.uid).set({
                            email: email,
                            name: name,
                            country: country,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                            subscription: {
                                status: 'free',
                                plan: null,
                                startDate: null,
                                endDate: null,
                                active: false,
                                paymentMethod: null
                            },
                            subscriptionHistory: []
                        });
                    }).then(() => {
                        return user;
                    });
                });
        }

        function firebaseSignIn(email, password) {
            return auth.signInWithEmailAndPassword(email, password);
        }

        // Enhanced Authentication Functions  
        async function handleFirebaseSignUp(event) {
            event.preventDefault();
            
            const email = document.getElementById('signUpEmail').value;
            const password = document.getElementById('signUpPassword').value;
            const name = document.getElementById('signUpName').value;
            const country = document.getElementById('signUpCountry').value;
            
            try {
                const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Get subscription status from Firestore
                const subscriptionStatus = await getUserSubscriptionStatus(user.uid);
                
                // Store user in localStorage
                const userData = {
                    uid: user.uid,
                    email: user.email,
                    subscriptionExpiry: null,
                    subscriptionStatus: 'free',
                    signUpDate: new Date().toISOString(),
                    status: subscriptionStatus,
                    plan: subscriptionStatus === 'premium' ? 'monthly' : null,
                    country: country || 'Other',
                    currency: 'USD'
                };
                
                localStorage.setItem('french_app_current_user', JSON.stringify(userData));
                
                // Update UI
                toggleAuthButtons(true, user.email, subscriptionStatus);
                
                // Close modal and show success
                closeModal('signUpModal');
                showSuccess('authMessages', 'Account created successfully!');
                
            } catch (error) {
                console.error('Sign up error:', error);
                showError('signUpError', error.message);
            }
        }

        async function handleFirebaseSignOut() {
            try {
                await firebase.auth().signOut();
                
                // Clear localStorage
                localStorage.removeItem('french_app_current_user');
                
                // Update UI to guest state
                toggleAuthButtons(false);
                
                showSuccess('authMessages', 'Signed out successfully!');
                
            } catch (error) {
                console.error('Sign out error:', error);
                showError('authMessages', 'Error signing out. Please try again.');
            }
        }

        // Dropdown functionality
        function toggleDropdown(event, dropdownId) {
            event.preventDefault();
            event.stopPropagation();
            
            // Close all other dropdowns
            document.querySelectorAll('.dropdown-content').forEach(dropdown => {
                if (dropdown.id !== dropdownId) {
                    dropdown.classList.remove('show');
                    dropdown.parentElement.classList.remove('active');
                }
            });
            
            // Toggle the clicked dropdown
            const dropdown = document.getElementById(dropdownId);
            const dropdownParent = dropdown.parentElement;
            
            if (dropdown.classList.contains('show')) {
                dropdown.classList.remove('show');
                dropdownParent.classList.remove('active');
            } else {
                dropdown.classList.add('show');
                dropdownParent.classList.add('active');
            }
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.matches('.dropdown-toggle') && !event.target.matches('.dropdown-arrow')) {
                document.querySelectorAll('.dropdown-content').forEach(dropdown => {
                    dropdown.classList.remove('show');
                    dropdown.parentElement.classList.remove('active');
                });
            }
        });

                    // Comprehensive conjugation data for all verbs
            // Updated to include Il/Elle and Ils/Elles explicitly
        const conjugations = {
            // Regular -er verbs
            accepter: [
                ["J'accepte", "I accept"],
                ["Tu acceptes", "You accept (singular/informal)"],
                ["Il/Elle accepte", "He/She accepts"],
                ["Nous acceptons", "We accept"],
                ["Vous acceptez", "You accept (plural/formal)"],
                ["Ils/Elles acceptent", "They accept (masculine/feminine)"]
            ],
            aimer: [
                ["J'aime", "I like/love"],
                ["Tu aimes", "You like/love (singular/informal)"],
                ["Il aime", "He/She/One likes/loves"],
                ["Nous aimons", "We like/love"],
                ["Vous aimez", "You like/love (plural/formal)"],
                ["Ils aiment", "They like/love"]
            ],
            annuler: [
                ["J'annule", "I cancel"],
                ["Tu annules", "You cancel (singular/informal)"],
                ["Il annule", "He/She/One cancels"],
                ["Nous annulons", "We cancel"],
                ["Vous annulez", "You cancel (plural/formal)"],
                ["Ils annulent", "They cancel"]
            ],
            apporter: [
                ["J'apporte", "I bring"],
                ["Tu apportes", "You bring (singular/informal)"],
                ["Il apporte", "He/She/One brings"],
                ["Nous apportons", "We bring"],
                ["Vous apportez", "You bring (plural/formal)"],
                ["Ils apportent", "They bring"]
            ],
            attraper: [
                ["J'attrape", "I catch"],
                ["Tu attrapes", "You catch (singular/informal)"],
                ["Il attrape", "He/She/One catches"],
                ["Nous attrapons", "We catch"],
                ["Vous attrapez", "You catch (plural/formal)"],
                ["Ils attrapent", "They catch"]
            ],
            augmenter: [
                ["J'augmente", "I increase"],
                ["Tu augmentes", "You increase (singular/informal)"],
                ["Il augmente", "He/She/One increases"],
                ["Nous augmentons", "We increase"],
                ["Vous augmentez", "You increase (plural/formal)"],
                ["Ils augmentent", "They increase"]
            ],
            bavarder: [
                ["Je bavarde", "I chat"],
                ["Tu bavardes", "You chat (singular/informal)"],
                ["Il bavarde", "He/She/One chats"],
                ["Nous bavardons", "We chat"],
                ["Vous bavardez", "You chat (plural/formal)"],
                ["Ils bavardent", "They chat"]
            ],
            casser: [
                ["Je casse", "I break"],
                ["Tu casses", "You break (singular/informal)"],
                ["Il casse", "He/She/One breaks"],
                ["Nous cassons", "We break"],
                ["Vous cassez", "You break (plural/formal)"],
                ["Ils cassent", "They break"]
            ],
            chercher: [
                ["Je cherche", "I look for"],
                ["Tu cherches", "You look for (singular/informal)"],
                ["Il cherche", "He/She/One looks for"],
                ["Nous cherchons", "We look for"],
                ["Vous cherchez", "You look for (plural/formal)"],
                ["Ils cherchent", "They look for"]
            ],
            commander: [
                ["Je commande", "I order"],
                ["Tu commandes", "You order (singular/informal)"],
                ["Il commande", "He/She/One orders"],
                ["Nous commandons", "We order"],
                ["Vous commandez", "You order (plural/formal)"],
                ["Ils commandent", "They order"]
            ],
            couper: [
                ["Je coupe", "I cut"],
                ["Tu coupes", "You cut (singular/informal)"],
                ["Il coupe", "He/She/One cuts"],
                ["Nous coupons", "We cut"],
                ["Vous coupez", "You cut (plural/formal)"],
                ["Ils coupent", "They cut"]
            ],
            danser: [
                ["Je danse", "I dance"],
                ["Tu danses", "You dance (singular/informal)"],
                ["Il danse", "He/She/One dances"],
                ["Nous dansons", "We dance"],
                ["Vous dansez", "You dance (plural/formal)"],
                ["Ils dansent", "They dance"]
            ],
            dejeuner: [
                ["Je déjeune", "I have lunch"],
                ["Tu déjeunes", "You have lunch (singular/informal)"],
                ["Il déjeune", "He/She/One has lunch"],
                ["Nous déjeunons", "We have lunch"],
                ["Vous déjeunez", "You have lunch (plural/formal)"],
                ["Ils déjeunent", "They have lunch"]
            ],
            demander: [
                ["Je demande", "I ask"],
                ["Tu demandes", "You ask (singular/informal)"],
                ["Il demande", "He/She/One asks"],
                ["Nous demandons", "We ask"],
                ["Vous demandez", "You ask (plural/formal)"],
                ["Ils demandent", "They ask"]
            ],
            dessiner: [
                ["Je dessine", "I draw"],
                ["Tu dessines", "You draw (singular/informal)"],
                ["Il dessine", "He/She/One draws"],
                ["Nous dessinons", "We draw"],
                ["Vous dessinez", "You draw (plural/formal)"],
                ["Ils dessinent", "They draw"]
            ],
            donner: [
                ["Je donne", "I give"],
                ["Tu donnes", "You give (singular/informal)"],
                ["Il donne", "He/She/One gives"],
                ["Nous donnons", "We give"],
                ["Vous donnez", "You give (plural/formal)"],
                ["Ils donnent", "They give"]
            ],
            emprunter: [
                ["J'emprunte", "I borrow"],
                ["Tu empruntes", "You borrow (singular/informal)"],
                ["Il emprunte", "He/She/One borrows"],
                ["Nous empruntons", "We borrow"],
                ["Vous empruntez", "You borrow (plural/formal)"],
                ["Ils empruntent", "They borrow"]
            ],
            etudier: [
                ["J'étudie", "I study"],
                ["Tu étudies", "You study (singular/informal)"],
                ["Il étudie", "He/She/One studies"],
                ["Nous étudions", "We study"],
                ["Vous étudiez", "You study (plural/formal)"],
                ["Ils étudient", "They study"]
            ],
            exprimer: [
                ["J'exprime", "I express"],
                ["Tu exprimes", "You express (singular/informal)"],
                ["Il exprime", "He/She/One expresses"],
                ["Nous exprimons", "We express"],
                ["Vous exprimez", "You express (plural/formal)"],
                ["Ils expriment", "They express"]
            ],
            gagner: [
                ["Je gagne", "I win/earn"],
                ["Tu gagnes", "You win/earn (singular/informal)"],
                ["Il gagne", "He/She/One wins/earns"],
                ["Nous gagnons", "We win/earn"],
                ["Vous gagnez", "You win/earn (plural/formal)"],
                ["Ils gagnent", "They win/earn"]
            ],
            garder: [
                ["Je garde", "I keep"],
                ["Tu gardes", "You keep (singular/informal)"],
                ["Il garde", "He/She/One keeps"],
                ["Nous gardons", "We keep"],
                ["Vous gardez", "You keep (plural/formal)"],
                ["Ils gardent", "They keep"]
            ],
            habiter: [
                ["J'habite", "I live"],
                ["Tu habites", "You live (singular/informal)"],
                ["Il habite", "He/She/One lives"],
                ["Nous habitons", "We live"],
                ["Vous habitez", "You live (plural/formal)"],
                ["Ils habitent", "They live"]
            ],
            laver: [
                ["Je lave", "I wash"],
                ["Tu laves", "You wash (singular/informal)"],
                ["Il lave", "He/She/One washes"],
                ["Nous lavons", "We wash"],
                ["Vous lavez", "You wash (plural/formal)"],
                ["Ils lavent", "They wash"]
            ],
            meriter: [
                ["Je mérite", "I deserve"],
                ["Tu mérites", "You deserve (singular/informal)"],
                ["Il mérite", "He/She/One deserves"],
                ["Nous méritons", "We deserve"],
                ["Vous méritez", "You deserve (plural/formal)"],
                ["Ils méritent", "They deserve"]
            ],
            oublier: [
                ["J'oublie", "I forget"],
                ["Tu oublies", "You forget (singular/informal)"],
                ["Il oublie", "He/She/One forgets"],
                ["Nous oublions", "We forget"],
                ["Vous oubliez", "You forget (plural/formal)"],
                ["Ils oublient", "They forget"]
            ],
            parler: [
                ["Je parle", "I speak"],
                ["Tu parles", "You speak (singular/informal)"],
                ["Il/Elle parle", "He/She speaks"],
                ["Nous parlons", "We speak"],
                ["Vous parlez", "You speak (plural/formal)"],
                ["Ils/Elles parlent", "They speak (masculine/feminine)"]
            ],
            porter: [
                ["Je porte", "I carry"],
                ["Tu portes", "You carry (singular/informal)"],
                ["Il porte", "He/She/One carries"],
                ["Nous portons", "We carry"],
                ["Vous portez", "You carry (plural/formal)"],
                ["Ils portent", "They carry"]
            ],
            preter: [
                ["Je prête", "I lend"],
                ["Tu prêtes", "You lend (singular/informal)"],
                ["Il prête", "He/She/One lends"],
                ["Nous prêtons", "We lend"],
                ["Vous prêtez", "You lend (plural/formal)"],
                ["Ils prêtent", "They lend"]
            ],
            refuser: [
                ["Je refuse", "I refuse"],
                ["Tu refuses", "You refuse (singular/informal)"],
                ["Il refuse", "He/She/One refuses"],
                ["Nous refusons", "We refuse"],
                ["Vous refusez", "You refuse (plural/formal)"],
                ["Ils refusent", "They refuse"]
            ],
            regarder: [
                ["Je regarde", "I watch"],
                ["Tu regardes", "You watch (singular/informal)"],
                ["Il regarde", "He/She/One watches"],
                ["Nous regardons", "We watch"],
                ["Vous regardez", "You watch (plural/formal)"],
                ["Ils regardent", "They watch"]
            ],
            saluer: [
                ["Je salue", "I greet"],
                ["Tu salues", "You greet (singular/informal)"],
                ["Il salue", "He/She/One greets"],
                ["Nous saluons", "We greet"],
                ["Vous saluez", "You greet (plural/formal)"],
                ["Ils saluent", "They greet"]
            ],
            sauter: [
                ["Je saute", "I jump"],
                ["Tu sautes", "You jump (singular/informal)"],
                ["Il saute", "He/She/One jumps"],
                ["Nous sautons", "We jump"],
                ["Vous sautez", "You jump (plural/formal)"],
                ["Ils sautent", "They jump"]
            ],
            tomber: [
                ["Je tombe", "I fall"],
                ["Tu tombes", "You fall (singular/informal)"],
                ["Il tombe", "He/She/One falls"],
                ["Nous tombons", "We fall"],
                ["Vous tombez", "You fall (plural/formal)"],
                ["Ils tombent", "They fall"]
            ],
            travailler: [
                ["Je travaille", "I work"],
                ["Tu travailles", "You work (singular/informal)"],
                ["Il travaille", "He/She/One works"],
                ["Nous travaillons", "We work"],
                ["Vous travaillez", "You work (plural/formal)"],
                ["Ils travaillent", "They work"]
            ],
            visiter: [
                ["Je visite", "I visit"],
                ["Tu visites", "You visit (singular/informal)"],
                ["Il visite", "He/She/One visits"],
                ["Nous visitons", "We visit"],
                ["Vous visitez", "You visit (plural/formal)"],
                ["Ils visitent", "They visit"]
            ],
            
            // -cer verbs
            annoncer: [
                ["J'annonce", "I announce"],
                ["Tu annonces", "You announce (singular/informal)"],
                ["Il annonce", "He/She/One announces"],
                ["Nous annonçons", "We announce"],
                ["Vous annoncez", "You announce (plural/formal)"],
                ["Ils annoncent", "They announce"]
            ],
            avancer: [
                ["J'avance", "I move forward"],
                ["Tu avances", "You move forward (singular/informal)"],
                ["Il avance", "He/She/One moves forward"],
                ["Nous avançons", "We move forward"],
                ["Vous avancez", "You move forward (plural/formal)"],
                ["Ils avancent", "They move forward"]
            ],
            balancer: [
                ["Je balance", "I swing"],
                ["Tu balances", "You swing (singular/informal)"],
                ["Il balance", "He/She/One swings"],
                ["Nous balançons", "We swing"],
                ["Vous balancez", "You swing (plural/formal)"],
                ["Ils balancent", "They swing"]
            ],
            commencer: [
                ["Je commence", "I start"],
                ["Tu commences", "You start (singular/informal)"],
                ["Il commence", "He/She/One starts"],
                ["Nous commençons", "We start"],
                ["Vous commencez", "You start (plural/formal)"],
                ["Ils commencent", "They start"]
            ],
            defoncer: [
                ["Je défonce", "I smash in"],
                ["Tu défonces", "You smash in (singular/informal)"],
                ["Il défonce", "He/She/One smashes in"],
                ["Nous défonçons", "We smash in"],
                ["Vous défoncez", "You smash in (plural/formal)"],
                ["Ils défoncent", "They smash in"]
            ],
            deplacer: [
                ["Je déplace", "I move"],
                ["Tu déplaces", "You move (singular/informal)"],
                ["Il déplace", "He/She/One moves"],
                ["Nous déplaçons", "We move"],
                ["Vous déplacez", "You move (plural/formal)"],
                ["Ils déplacent", "They move"]
            ],
            devancer: [
                ["Je devance", "I get ahead of"],
                ["Tu devances", "You get ahead of (singular/informal)"],
                ["Il devance", "He/She/One gets ahead of"],
                ["Nous devançons", "We get ahead of"],
                ["Vous devancez", "You get ahead of (plural/formal)"],
                ["Ils devancent", "They get ahead of"]
            ],
            effacer: [
                ["J'efface", "I erase"],
                ["Tu effaces", "You erase (singular/informal)"],
                ["Il efface", "He/She/One erases"],
                ["Nous effaçons", "We erase"],
                ["Vous effacez", "You erase (plural/formal)"],
                ["Ils effacent", "They erase"]
            ],
            epicer: [
                ["J'épice", "I spice"],
                ["Tu épices", "You spice (singular/informal)"],
                ["Il épice", "He/She/One spices"],
                ["Nous épiçons", "We spice"],
                ["Vous épicez", "You spice (plural/formal)"],
                ["Ils épicent", "They spice"]
            ],
            faconner: [
                ["Je façonne", "I craft, I manufacture"],
                ["Tu façonnes", "You craft, you manufacture (singular/informal)"],
                ["Il façonne", "He/She/One crafts, manufactures"],
                ["Nous façonnons", "We craft, we manufacture"],
                ["Vous façonnez", "You craft, you manufacture (plural/formal)"],
                ["Ils façonnent", "They craft, they manufacture"]
            ],
            financer: [
                ["Je finance", "I finance"],
                ["Tu finances", "You finance (singular/informal)"],
                ["Il finance", "He/She/One finances"],
                ["Nous finançons", "We finance"],
                ["Vous financez", "You finance (plural/formal)"],
                ["Ils financent", "They finance"]
            ],
            grimacer: [
                ["Je grimace", "I make faces"],
                ["Tu grimaces", "You make faces (singular/informal)"],
                ["Il grimace", "He/She/One makes faces"],
                ["Nous grimaçons", "We make faces"],
                ["Vous grimacez", "You make faces (plural/formal)"],
                ["Ils grimacent", "They make faces"]
            ],
            influencer: [
                ["J'influence", "I influence"],
                ["Tu influences", "You influence (singular/informal)"],
                ["Il influence", "He/She/One influences"],
                ["Nous influençons", "We influence"],
                ["Vous influencez", "You influence (plural/formal)"],
                ["Ils influencent", "They influence"]
            ],
            lacer: [
                ["Je lace", "I lace up, I tie"],
                ["Tu laces", "You lace up, you tie (singular/informal)"],
                ["Il lace", "He/She/One laces up, ties"],
                ["Nous laçons", "We lace up, we tie"],
                ["Vous lacez", "You lace up, you tie (plural/formal)"],
                ["Ils lacent", "They lace up, they tie"]
            ],
            menacer: [
                ["Je menace", "I threaten"],
                ["Tu menaces", "You threaten (singular/informal)"],
                ["Il menace", "He/She/One threatens"],
                ["Nous menaçons", "We threaten"],
                ["Vous menacez", "You threaten (plural/formal)"],
                ["Ils menacent", "They threaten"]
            ],
            percer: [
                ["Je perce", "I pierce"],
                ["Tu perces", "You pierce (singular/informal)"],
                ["Il perce", "He/She/One pierces"],
                ["Nous perçons", "We pierce"],
                ["Vous percez", "You pierce (plural/formal)"],
                ["Ils percent", "They pierce"]
            ],
            placer: [
                ["Je place", "I place"],
                ["Tu places", "You place (singular/informal)"],
                ["Il place", "He/She/One places"],
                ["Nous plaçons", "We place"],
                ["Vous placez", "You place (plural/formal)"],
                ["Ils placent", "They place"]
            ],
            poncer: [
                ["Je ponce", "I sand"],
                ["Tu ponces", "You sand (singular/informal)"],
                ["Il ponce", "He/She/One sands"],
                ["Nous ponçons", "We sand"],
                ["Vous poncez", "You sand (plural/formal)"],
                ["Ils poncent", "They sand"]
            ],
            remplacer: [
                ["Je remplace", "I replace"],
                ["Tu remplaces", "You replace (singular/informal)"],
                ["Il remplace", "He/She/One replaces"],
                ["Nous remplaçons", "We replace"],
                ["Vous remplacez", "You replace (plural/formal)"],
                ["Ils remplacent", "They replace"]
            ],
            renoncer: [
                ["Je renonce", "I give up"],
                ["Tu renonces", "You give up (singular/informal)"],
                ["Il renonce", "He/She/One gives up"],
                ["Nous renonçons", "We give up"],
                ["Vous renoncez", "You give up (plural/formal)"],
                ["Ils renoncent", "They give up"]
            ],
            prononcer: [
                ["Je prononce", "I pronounce"],
                ["Tu prononces", "You pronounce (singular/informal)"],
                ["Il prononce", "He/She/One pronounces"],
                ["Nous prononçons", "We pronounce"],
                ["Vous prononcez", "You pronounce (plural/formal)"],
                ["Ils prononcent", "They pronounce"]
            ],
            
            // -ger verbs
            bouger: [
                ["Je bouge", "I move"],
                ["Tu bouges", "You move (singular/informal)"],
                ["Il bouge", "He/She/One moves"],
                ["Nous bougeons", "We move"],
                ["Vous bougez", "You move (plural/formal)"],
                ["Ils bougent", "They move"]
            ],
            changer: [
                ["Je change", "I change"],
                ["Tu changes", "You change (singular/informal)"],
                ["Il change", "He/She/One changes"],
                ["Nous changeons", "We change"],
                ["Vous changez", "You change (plural/formal)"],
                ["Ils changent", "They change"]
            ],
            corriger: [
                ["Je corrige", "I correct"],
                ["Tu corriges", "You correct (singular/informal)"],
                ["Il corrige", "He/She/One corrects"],
                ["Nous corrigeons", "We correct"],
                ["Vous corrigez", "You correct (plural/formal)"],
                ["Ils corrigent", "They correct"]
            ],
            degager: [
                ["Je dégage", "I release, I free"],
                ["Tu dégages", "You release, you free (singular/informal)"],
                ["Il dégage", "He/She/One releases, frees"],
                ["Nous dégageons", "We release, we free"],
                ["Vous dégagez", "You release, you free (plural/formal)"],
                ["Ils dégagent", "They release, they free"]
            ],
            demenager: [
                ["Je déménage", "I move house"],
                ["Tu déménages", "You move house (singular/informal)"],
                ["Il déménage", "He/She/One moves house"],
                ["Nous déménageons", "We move house"],
                ["Vous déménagez", "You move house (plural/formal)"],
                ["Ils déménagent", "They move house"]
            ],
            encourager: [
                ["J'encourage", "I encourage"],
                ["Tu encourages", "You encourage (singular/informal)"],
                ["Il encourage", "He/She/One encourages"],
                ["Nous encourageons", "We encourage"],
                ["Vous encouragez", "You encourage (plural/formal)"],
                ["Ils encouragent", "They encourage"]
            ],
            exiger: [
                ["J'exige", "I demand"],
                ["Tu exiges", "You demand (singular/informal)"],
                ["Il exige", "He/She/One demands"],
                ["Nous exigeons", "We demand"],
                ["Vous exigez", "You demand (plural/formal)"],
                ["Ils exigent", "They demand"]
            ],
            heberger: [
                ["Je héberge", "I host"],
                ["Tu héberges", "You host (singular/informal)"],
                ["Il héberge", "He/She/One hosts"],
                ["Nous hébergeons", "We host"],
                ["Vous hébergez", "You host (plural/formal)"],
                ["Ils hébergent", "They host"]
            ],
            manger: [
                ["Je mange", "I eat"],
                ["Tu manges", "You eat (singular/informal)"],
                ["Il mange", "He/She/One eats"],
                ["Nous mangeons", "We eat"],
                ["Vous mangez", "You eat (plural/formal)"],
                ["Ils mangent", "They eat"]
            ],
            melanger: [
                ["Je mélange", "I mix"],
                ["Tu mélanges", "You mix (singular/informal)"],
                ["Il mélange", "He/She/One mixes"],
                ["Nous mélangeons", "We mix"],
                ["Vous mélangez", "You mix (plural/formal)"],
                ["Ils mélangent", "They mix"]
            ],
            nager: [
                ["Je nage", "I swim"],
                ["Tu nages", "You swim (singular/informal)"],
                ["Il nage", "He/She/One swims"],
                ["Nous nageons", "We swim"],
                ["Vous nagez", "You swim (plural/formal)"],
                ["Ils nagent", "They swim"]
            ],
            negliger: [
                ["Je néglige", "I neglect"],
                ["Tu négliges", "You neglect (singular/informal)"],
                ["Il néglige", "He/She/One neglects"],
                ["Nous négligeons", "We neglect"],
                ["Vous négligez", "You neglect (plural/formal)"],
                ["Ils négligent", "They neglect"]
            ],
            partager: [
                ["Je partage", "I share"],
                ["Tu partages", "You share (singular/informal)"],
                ["Il partage", "He/She/One shares"],
                ["Nous partageons", "We share"],
                ["Vous partagez", "You share (plural/formal)"],
                ["Ils partagent", "They share"]
            ],
            plonger: [
                ["Je plonge", "I dive"],
                ["Tu plonges", "You dive (singular/informal)"],
                ["Il plonge", "He/She/One dives"],
                ["Nous plongeons", "We dive"],
                ["Vous plongez", "You dive (plural/formal)"],
                ["Ils plongent", "They dive"]
            ],
            proteger: [
                ["Je protège", "I protect"],
                ["Tu protèges", "You protect (singular/informal)"],
                ["Il protège", "He/She/One protects"],
                ["Nous protégeons", "We protect"],
                ["Vous protégez", "You protect (plural/formal)"],
                ["Ils protègent", "They protect"]
            ],
            ranger: [
                ["Je range", "I put away"],
                ["Tu ranges", "You put away (singular/informal)"],
                ["Il range", "He/She/One puts away"],
                ["Nous rangeons", "We put away"],
                ["Vous rangez", "You put away (plural/formal)"],
                ["Ils rangent", "They put away"]
            ],
            venger: [
                ["Je venge", "I avenge"],
                ["Tu venges", "You avenge (singular/informal)"],
                ["Il venge", "He/She/One avenges"],
                ["Nous vengeons", "We avenge"],
                ["Vous vengez", "You avenge (plural/formal)"],
                ["Ils vengent", "They avenge"]
            ],
            
            // -ir verbs (Type 1)
            finir: [
                ["Je finis", "I finish"],
                ["Tu finis", "You finish (singular/informal)"],
                ["Il finit", "He/She/One finishes"],
                ["Nous finissons", "We finish"],
                ["Vous finissez", "You finish (plural/formal)"],
                ["Ils finissent", "They finish"]
            ],
            accomplir: [
                ["J'accomplis", "I accomplish"],
                ["Tu accomplis", "You accomplish (singular/informal)"],
                ["Il accomplit", "He/She/One accomplishes"],
                ["Nous accomplissons", "We accomplish"],
                ["Vous accomplissez", "You accomplish (plural/formal)"],
                ["Ils accomplissent", "They accomplish"]
            ],
            agrandir: [
                ["J'agrandis", "I enlarge"],
                ["Tu agrandis", "You enlarge (singular/informal)"],
                ["Il agrandit", "He/She/One enlarges"],
                ["Nous agrandissons", "We enlarge"],
                ["Vous agrandissez", "You enlarge (plural/formal)"],
                ["Ils agrandissent", "They enlarge"]
            ],
            grandir: [
                ["Je grandis", "I grow up"],
                ["Tu grandis", "You grow up (singular/informal)"],
                ["Il grandit", "He/She/One grows up"],
                ["Nous grandissons", "We grow up"],
                ["Vous grandissez", "You grow up (plural/formal)"],
                ["Ils grandissent", "They grow up"]
            ],
            remplir: [
                ["Je remplis", "I fill"],
                ["Tu remplis", "You fill (singular/informal)"],
                ["Il remplit", "He/She/One fills"],
                ["Nous remplissons", "We fill"],
                ["Vous remplissez", "You fill (plural/formal)"],
                ["Ils remplissent", "They fill"]
            ],
            reussir: [
                ["Je réussis", "I succeed"],
                ["Tu réussis", "You succeed (singular/informal)"],
                ["Il réussit", "He/She/One succeeds"],
                ["Nous réussissons", "We succeed"],
                ["Vous réussissez", "You succeed (plural/formal)"],
                ["Ils réussissent", "They succeed"]
            ],
            
            // -re verbs
            attendre: [
                ["J'attends", "I wait"],
                ["Tu attends", "You wait (singular/informal)"],
                ["Il attend", "He/She/One waits"],
                ["Nous attendons", "We wait"],
                ["Vous attendez", "You wait (plural/formal)"],
                ["Ils attendent", "They wait"]
            ],
            defendre: [
                ["Je défends", "I defend"],
                ["Tu défends", "You defend (singular/informal)"],
                ["Il défend", "He/She/One defends"],
                ["Nous défendons", "We defend"],
                ["Vous défendez", "You defend (plural/formal)"],
                ["Ils défendent", "They defend"]
            ],
            entendre: [
                ["J'entends", "I hear"],
                ["Tu entends", "You hear (singular/informal)"],
                ["Il entend", "He/She/One hears"],
                ["Nous entendons", "We hear"],
                ["Vous entendez", "You hear (plural/formal)"],
                ["Ils entendent", "They hear"]
            ],
            perdre: [
                ["Je perds", "I lose"],
                ["Tu perds", "You lose (singular/informal)"],
                ["Il perd", "He/She/One loses"],
                ["Nous perdons", "We lose"],
                ["Vous perdez", "You lose (plural/formal)"],
                ["Ils perdent", "They lose"]
            ],
            repondre: [
                ["Je réponds", "I answer"],
                ["Tu réponds", "You answer (singular/informal)"],
                ["Il répond", "He/She/One answers"],
                ["Nous répondons", "We answer"],
                ["Vous répondez", "You answer (plural/formal)"],
                ["Ils répondent", "They answer"]
            ]
        };

        // Add missing conjugations using Object.assign
        Object.assign(conjugations, {
            // Additional -cer verbs
            balancer: [
                ["Je balance", "I swing"],
                ["Tu balances", "You swing (singular/informal)"],
                ["Il balance", "He/She/One swings"],
                ["Nous balançons", "We swing"],
                ["Vous balancez", "You swing (plural/formal)"],
                ["Ils balancent", "They swing"]
            ],
            defoncer: [
                ["Je défonce", "I smash in"],
                ["Tu défonces", "You smash in (singular/informal)"],
                ["Il défonce", "He/She/One smashes in"],
                ["Nous défonçons", "We smash in"],
                ["Vous défoncez", "You smash in (plural/formal)"],
                ["Ils défoncent", "They smash in"]
            ],
            deplacer: [
                ["Je déplace", "I move"],
                ["Tu déplaces", "You move (singular/informal)"],
                ["Il déplace", "He/She/One moves"],
                ["Nous déplaçons", "We move"],
                ["Vous déplacez", "You move (plural/formal)"],
                ["Ils déplacent", "They move"]
            ],
            devancer: [
                ["Je devance", "I get ahead of"],
                ["Tu devances", "You get ahead of (singular/informal)"],
                ["Il devance", "He/She/One gets ahead of"],
                ["Nous devançons", "We get ahead of"],
                ["Vous devancez", "You get ahead of (plural/formal)"],
                ["Ils devancent", "They get ahead of"]
            ],
            effacer: [
                ["J'efface", "I erase"],
                ["Tu effaces", "You erase (singular/informal)"],
                ["Il efface", "He/She/One erases"],
                ["Nous effaçons", "We erase"],
                ["Vous effacez", "You erase (plural/formal)"],
                ["Ils effacent", "They erase"]
            ],
            epicer: [
                ["J'épice", "I spice"],
                ["Tu épices", "You spice (singular/informal)"],
                ["Il épice", "He/She/One spices"],
                ["Nous épiçons", "We spice"],
                ["Vous épicez", "You spice (plural/formal)"],
                ["Ils épicent", "They spice"]
            ],
            faconner: [
                ["Je façonne", "I craft, I manufacture"],
                ["Tu façonnes", "You craft, you manufacture (singular/informal)"],
                ["Il façonne", "He/She/One crafts, manufactures"],
                ["Nous façonnons", "We craft, we manufacture"],
                ["Vous façonnez", "You craft, you manufacture (plural/formal)"],
                ["Ils façonnent", "They craft, they manufacture"]
            ],
            financer: [
                ["Je finance", "I finance"],
                ["Tu finances", "You finance (singular/informal)"],
                ["Il finance", "He/She/One finances"],
                ["Nous finançons", "We finance"],
                ["Vous financez", "You finance (plural/formal)"],
                ["Ils financent", "They finance"]
            ],
            grimacer: [
                ["Je grimace", "I make faces"],
                ["Tu grimaces", "You make faces (singular/informal)"],
                ["Il grimace", "He/She/One makes faces"],
                ["Nous grimaçons", "We make faces"],
                ["Vous grimacez", "You make faces (plural/formal)"],
                ["Ils grimacent", "They make faces"]
            ],
            influencer: [
                ["J'influence", "I influence"],
                ["Tu influences", "You influence (singular/informal)"],
                ["Il influence", "He/She/One influences"],
                ["Nous influençons", "We influence"],
                ["Vous influencez", "You influence (plural/formal)"],
                ["Ils influencent", "They influence"]
            ],
            lacer: [
                ["Je lace", "I lace up, I tie"],
                ["Tu laces", "You lace up, you tie (singular/informal)"],
                ["Il lace", "He/She/One laces up, ties"],
                ["Nous laçons", "We lace up, we tie"],
                ["Vous lacez", "You lace up, you tie (plural/formal)"],
                ["Ils lacent", "They lace up, they tie"]
            ],
            menacer: [
                ["Je menace", "I threaten"],
                ["Tu menaces", "You threaten (singular/informal)"],
                ["Il menace", "He/She/One threatens"],
                ["Nous menaçons", "We threaten"],
                ["Vous menacez", "You threaten (plural/formal)"],
                ["Ils menacent", "They threaten"]
            ],
            placer: [
                ["Je place", "I place"],
                ["Tu places", "You place (singular/informal)"],
                ["Il place", "He/She/One places"],
                ["Nous plaçons", "We place"],
                ["Vous placez", "You place (plural/formal)"],
                ["Ils placent", "They place"]
            ],
            poncer: [
                ["Je ponce", "I sand"],
                ["Tu ponces", "You sand (singular/informal)"],
                ["Il ponce", "He/She/One sands"],
                ["Nous ponçons", "We sand"],
                ["Vous poncez", "You sand (plural/formal)"],
                ["Ils poncent", "They sand"]
            ],
            remplacer: [
                ["Je remplace", "I replace"],
                ["Tu remplaces", "You replace (singular/informal)"],
                ["Il remplace", "He/She/One replaces"],
                ["Nous remplaçons", "We replace"],
                ["Vous remplacez", "You replace (plural/formal)"],
                ["Ils remplacent", "They replace"]
            ],
            renoncer: [
                ["Je renonce", "I give up"],
                ["Tu renonces", "You give up (singular/informal)"],
                ["Il renonce", "He/She/One gives up"],
                ["Nous renonçons", "We give up"],
                ["Vous renoncez", "You give up (plural/formal)"],
                ["Ils renoncent", "They give up"]
            ],
            prononcer: [
                ["Je prononce", "I pronounce"],
                ["Tu prononces", "You pronounce (singular/informal)"],
                ["Il prononce", "He/She/One pronounces"],
                ["Nous prononçons", "We pronounce"],
                ["Vous prononcez", "You pronounce (plural/formal)"],
                ["Ils prononcent", "They pronounce"]
            ],
            // Additional -ger verbs
            degager: [
                ["Je dégage", "I release, I free"],
                ["Tu dégages", "You release, you free (singular/informal)"],
                ["Il dégage", "He/She/One releases, frees"],
                ["Nous dégageons", "We release, we free"],
                ["Vous dégagez", "You release, you free (plural/formal)"],
                ["Ils dégagent", "They release, they free"]
            ],
            demenager: [
                ["Je déménage", "I move house"],
                ["Tu déménages", "You move house (singular/informal)"],
                ["Il déménage", "He/She/One moves house"],
                ["Nous déménageons", "We move house"],
                ["Vous déménagez", "You move house (plural/formal)"],
                ["Ils déménagent", "They move house"]
            ],
            exiger: [
                ["J'exige", "I demand"],
                ["Tu exiges", "You demand (singular/informal)"],
                ["Il exige", "He/She/One demands"],
                ["Nous exigeons", "We demand"],
                ["Vous exigez", "You demand (plural/formal)"],
                ["Ils exigent", "They demand"]
            ],
            heberger: [
                ["Je héberge", "I host"],
                ["Tu héberges", "You host (singular/informal)"],
                ["Il héberge", "He/She/One hosts"],
                ["Nous hébergeons", "We host"],
                ["Vous hébergez", "You host (plural/formal)"],
                ["Ils hébergent", "They host"]
            ],
            negliger: [
                ["Je néglige", "I neglect"],
                ["Tu négliges", "You neglect (singular/informal)"],
                ["Il néglige", "He/She/One neglects"],
                ["Nous négligeons", "We neglect"],
                ["Vous négligez", "You neglect (plural/formal)"],
                ["Ils négligent", "They neglect"]
            ],
            plonger: [
                ["Je plonge", "I dive"],
                ["Tu plonges", "You dive (singular/informal)"],
                ["Il plonge", "He/She/One dives"],
                ["Nous plongeons", "We dive"],
                ["Vous plongez", "You dive (plural/formal)"],
                ["Ils plongent", "They dive"]
            ],
            venger: [
                ["Je venge", "I avenge"],
                ["Tu venges", "You avenge (singular/informal)"],
                ["Il venge", "He/She/One avenges"],
                ["Nous vengeons", "We avenge"],
                ["Vous vengez", "You avenge (plural/formal)"],
                ["Ils vengent", "They avenge"]
            ],
            // Accent-changing verbs
            achever: [
                ["J'achève", "I complete"],
                ["Tu achèves", "You complete (singular/informal)"],
                ["Il achève", "He/She/One completes"],
                ["Nous achevons", "We complete"],
                ["Vous achevez", "You complete (plural/formal)"],
                ["Ils achèvent", "They complete"]
            ],
            ceder: [
                ["Je cède", "I yield"],
                ["Tu cèdes", "You yield (singular/informal)"],
                ["Il cède", "He/She/One yields"],
                ["Nous cédons", "We yield"],
                ["Vous cédez", "You yield (plural/formal)"],
                ["Ils cèdent", "They yield"]
            ],
            celebrer: [
                ["Je célèbre", "I celebrate"],
                ["Tu célèbres", "You celebrate (singular/informal)"],
                ["Il célèbre", "He/She/One celebrates"],
                ["Nous célébrons", "We celebrate"],
                ["Vous célébrez", "You celebrate (plural/formal)"],
                ["Ils célèbrent", "They celebrate"]
            ],
            considerer: [
                ["Je considère", "I consider"],
                ["Tu considères", "You consider (singular/informal)"],
                ["Il considère", "He/She/One considers"],
                ["Nous considérons", "We consider"],
                ["Vous considérez", "You consider (plural/formal)"],
                ["Ils considèrent", "They consider"]
            ],
            deleguer: [
                ["Je délègue", "I delegate"],
                ["Tu délègues", "You delegate (singular/informal)"],
                ["Il délègue", "He/She/One delegates"],
                ["Nous déléguons", "We delegate"],
                ["Vous déléguez", "You delegate (plural/formal)"],
                ["Ils délèguent", "They delegate"]
            ],
            emmener: [
                ["J'emmène", "I take along"],
                ["Tu emmènes", "You take along (singular/informal)"],
                ["Il emmène", "He/She/One takes along"],
                ["Nous emmenons", "We take along"],
                ["Vous emmenez", "You take along (plural/formal)"],
                ["Ils emmènent", "They take along"]
            ],
            enlever: [
                ["J'enlève", "I remove"],
                ["Tu enlèves", "You remove (singular/informal)"],
                ["Il enlève", "He/She/One removes"],
                ["Nous enlevons", "We remove"],
                ["Vous enlevez", "You remove (plural/formal)"],
                ["Ils enlèvent", "They remove"]
            ],
            esperer: [
                ["J'espère", "I hope"],
                ["Tu espères", "You hope (singular/informal)"],
                ["Il espère", "He/She/One hopes"],
                ["Nous espérons", "We hope"],
                ["Vous espérez", "You hope (plural/formal)"],
                ["Ils espèrent", "They hope"]
            ],
            exagerer: [
                ["J'exagère", "I exaggerate"],
                ["Tu exagères", "You exaggerate (singular/informal)"],
                ["Il exagère", "He/She/One exaggerates"],
                ["Nous exagérons", "We exaggerate"],
                ["Vous exagérez", "You exaggerate (plural/formal)"],
                ["Ils exagèrent", "They exaggerate"]
            ],
            gerer: [
                ["Je gère", "I manage"],
                ["Tu gères", "You manage (singular/informal)"],
                ["Il gère", "He/She/One manages"],
                ["Nous gérons", "We manage"],
                ["Vous gérez", "You manage (plural/formal)"],
                ["Ils gèrent", "They manage"]
            ],
            lecher: [
                ["Je lèche", "I lick"],
                ["Tu lèches", "You lick (singular/informal)"],
                ["Il lèche", "He/She/One licks"],
                ["Nous léchons", "We lick"],
                ["Vous léchez", "You lick (plural/formal)"],
                ["Ils lèchent", "They lick"]
            ],
            lever: [
                ["Je lève", "I raise"],
                ["Tu lèves", "You raise (singular/informal)"],
                ["Il lève", "He/She/One raises"],
                ["Nous levons", "We raise"],
                ["Vous levez", "You raise (plural/formal)"],
                ["Ils lèvent", "They raise"]
            ],
            mener: [
                ["Je mène", "I lead"],
                ["Tu mènes", "You lead (singular/informal)"],
                ["Il mène", "He/She/One leads"],
                ["Nous menons", "We lead"],
                ["Vous menez", "You lead (plural/formal)"],
                ["Ils mènent", "They lead"]
            ],
            peser: [
                ["Je pèse", "I weigh"],
                ["Tu pèses", "You weigh (singular/informal)"],
                ["Il pèse", "He/She/One weighs"],
                ["Nous pesons", "We weigh"],
                ["Vous pesez", "You weigh (plural/formal)"],
                ["Ils pèsent", "They weigh"]
            ],
            posseder: [
                ["Je possède", "I own"],
                ["Tu possèdes", "You own (singular/informal)"],
                ["Il possède", "He/She/One owns"],
                ["Nous possédons", "We own"],
                ["Vous possédez", "You own (plural/formal)"],
                ["Ils possèdent", "They own"]
            ],
            preferer: [
                ["Je préfère", "I prefer"],
                ["Tu préfères", "You prefer (singular/informal)"],
                ["Il préfère", "He/She/One prefers"],
                ["Nous préférons", "We prefer"],
                ["Vous préférez", "You prefer (plural/formal)"],
                ["Ils préfèrent", "They prefer"]
            ],
            reveler: [
                ["Je révèle", "I reveal"],
                ["Tu révèles", "You reveal (singular/informal)"],
                ["Il révèle", "He/She/One reveals"],
                ["Nous révélons", "We reveal"],
                ["Vous révélez", "You reveal (plural/formal)"],
                ["Ils révèlent", "They reveal"]
            ],
            semer: [
                ["Je sème", "I sow"],
                ["Tu sèmes", "You sow (singular/informal)"],
                ["Il sème", "He/She/One sows"],
                ["Nous semons", "We sow"],
                ["Vous semez", "You sow (plural/formal)"],
                ["Ils sèment", "They sow"]
            ],
            // -eler verbs
            appeler: [
                ["J'appelle", "I call"],
                ["Tu appelles", "You call (singular/informal)"],
                ["Il appelle", "He/She/One calls"],
                ["Nous appelons", "We call"],
                ["Vous appelez", "You call (plural/formal)"],
                ["Ils appellent", "They call"]
            ],
            ensorceler: [
                ["J'ensorcelle", "I bewitch"],
                ["Tu ensorcelles", "You bewitch (singular/informal)"],
                ["Il ensorcelle", "He/She/One bewitches"],
                ["Nous ensorcelons", "We bewitch"],
                ["Vous ensorcelez", "You bewitch (plural/formal)"],
                ["Ils ensorcellent", "They bewitch"]
            ],
            etinceler: [
                ["J'étincelle", "I sparkle"],
                ["Tu étincelles", "You sparkle (singular/informal)"],
                ["Il étincelle", "He/She/One sparkles"],
                ["Nous étincelons", "We sparkle"],
                ["Vous étincelez", "You sparkle (plural/formal)"],
                ["Ils étincellent", "They sparkle"]
            ],
            ficeler: [
                ["Je ficelle", "I tie"],
                ["Tu ficelles", "You tie (singular/informal)"],
                ["Il ficelle", "He/She/One ties"],
                ["Nous ficelons", "We tie"],
                ["Vous ficelez", "You tie (plural/formal)"],
                ["Ils ficellent", "They tie"]
            ],
            niveler: [
                ["Je nivelle", "I level"],
                ["Tu nivelles", "You level (singular/informal)"],
                ["Il nivelle", "He/She/One levels"],
                ["Nous nivelons", "We level"],
                ["Vous nivelez", "You level (plural/formal)"],
                ["Ils nivellent", "They level"]
            ],
            rappeler: [
                ["Je rappelle", "I remind"],
                ["Tu rappelles", "You remind (singular/informal)"],
                ["Il rappelle", "He/She/One reminds"],
                ["Nous rappelons", "We remind"],
                ["Vous rappelez", "You remind (plural/formal)"],
                ["Ils rappellent", "They remind"]
            ],
            renouveler: [
                ["Je renouvelle", "I renew"],
                ["Tu renouvelles", "You renew (singular/informal)"],
                ["Il renouvelle", "He/She/One renews"],
                ["Nous renouvelons", "We renew"],
                ["Vous renouvelez", "You renew (plural/formal)"],
                ["Ils renouvellent", "They renew"]
            ],
            // Additional Type 1 -ir verbs
            adoucir: [
                ["J'adoucis", "I soften"],
                ["Tu adoucis", "You soften (singular/informal)"],
                ["Il adoucit", "He/She/One softens"],
                ["Nous adoucissons", "We soften"],
                ["Vous adoucissez", "You soften (plural/formal)"],
                ["Ils adoucissent", "They soften"]
            ],
            applaudir: [
                ["J'applaudis", "I applaud"],
                ["Tu applaudis", "You applaud (singular/informal)"],
                ["Il applaudit", "He/She/One applauds"],
                ["Nous applaudissons", "We applaud"],
                ["Vous applaudissez", "You applaud (plural/formal)"],
                ["Ils applaudissent", "They applaud"]
            ],
            batir: [
                ["Je bâtis", "I build"],
                ["Tu bâtis", "You build (singular/informal)"],
                ["Il bâtit", "He/She/One builds"],
                ["Nous bâtissons", "We build"],
                ["Vous bâtissez", "You build (plural/formal)"],
                ["Ils bâtissent", "They build"]
            ],
            benir: [
                ["Je bénis", "I bless"],
                ["Tu bénis", "You bless (singular/informal)"],
                ["Il bénit", "He/She/One blesses"],
                ["Nous bénissons", "We bless"],
                ["Vous bénissez", "You bless (plural/formal)"],
                ["Ils bénissent", "They bless"]
            ],
            eclaircir: [
                ["J'éclaircis", "I lighten"],
                ["Tu éclaircis", "You lighten (singular/informal)"],
                ["Il éclaircit", "He/She/One lightens"],
                ["Nous éclaircissons", "We lighten"],
                ["Vous éclaircissez", "You lighten (plural/formal)"],
                ["Ils éclaircissent", "They lighten"]
            ],
            epanouir: [
                ["Je m'épanouis", "I bloom"],
                ["Tu t'épanouis", "You bloom (singular/informal)"],
                ["Il s'épanouit", "He/She/One blooms"],
                ["Nous nous épanouissons", "We bloom"],
                ["Vous vous épanouissez", "You bloom (plural/formal)"],
                ["Ils s'épanouissent", "They bloom"]
            ],
            evanouir: [
                ["Je m'évanouis", "I faint"],
                ["Tu t'évanouis", "You faint (singular/informal)"],
                ["Il s'évanouit", "He/She/One faints"],
                ["Nous nous évanouissons", "We faint"],
                ["Vous vous évanouissez", "You faint (plural/formal)"],
                ["Ils s'évanouissent", "They faint"]
            ],
            grossir: [
                ["Je grossis", "I put on weight"],
                ["Tu grossis", "You put on weight (singular/informal)"],
                ["Il grossit", "He/She/One puts on weight"],
                ["Nous grossissons", "We put on weight"],
                ["Vous grossissez", "You put on weight (plural/formal)"],
                ["Ils grossissent", "They put on weight"]
            ],
            investir: [
                ["J'investis", "I invest"],
                ["Tu investis", "You invest (singular/informal)"],
                ["Il investit", "He/She/One invests"],
                ["Nous investissons", "We invest"],
                ["Vous investissez", "You invest (plural/formal)"],
                ["Ils investissent", "They invest"]
            ],
            maigrir: [
                ["Je maigris", "I lose weight"],
                ["Tu maigris", "You lose weight (singular/informal)"],
                ["Il maigrit", "He/She/One loses weight"],
                ["Nous maigrissons", "We lose weight"],
                ["Vous maigrissez", "You lose weight (plural/formal)"],
                ["Ils maigrissent", "They lose weight"]
            ],
            mincir: [
                ["Je mincis", "I slim down"],
                ["Tu mincis", "You slim down (singular/informal)"],
                ["Il mincit", "He/She/One slims down"],
                ["Nous mincissons", "We slim down"],
                ["Vous mincissez", "You slim down (plural/formal)"],
                ["Ils mincissent", "They slim down"]
            ],
            obeir: [
                ["J'obéis", "I obey"],
                ["Tu obéis", "You obey (singular/informal)"],
                ["Il obéit", "He/She/One obeys"],
                ["Nous obéissons", "We obey"],
                ["Vous obéissez", "You obey (plural/formal)"],
                ["Ils obéissent", "They obey"]
            ],
            palir: [
                ["Je pâlis", "I turn pale"],
                ["Tu pâlis", "You turn pale (singular/informal)"],
                ["Il pâlit", "He/She/One turns pale"],
                ["Nous pâlissons", "We turn pale"],
                ["Vous pâlissez", "You turn pale (plural/formal)"],
                ["Ils pâlissent", "They turn pale"]
            ],
            rafraichir: [
                ["Je rafraîchis", "I refresh"],
                ["Tu rafraîchis", "You refresh (singular/informal)"],
                ["Il rafraîchit", "He/She/One refreshes"],
                ["Nous rafraîchissons", "We refresh"],
                ["Vous rafraîchissez", "You refresh (plural/formal)"],
                ["Ils rafraîchissent", "They refresh"]
            ],
            ralentir: [
                ["Je ralentis", "I slow down"],
                ["Tu ralentis", "You slow down (singular/informal)"],
                ["Il ralentit", "He/She/One slows down"],
                ["Nous ralentissons", "We slow down"],
                ["Vous ralentissez", "You slow down (plural/formal)"],
                ["Ils ralentissent", "They slow down"]
            ],
            reflechir: [
                ["Je réfléchis", "I reflect"],
                ["Tu réfléchis", "You reflect (singular/informal)"],
                ["Il réfléchit", "He/She/One reflects"],
                ["Nous réfléchissons", "We reflect"],
                ["Vous réfléchissez", "You reflect (plural/formal)"],
                ["Ils réfléchissent", "They reflect"]
            ],
            rougir: [
                ["Je rougis", "I blush"],
                ["Tu rougis", "You blush (singular/informal)"],
                ["Il rougit", "He/She/One blushes"],
                ["Nous rougissons", "We blush"],
                ["Vous rougissez", "You blush (plural/formal)"],
                ["Ils rougissent", "They blush"]
            ],
            saisir: [
                ["Je saisis", "I seize"],
                ["Tu saisis", "You seize (singular/informal)"],
                ["Il saisit", "He/She/One seizes"],
                ["Nous saisissons", "We seize"],
                ["Vous saisissez", "You seize (plural/formal)"],
                ["Ils saisissent", "They seize"]
            ],
            vieillir: [
                ["Je vieillis", "I grow old"],
                ["Tu vieillis", "You grow old (singular/informal)"],
                ["Il vieillit", "He/She/One grows old"],
                ["Nous vieillissons", "We grow old"],
                ["Vous vieillissez", "You grow old (plural/formal)"],
                ["Ils vieillissent", "They grow old"]
            ],
            // Type 2 -ir verbs
            bouillir: [
                ["Je bous", "I boil"],
                ["Tu bous", "You boil (singular/informal)"],
                ["Il bout", "He/She/One boils"],
                ["Nous bouillons", "We boil"],
                ["Vous bouillez", "You boil (plural/formal)"],
                ["Ils bouillent", "They boil"]
            ],
            courir: [
                ["Je cours", "I run"],
                ["Tu cours", "You run (singular/informal)"],
                ["Il court", "He/She/One runs"],
                ["Nous courons", "We run"],
                ["Vous courez", "You run (plural/formal)"],
                ["Ils courent", "They run"]
            ],
            couvrir: [
                ["Je couvre", "I cover"],
                ["Tu couvres", "You cover (singular/informal)"],
                ["Il couvre", "He/She/One covers"],
                ["Nous couvrons", "We cover"],
                ["Vous couvrez", "You cover (plural/formal)"],
                ["Ils couvrent", "They cover"]
            ],
            cueillir: [
                ["Je cueille", "I pick"],
                ["Tu cueilles", "You pick (singular/informal)"],
                ["Il cueille", "He/She/One picks"],
                ["Nous cueillons", "We pick"],
                ["Vous cueillez", "You pick (plural/formal)"],
                ["Ils cueillent", "They pick"]
            ],
            dormir: [
                ["Je dors", "I sleep"],
                ["Tu dors", "You sleep (singular/informal)"],
                ["Il dort", "He/She/One sleeps"],
                ["Nous dormons", "We sleep"],
                ["Vous dormez", "You sleep (plural/formal)"],
                ["Ils dorment", "They sleep"]
            ],
            fuir: [
                ["Je fuis", "I flee"],
                ["Tu fuis", "You flee (singular/informal)"],
                ["Il fuit", "He/She/One flees"],
                ["Nous fuyons", "We flee"],
                ["Vous fuyez", "You flee (plural/formal)"],
                ["Ils fuient", "They flee"]
            ],
            mentir: [
                ["Je mens", "I lie"],
                ["Tu mens", "You lie (singular/informal)"],
                ["Il ment", "He/She/One lies"],
                ["Nous mentons", "We lie"],
                ["Vous mentez", "You lie (plural/formal)"],
                ["Ils mentent", "They lie"]
            ],
            mourir: [
                ["Je meurs", "I die"],
                ["Tu meurs", "You die (singular/informal)"],
                ["Il meurt", "He/She/One dies"],
                ["Nous mourons", "We die"],
                ["Vous mourez", "You die (plural/formal)"],
                ["Ils meurent", "They die"]
            ],
            obtenir: [
                ["J'obtiens", "I get"],
                ["Tu obtiens", "You get (singular/informal)"],
                ["Il obtient", "He/She/One gets"],
                ["Nous obtenons", "We get"],
                ["Vous obtenez", "You get (plural/formal)"],
                ["Ils obtiennent", "They get"]
            ],
            offrir: [
                ["J'offre", "I offer"],
                ["Tu offres", "You offer (singular/informal)"],
                ["Il offre", "He/She/One offers"],
                ["Nous offrons", "We offer"],
                ["Vous offrez", "You offer (plural/formal)"],
                ["Ils offrent", "They offer"]
            ],
            ouvrir: [
                ["J'ouvre", "I open"],
                ["Tu ouvres", "You open (singular/informal)"],
                ["Il ouvre", "He/She/One opens"],
                ["Nous ouvrons", "We open"],
                ["Vous ouvrez", "You open (plural/formal)"],
                ["Ils ouvrent", "They open"]
            ],
            partir: [
                ["Je pars", "I leave"],
                ["Tu pars", "You leave (singular/informal)"],
                ["Il part", "He/She/One leaves"],
                ["Nous partons", "We leave"],
                ["Vous partez", "You leave (plural/formal)"],
                ["Ils partent", "They leave"]
            ],
            sentir: [
                ["Je sens", "I feel/smell"],
                ["Tu sens", "You feel/smell (singular/informal)"],
                ["Il sent", "He/She/One feels/smells"],
                ["Nous sentons", "We feel/smell"],
                ["Vous sentez", "You feel/smell (plural/formal)"],
                ["Ils sentent", "They feel/smell"]
            ],
            servir: [
                ["Je sers", "I serve"],
                ["Tu sers", "You serve (singular/informal)"],
                ["Il sert", "He/She/One serves"],
                ["Nous servons", "We serve"],
                ["Vous servez", "You serve (plural/formal)"],
                ["Ils servent", "They serve"]
            ],
            souffrir: [
                ["Je souffre", "I suffer"],
                ["Tu souffres", "You suffer (singular/informal)"],
                ["Il souffre", "He/She/One suffers"],
                ["Nous souffrons", "We suffer"],
                ["Vous souffrez", "You suffer (plural/formal)"],
                ["Ils souffrent", "They suffer"]
            ],
            // Additional -re verbs
            descendre: [
                ["Je descends", "I go down"],
                ["Tu descends", "You go down (singular/informal)"],
                ["Il descend", "He/She/One goes down"],
                ["Nous descendons", "We go down"],
                ["Vous descendez", "You go down (plural/formal)"],
                ["Ils descendent", "They go down"]
            ],
            detendre: [
                ["Je détends", "I relax"],
                ["Tu détends", "You relax (singular/informal)"],
                ["Il détend", "He/She/One relaxes"],
                ["Nous détendons", "We relax"],
                ["Vous détendez", "You relax (plural/formal)"],
                ["Ils détendent", "They relax"]
            ],
            etendre: [
                ["J'étends", "I extend"],
                ["Tu étends", "You extend (singular/informal)"],
                ["Il étend", "He/She/One extends"],
                ["Nous étendons", "We extend"],
                ["Vous étendez", "You extend (plural/formal)"],
                ["Ils étendent", "They extend"]
            ],
            mordre: [
                ["Je mords", "I bite"],
                ["Tu mords", "You bite (singular/informal)"],
                ["Il mord", "He/She/One bites"],
                ["Nous mordons", "We bite"],
                ["Vous mordez", "You bite (plural/formal)"],
                ["Ils mordent", "They bite"]
            ],
            pretendre: [
                ["Je prétends", "I claim"],
                ["Tu prétends", "You claim (singular/informal)"],
                ["Il prétend", "He/She/One claims"],
                ["Nous prétendons", "We claim"],
                ["Vous prétendez", "You claim (plural/formal)"],
                ["Ils prétendent", "They claim"]
            ],
            rendre: [
                ["Je rends", "I return"],
                ["Tu rends", "You return (singular/informal)"],
                ["Il rend", "He/She/One returns"],
                ["Nous rendons", "We return"],
                ["Vous rendez", "You return (plural/formal)"],
                ["Ils rendent", "They return"]
            ],
            repandre: [
                ["Je répands", "I spread"],
                ["Tu répands", "You spread (singular/informal)"],
                ["Il répand", "He/She/One spreads"],
                ["Nous répandons", "We spread"],
                ["Vous répandez", "You spread (plural/formal)"],
                ["Ils répandent", "They spread"]
            ],
            tendre: [
                ["Je tends", "I stretch"],
                ["Tu tends", "You stretch (singular/informal)"],
                ["Il tend", "He/She/One stretches"],
                ["Nous tendons", "We stretch"],
                ["Vous tendez", "You stretch (plural/formal)"],
                ["Ils tendent", "They stretch"]
            ],
            tordre: [
                ["Je tords", "I twist"],
                ["Tu tords", "You twist (singular/informal)"],
                ["Il tord", "He/She/One twists"],
                ["Nous tordons", "We twist"],
                ["Vous tordez", "You twist (plural/formal)"],
                ["Ils tordent", "They twist"]
            ],
            // Irregular -re verbs
            apprendre: [
                ["J'apprends", "I learn"],
                ["Tu apprends", "You learn (singular/informal)"],
                ["Il apprend", "He/She/One learns"],
                ["Nous apprenons", "We learn"],
                ["Vous apprenez", "You learn (plural/formal)"],
                ["Ils apprennent", "They learn"]
            ],
            comprendre: [
                ["Je comprends", "I understand"],
                ["Tu comprends", "You understand (singular/informal)"],
                ["Il comprend", "He/She/One understands"],
                ["Nous comprenons", "We understand"],
                ["Vous comprenez", "You understand (plural/formal)"],
                ["Ils comprennent", "They understand"]
            ],
            entreprendre: [
                ["J'entreprends", "I undertake"],
                ["Tu entreprends", "You undertake (singular/informal)"],
                ["Il entreprend", "He/She/One undertakes"],
                ["Nous entreprenons", "We undertake"],
                ["Vous entreprenez", "You undertake (plural/formal)"],
                ["Ils entreprennent", "They undertake"]
            ],
            surprendre: [
                ["Je surprends", "I surprise"],
                ["Tu surprends", "You surprise (singular/informal)"],
                ["Il surprend", "He/She/One surprises"],
                ["Nous surprenons", "We surprise"],
                ["Vous surprenez", "You surprise (plural/formal)"],
                ["Ils surprennent", "They surprise"]
            ]
        });

        // Example sentences for all verbs
        const exampleSentences = {
            accepter: [
                ["J'accepte votre invitation.", "I accept your invitation."],
                ["Tu acceptes ce cadeau ?", "Do you accept this gift?"],
                ["Il accepte le travail.", "He accepts the job."],
                ["Nous acceptons vos conditions.", "We accept your conditions."],
                ["Vous acceptez les cartes de crédit ?", "Do you accept credit cards?"],
                ["Ils acceptent notre proposition.", "They accept our proposal."]
            ],
            aimer: [
                ["J'aime le chocolat.", "I like chocolate."],
                ["Tu aimes cette musique ?", "Do you like this music?"],
                ["Elle aime lire des livres.", "She likes to read books."],
                ["Nous aimons voyager.", "We like to travel."],
                ["Vous aimez le café français ?", "Do you like French coffee?"],
                ["Ils aiment jouer au football.", "They like to play soccer."]
            ],
            parler: [
                ["Je parle français.", "I speak French."],
                ["Tu parles très bien.", "You speak very well."],
                ["Il parle avec son ami.", "He speaks with his friend."],
                ["Nous parlons de nos projets.", "We talk about our projects."],
                ["Vous parlez quelle langue ?", "What language do you speak?"],
                ["Elles parlent au téléphone.", "They are talking on the phone."]
            ],
            manger: [
                ["Je mange une pomme.", "I eat an apple."],
                ["Tu manges au restaurant ?", "Are you eating at the restaurant?"],
                ["Il mange avec sa famille.", "He eats with his family."],
                ["Nous mangeons ensemble.", "We eat together."],
                ["Vous mangez des légumes ?", "Do you eat vegetables?"],
                ["Elles mangent du poisson.", "They eat fish."]
            ],
            finir: [
                ["Je finis mes devoirs.", "I finish my homework."],
                ["Tu finis à quelle heure ?", "What time do you finish?"],
                ["Elle finit son travail.", "She finishes her work."],
                ["Nous finissons le projet.", "We finish the project."],
                ["Vous finissez bientôt ?", "Are you finishing soon?"],
                ["Ils finissent leur repas.", "They finish their meal."]
            ],
            attendre: [
                ["J'attends le bus.", "I wait for the bus."],
                ["Tu attends longtemps ?", "Do you wait long?"],
                ["Elle attend une réponse.", "She waits for an answer."],
                ["Nous attendons ensemble.", "We wait together."],
                ["Vous attendez qui ?", "Who are you waiting for?"],
                ["Ils attendent leur tour.", "They wait for their turn."]
            ],
            annuler: [
                ["J'annule mon rendez-vous.", "I cancel my appointment."],
                ["Tu annules ta réservation ?", "Are you canceling your reservation?"],
                ["Il annule le voyage.", "He cancels the trip."],
                ["Nous annulons la réunion.", "We cancel the meeting."],
                ["Vous annulez votre commande ?", "Are you canceling your order?"],
                ["Ils annulent leurs plans.", "They cancel their plans."]
            ],
            apporter: [
                ["J'apporte des fleurs.", "I bring flowers."],
                ["Tu apportes ton livre ?", "Are you bringing your book?"],
                ["Elle apporte le dessert.", "She brings the dessert."],
                ["Nous apportons nos sacs.", "We bring our bags."],
                ["Vous apportez quelque chose ?", "Are you bringing something?"],
                ["Ils apportent de la nourriture.", "They bring food."]
            ],
            attraper: [
                ["J'attrape le ballon.", "I catch the ball."],
                ["Tu attrapes un rhume ?", "Are you catching a cold?"],
                ["Il attrape le bus.", "He catches the bus."],
                ["Nous attrapons des poissons.", "We catch fish."],
                ["Vous attrapez des papillons ?", "Do you catch butterflies?"],
                ["Elles attrapent leurs affaires.", "They grab their things."]
            ],
            augmenter: [
                ["J'augmente le volume.", "I increase the volume."],
                ["Tu augmentes tes efforts ?", "Are you increasing your efforts?"],
                ["Il augmente ses prix.", "He increases his prices."],
                ["Nous augmentons notre production.", "We increase our production."],
                ["Vous augmentez les salaires ?", "Are you increasing the salaries?"],
                ["Ils augmentent la température.", "They increase the temperature."]
            ],
            bavarder: [
                ["Je bavarde avec mes amis.", "I chat with my friends."],
                ["Tu bavardes trop en classe.", "You chat too much in class."],
                ["Elle bavarde au téléphone.", "She chats on the phone."],
                ["Nous bavardons pendant la pause.", "We chat during the break."],
                ["Vous bavardez souvent ?", "Do you chat often?"],
                ["Ils bavardent dans le jardin.", "They chat in the garden."]
            ],
            casser: [
                ["Je casse un verre.", "I break a glass."],
                ["Tu casses toujours tes jouets ?", "Do you always break your toys?"],
                ["Il casse la porte.", "He breaks the door."],
                ["Nous cassons la tradition.", "We break the tradition."],
                ["Vous cassez les règles ?", "Do you break the rules?"],
                ["Elles cassent leurs promesses.", "They break their promises."]
            ],
            chercher: [
                ["Je cherche mes clés.", "I look for my keys."],
                ["Tu cherches du travail ?", "Are you looking for work?"],
                ["Elle cherche son chat.", "She looks for her cat."],
                ["Nous cherchons une solution.", "We look for a solution."],
                ["Vous cherchez quelque chose ?", "Are you looking for something?"],
                ["Ils cherchent leur chemin.", "They look for their way."]
            ],
            commander: [
                ["Je commande un café.", "I order a coffee."],
                ["Tu commandes une pizza ?", "Are you ordering a pizza?"],
                ["Il commande son équipe.", "He commands his team."],
                ["Nous commandons nos repas.", "We order our meals."],
                ["Vous commandez en ligne ?", "Do you order online?"],
                ["Elles commandent des livres.", "They order books."]
            ],
            couper: [
                ["Je coupe le pain.", "I cut the bread."],
                ["Tu coupes tes cheveux ?", "Are you cutting your hair?"],
                ["Il coupe le gâteau.", "He cuts the cake."],
                ["Nous coupons les légumes.", "We cut the vegetables."],
                ["Vous coupez la viande ?", "Do you cut the meat?"],
                ["Elles coupent les fleurs.", "They cut the flowers."]
            ],
            danser: [
                ["Je danse le tango.", "I dance the tango."],
                ["Tu danses bien ?", "Do you dance well?"],
                ["Elle danse avec joie.", "She dances with joy."],
                ["Nous dansons ensemble.", "We dance together."],
                ["Vous dansez souvent ?", "Do you dance often?"],
                ["Ils dansent toute la nuit.", "They dance all night."]
            ],
            dejeuner: [
                ["Je déjeune à midi.", "I have lunch at noon."],
                ["Tu déjeunes où ?", "Where do you have lunch?"],
                ["Il déjeune au bureau.", "He has lunch at the office."],
                ["Nous déjeunons ensemble.", "We have lunch together."],
                ["Vous déjeunez maintenant ?", "Are you having lunch now?"],
                ["Elles déjeunent au restaurant.", "They have lunch at the restaurant."]
            ],
            demander: [
                ["Je demande de l'aide.", "I ask for help."],
                ["Tu demandes trop ?", "Do you ask too much?"],
                ["Elle demande son chemin.", "She asks for directions."],
                ["Nous demandons une réduction.", "We ask for a discount."],
                ["Vous demandez l'addition ?", "Are you asking for the bill?"],
                ["Ils demandent des informations.", "They ask for information."]
            ],
            dessiner: [
                ["Je dessine un chat.", "I draw a cat."],
                ["Tu dessines bien ?", "Do you draw well?"],
                ["Elle dessine des fleurs.", "She draws flowers."],
                ["Nous dessinons ensemble.", "We draw together."],
                ["Vous dessinez souvent ?", "Do you draw often?"],
                ["Ils dessinent des portraits.", "They draw portraits."]
            ],
            donner: [
                ["Je donne un cadeau.", "I give a gift."],
                ["Tu donnes de l'argent ?", "Do you give money?"],
                ["Il donne son avis.", "He gives his opinion."],
                ["Nous donnons notre temps.", "We give our time."],
                ["Vous donnez des cours ?", "Do you give lessons?"],
                ["Elles donnent leurs livres.", "They give their books."]
            ],
            emprunter: [
                ["J'emprunte ton livre.", "I borrow your book."],
                ["Tu empruntes de l'argent ?", "Do you borrow money?"],
                ["Elle emprunte ma voiture.", "She borrows my car."],
                ["Nous empruntons cette route.", "We take this route."],
                ["Vous empruntez souvent ?", "Do you borrow often?"],
                ["Ils empruntent des livres.", "They borrow books."]
            ],
            etudier: [
                ["J'étudie le français.", "I study French."],
                ["Tu étudies beaucoup ?", "Do you study a lot?"],
                ["Elle étudie la médecine.", "She studies medicine."],
                ["Nous étudions ensemble.", "We study together."],
                ["Vous étudiez où ?", "Where do you study?"],
                ["Ils étudient l'histoire.", "They study history."]
            ],
            exprimer: [
                ["J'exprime mes sentiments.", "I express my feelings."],
                ["Tu exprimes bien tes idées ?", "Do you express your ideas well?"],
                ["Il exprime sa colère.", "He expresses his anger."],
                ["Nous exprimons notre gratitude.", "We express our gratitude."],
                ["Vous exprimez vos opinions ?", "Do you express your opinions?"],
                ["Elles expriment leur joie.", "They express their joy."]
            ],
            gagner: [
                ["Je gagne la course.", "I win the race."],
                ["Tu gagnes bien ta vie ?", "Do you earn a good living?"],
                ["Elle gagne le prix.", "She wins the prize."],
                ["Nous gagnons ensemble.", "We win together."],
                ["Vous gagnez souvent ?", "Do you win often?"],
                ["Ils gagnent beaucoup d'argent.", "They earn a lot of money."]
            ],
            garder: [
                ["Je garde ton secret.", "I keep your secret."],
                ["Tu gardes tes affaires ?", "Do you keep your things?"],
                ["Elle garde les enfants.", "She babysits the children."],
                ["Nous gardons nos traditions.", "We keep our traditions."],
                ["Vous gardez le silence ?", "Do you keep quiet?"],
                ["Ils gardent leurs distances.", "They keep their distance."]
            ],
            habiter: [
                ["J'habite en France.", "I live in France."],
                ["Tu habites où ?", "Where do you live?"],
                ["Elle habite près d'ici.", "She lives near here."],
                ["Nous habitons ensemble.", "We live together."],
                ["Vous habitez Paris ?", "Do you live in Paris?"],
                ["Ils habitent une grande maison.", "They live in a big house."]
            ],
            laver: [
                ["Je lave mes mains.", "I wash my hands."],
                ["Tu laves ta voiture ?", "Do you wash your car?"],
                ["Elle lave ses cheveux.", "She washes her hair."],
                ["Nous lavons les assiettes.", "We wash the dishes."],
                ["Vous lavez souvent ?", "Do you wash often?"],
                ["Ils lavent leurs vêtements.", "They wash their clothes."]
            ],
            meriter: [
                ["Je mérite cette récompense.", "I deserve this reward."],
                ["Tu mérites mieux ?", "Do you deserve better?"],
                ["Elle mérite nos félicitations.", "She deserves our congratulations."],
                ["Nous méritons du repos.", "We deserve some rest."],
                ["Vous méritez notre respect.", "You deserve our respect."],
                ["Ils méritent une chance.", "They deserve a chance."]
            ],
            oublier: [
                ["J'oublie ton nom.", "I forget your name."],
                ["Tu oublies souvent ?", "Do you forget often?"],
                ["Elle oublie ses clés.", "She forgets her keys."],
                ["Nous oublions le passé.", "We forget the past."],
                ["Vous oubliez votre rendez-vous ?", "Do you forget your appointment?"],
                ["Ils oublieront bientôt.", "They will forget soon."]
            ],
            porter: [
                ["Je porte une robe rouge.", "I wear a red dress."],
                ["Tu portes tes lunettes ?", "Are you wearing your glasses?"],
                ["Il porte sa valise.", "He carries his suitcase."],
                ["Nous portons nos bagages.", "We carry our luggage."],
                ["Vous portez souvent du noir ?", "Do you often wear black?"],
                ["Elles portent des bijoux.", "They wear jewelry."]
            ],
            preter: [
                ["Je prête mon livre.", "I lend my book."],
                ["Tu prêtes de l'argent ?", "Do you lend money?"],
                ["Elle prête attention.", "She pays attention."],
                ["Nous prêtons notre voiture.", "We lend our car."],
                ["Vous prêtez vos outils ?", "Do you lend your tools?"],
                ["Ils prêtent leurs jouets.", "They lend their toys."]
            ],
            refuser: [
                ["Je refuse cette offre.", "I refuse this offer."],
                ["Tu refuses de venir ?", "Do you refuse to come?"],
                ["Elle refuse catégoriquement.", "She categorically refuses."],
                ["Nous refusons cette proposition.", "We refuse this proposal."],
                ["Vous refusez notre aide ?", "Do you refuse our help?"],
                ["Ils refusent de payer.", "They refuse to pay."]
            ],
            regarder: [
                ["Je regarde la télévision.", "I watch television."],
                ["Tu regardes un film ?", "Are you watching a movie?"],
                ["Elle regarde par la fenêtre.", "She looks out the window."],
                ["Nous regardons ensemble.", "We watch together."],
                ["Vous regardez souvent ?", "Do you watch often?"],
                ["Ils regardent les étoiles.", "They look at the stars."]
            ],
            saluer: [
                ["Je salue mes voisins.", "I greet my neighbors."],
                ["Tu salues poliment ?", "Do you greet politely?"],
                ["Elle salue avec un sourire.", "She greets with a smile."],
                ["Nous saluons nos invités.", "We greet our guests."],
                ["Vous saluez en français ?", "Do you greet in French?"],
                ["Ils saluent respectueusement.", "They greet respectfully."]
            ],
            sauter: [
                ["Je saute de joie.", "I jump for joy."],
                ["Tu sautes bien ?", "Do you jump well?"],
                ["Elle saute à la corde.", "She jumps rope."],
                ["Nous sautons ensemble.", "We jump together."],
                ["Vous sautez haut ?", "Do you jump high?"],
                ["Ils sautent dans la piscine.", "They jump in the pool."]
            ],
            tomber: [
                ["Je tombe souvent.", "I fall often."],
                ["Tu tombes de fatigue ?", "Are you falling from fatigue?"],
                ["Elle tombe amoureuse.", "She falls in love."],
                ["Nous tombons d'accord.", "We agree."],
                ["Vous tombez malade ?", "Are you falling sick?"],
                ["Ils tombent dans le piège.", "They fall into the trap."]
            ],
            travailler: [
                ["Je travaille dur.", "I work hard."],
                ["Tu travailles où ?", "Where do you work?"],
                ["Elle travaille à la maison.", "She works from home."],
                ["Nous travaillons ensemble.", "We work together."],
                ["Vous travaillez demain ?", "Do you work tomorrow?"],
                ["Ils travaillent tard.", "They work late."]
            ],
            visiter: [
                ["Je visite Paris.", "I visit Paris."],
                ["Tu visites souvent ?", "Do you visit often?"],
                ["Elle visite ses grands-parents.", "She visits her grandparents."],
                ["Nous visitons le musée.", "We visit the museum."],
                ["Vous visitez la France ?", "Are you visiting France?"],
                ["Ils visitent leurs amis.", "They visit their friends."]
            ],
            // -cer verbs examples
            annoncer: [
                ["J'annonce une bonne nouvelle.", "I announce good news."],
                ["Tu annonces ton mariage ?", "Are you announcing your marriage?"],
                ["Il annonce les résultats.", "He announces the results."],
                ["Nous annonçons notre décision.", "We announce our decision."],
                ["Vous annoncez votre départ ?", "Are you announcing your departure?"],
                ["Elles annoncent la fête.", "They announce the party."]
            ],
            avancer: [
                ["J'avance lentement.", "I move forward slowly."],
                ["Tu avances ta montre ?", "Are you advancing your watch?"],
                ["Elle avance dans ses études.", "She advances in her studies."],
                ["Nous avançons ensemble.", "We move forward together."],
                ["Vous avancez rapidement ?", "Do you advance quickly?"],
                ["Ils avancent leur voyage.", "They move up their trip."]
            ],
            commencer: [
                ["Je commence mon travail.", "I start my work."],
                ["Tu commences à comprendre ?", "Are you starting to understand?"],
                ["Elle commence ses études.", "She starts her studies."],
                ["Nous commençons la leçon.", "We start the lesson."],
                ["Vous commencez quand ?", "When do you start?"],
                ["Ils commencent demain.", "They start tomorrow."]
            ],
            // -ger verbs examples  
            bouger: [
                ["Je bouge beaucoup.", "I move a lot."],
                ["Tu bouges souvent ?", "Do you move often?"],
                ["Elle bouge ses bras.", "She moves her arms."],
                ["Nous bougeons ensemble.", "We move together."],
                ["Vous bougez de maison ?", "Are you moving house?"],
                ["Ils bougent rapidement.", "They move quickly."]
            ],
            changer: [
                ["Je change d'avis.", "I change my mind."],
                ["Tu changes souvent ?", "Do you change often?"],
                ["Elle change de vêtements.", "She changes clothes."],
                ["Nous changeons de route.", "We change routes."],
                ["Vous changez de travail ?", "Are you changing jobs?"],
                ["Ils changent leurs habitudes.", "They change their habits."]
            ],
            corriger: [
                ["Je corrige mes erreurs.", "I correct my mistakes."],
                ["Tu corriges tes devoirs ?", "Do you correct your homework?"],
                ["Elle corrige les copies.", "She corrects the papers."],
                ["Nous corrigeons ensemble.", "We correct together."],
                ["Vous corrigez souvent ?", "Do you correct often?"],
                ["Ils corrigent leur tir.", "They correct their aim."]
            ],
            encourager: [
                ["J'encourage mes amis.", "I encourage my friends."],
                ["Tu encourages ton équipe ?", "Do you encourage your team?"],
                ["Elle encourage ses enfants.", "She encourages her children."],
                ["Nous encourageons les efforts.", "We encourage the efforts."],
                ["Vous encouragez souvent ?", "Do you encourage often?"],
                ["Ils encouragent la créativité.", "They encourage creativity."]
            ],
            melanger: [
                ["Je mélange les couleurs.", "I mix the colors."],
                ["Tu mélanges tout ?", "Do you mix everything?"],
                ["Elle mélange les ingrédients.", "She mixes the ingredients."],
                ["Nous mélangeons nos idées.", "We mix our ideas."],
                ["Vous mélangez souvent ?", "Do you mix often?"],
                ["Ils mélangent les cartes.", "They shuffle the cards."]
            ],
            nager: [
                ["Je nage dans la piscine.", "I swim in the pool."],
                ["Tu nages bien ?", "Do you swim well?"],
                ["Elle nage rapidement.", "She swims quickly."],
                ["Nous nageons ensemble.", "We swim together."],
                ["Vous nagez souvent ?", "Do you swim often?"],
                ["Ils nagent dans la mer.", "They swim in the sea."]
            ],
            partager: [
                ["Je partage mon repas.", "I share my meal."],
                ["Tu partages ton opinion ?", "Do you share your opinion?"],
                ["Elle partage ses secrets.", "She shares her secrets."],
                ["Nous partageons nos expériences.", "We share our experiences."],
                ["Vous partagez souvent ?", "Do you share often?"],
                ["Ils partagent leurs jouets.", "They share their toys."]
            ],
            proteger: [
                ["Je protège ma famille.", "I protect my family."],
                ["Tu protèges tes affaires ?", "Do you protect your things?"],
                ["Elle protège l'environnement.", "She protects the environment."],
                ["Nous protégeons nos droits.", "We protect our rights."],
                ["Vous protégez souvent ?", "Do you protect often?"],
                ["Ils protègent leurs secrets.", "They protect their secrets."]
            ],
            ranger: [
                ["Je range ma chambre.", "I put away my room."],
                ["Tu ranges tes affaires ?", "Do you put away your things?"],
                ["Elle range ses livres.", "She puts away her books."],
                ["Nous rangeons ensemble.", "We put away together."],
                ["Vous rangez souvent ?", "Do you put away often?"],
                ["Ils rangent leurs jouets.", "They put away their toys."]
            ],
            // Type 1 -ir verbs examples
            accomplir: [
                ["J'accomplis ma mission.", "I accomplish my mission."],
                ["Tu accomplis beaucoup ?", "Do you accomplish a lot?"],
                ["Elle accomplit ses rêves.", "She accomplishes her dreams."],
                ["Nous accomplissons notre travail.", "We accomplish our work."],
                ["Vous accomplissez vos objectifs ?", "Do you accomplish your goals?"],
                ["Ils accomplissent des miracles.", "They accomplish miracles."]
            ],
            grandir: [
                ["Je grandis vite.", "I grow up fast."],
                ["Tu grandis beaucoup ?", "Are you growing a lot?"],
                ["Elle grandit en sagesse.", "She grows in wisdom."],
                ["Nous grandissons ensemble.", "We grow up together."],
                ["Vous grandissez encore ?", "Are you still growing?"],
                ["Ils grandissent rapidement.", "They grow rapidly."]
            ],
            remplir: [
                ["Je remplis le verre.", "I fill the glass."],
                ["Tu remplis le formulaire ?", "Do you fill the form?"],
                ["Elle remplit sa promesse.", "She fulfills her promise."],
                ["Nous remplissons nos devoirs.", "We fulfill our duties."],
                ["Vous remplissez souvent ?", "Do you fill often?"],
                ["Ils remplissent leurs objectifs.", "They fulfill their objectives."]
            ],
            reussir: [
                ["Je réussis mes examens.", "I succeed in my exams."],
                ["Tu réussis toujours ?", "Do you always succeed?"],
                ["Elle réussit dans la vie.", "She succeeds in life."],
                ["Nous réussissons ensemble.", "We succeed together."],
                ["Vous réussissez comment ?", "How do you succeed?"],
                ["Ils réussissent brillamment.", "They succeed brilliantly."]
            ],
            // -re verbs examples
            defendre: [
                ["Je défends mes idées.", "I defend my ideas."],
                ["Tu défends toujours tes amis ?", "Do you always defend your friends?"],
                ["Elle défend sa position.", "She defends her position."],
                ["Nous défendons nos droits.", "We defend our rights."],
                ["Vous défendez cette cause ?", "Do you defend this cause?"],
                ["Ils défendent leur territoire.", "They defend their territory."]
            ],
            entendre: [
                ["J'entends de la musique.", "I hear music."],
                ["Tu entends ce bruit ?", "Do you hear this noise?"],
                ["Elle entend bien.", "She hears well."],
                ["Nous entendons des voix.", "We hear voices."],
                ["Vous entendez souvent ?", "Do you hear often?"],
                ["Ils entendent tout.", "They hear everything."]
            ],
            perdre: [
                ["Je perds mes clés.", "I lose my keys."],
                ["Tu perds souvent ?", "Do you lose often?"],
                ["Elle perd patience.", "She loses patience."],
                ["Nous perdons notre temps.", "We waste our time."],
                ["Vous perdez espoir ?", "Do you lose hope?"],
                ["Ils perdent la partie.", "They lose the game."]
            ],
                         repondre: [
                ["Je réponds au téléphone.", "I answer the phone."],
                ["Tu réponds vite ?", "Do you answer quickly?"],
                ["Elle répond présente.", "She answers present."],
                ["Nous répondons ensemble.", "We answer together."],
                ["Vous répondez à tout ?", "Do you answer everything?"],
                ["Ils répondent poliment.", "They answer politely."]
            ]
        };

        // Add missing example sentences using Object.assign
        Object.assign(exampleSentences, {
            // Additional -cer verbs examples
            balancer: [
                ["Je balance mes bras.", "I swing my arms."],
                ["Tu balances ta jambe ?", "Are you swinging your leg?"],
                ["Elle balance sur sa chaise.", "She rocks on her chair."],
                ["Nous balançons nos sacs.", "We swing our bags."],
                ["Vous balancez vos opinions ?", "Do you waver in your opinions?"],
                ["Ils balancent leurs têtes.", "They swing their heads."]
            ],
            defoncer: [
                ["Je défonce la porte.", "I smash in the door."],
                ["Tu défonces le mur ?", "Are you smashing in the wall?"],
                ["Il défonce tout.", "He smashes everything in."],
                ["Nous défonçons l'obstacle.", "We smash in the obstacle."],
                ["Vous défoncez cette barrière ?", "Are you smashing in this barrier?"],
                ["Elles défoncent la cloison.", "They smash in the partition."]
            ],
            deplacer: [
                ["Je déplace la table.", "I move the table."],
                ["Tu déplaces tes affaires ?", "Are you moving your things?"],
                ["Elle déplace son rendez-vous.", "She moves her appointment."],
                ["Nous déplaçons les meubles.", "We move the furniture."],
                ["Vous déplacez souvent ?", "Do you move often?"],
                ["Ils déplacent leur voiture.", "They move their car."]
            ],
            devancer: [
                ["Je devance mes concurrents.", "I get ahead of my competitors."],
                ["Tu devances tes amis ?", "Do you get ahead of your friends?"],
                ["Elle devance ses prévisions.", "She gets ahead of her predictions."],
                ["Nous devançons le programme.", "We get ahead of the program."],
                ["Vous devancez l'horaire ?", "Are you getting ahead of schedule?"],
                ["Ils devancent leurs rivaux.", "They get ahead of their rivals."]
            ],
            effacer: [
                ["J'efface le tableau.", "I erase the board."],
                ["Tu effaces tes erreurs ?", "Do you erase your mistakes?"],
                ["Elle efface ses souvenirs.", "She erases her memories."],
                ["Nous effaçons le passé.", "We erase the past."],
                ["Vous effacez ce texte ?", "Are you erasing this text?"],
                ["Ils effacent leurs traces.", "They erase their traces."]
            ],
            epicer: [
                ["J'épice ma cuisine.", "I spice my cooking."],
                ["Tu épices ton plat ?", "Do you spice your dish?"],
                ["Elle épice avec modération.", "She spices moderately."],
                ["Nous épiçons nos recettes.", "We spice our recipes."],
                ["Vous épicez souvent ?", "Do you spice often?"],
                ["Ils épicent leurs histoires.", "They spice up their stories."]
            ],
            façonner: [
                ["Je façonne l'argile.", "I craft the clay."],
                ["Tu façonnes ton avenir ?", "Do you craft your future?"],
                ["Elle façonne sa personnalité.", "She shapes her personality."],
                ["Nous façonnons notre destin.", "We shape our destiny."],
                ["Vous façonnez des objets ?", "Do you craft objects?"],
                ["Ils façonnent leur carrière.", "They craft their career."]
            ],
            financer: [
                ["Je finance mes études.", "I finance my studies."],
                ["Tu finances ton projet ?", "Do you finance your project?"],
                ["Elle finance sa maison.", "She finances her house."],
                ["Nous finançons l'association.", "We finance the association."],
                ["Vous financez cette entreprise ?", "Do you finance this company?"],
                ["Ils financent le voyage.", "They finance the trip."]
            ],
            grimacer: [
                ["Je grimace de douleur.", "I make faces from pain."],
                ["Tu grimaces souvent ?", "Do you make faces often?"],
                ["Elle grimace en goûtant.", "She makes faces while tasting."],
                ["Nous grimaçons ensemble.", "We make faces together."],
                ["Vous grimacez de dégoût ?", "Do you grimace with disgust?"],
                ["Ils grimacent devant la caméra.", "They make faces in front of the camera."]
            ],
            influencer: [
                ["J'influence mes amis.", "I influence my friends."],
                ["Tu influences les décisions ?", "Do you influence decisions?"],
                ["Elle influence l'opinion publique.", "She influences public opinion."],
                ["Nous influençons le marché.", "We influence the market."],
                ["Vous influencez beaucoup ?", "Do you influence a lot?"],
                ["Ils influencent la mode.", "They influence fashion."]
            ],
            lacer: [
                ["Je lace mes chaussures.", "I lace up my shoes."],
                ["Tu laces tes bottes ?", "Do you lace up your boots?"],
                ["Elle lace son corset.", "She laces up her corset."],
                ["Nous laçons nos souliers.", "We lace up our shoes."],
                ["Vous lacez vos baskets ?", "Do you lace up your sneakers?"],
                ["Ils lacent leurs patins.", "They lace up their skates."]
            ],
            menacer: [
                ["Je menace de partir.", "I threaten to leave."],
                ["Tu menaces tes ennemis ?", "Do you threaten your enemies?"],
                ["Elle menace de démissionner.", "She threatens to resign."],
                ["Nous menaçons de grève.", "We threaten to strike."],
                ["Vous menacez vraiment ?", "Are you really threatening?"],
                ["Ils menacent l'équilibre.", "They threaten the balance."]
            ],
            percer: [
                ["Je perce un trou.", "I pierce a hole."],
                ["Tu perces tes oreilles ?", "Do you pierce your ears?"],
                ["Elle perce le mystère.", "She pierces the mystery."],
                ["Nous perçons le mur.", "We pierce the wall."],
                ["Vous percez le secret ?", "Do you pierce the secret?"],
                ["Ils percent la défense.", "They pierce the defense."]
            ],
            placer: [
                ["Je place mes affaires.", "I place my things."],
                ["Tu places ton argent ?", "Do you place your money?"],
                ["Elle place sa confiance.", "She places her trust."],
                ["Nous plaçons nos espoirs.", "We place our hopes."],
                ["Vous placez vos invités ?", "Do you place your guests?"],
                ["Ils placent leurs économies.", "They place their savings."]
            ],
            poncer: [
                ["Je ponce le bois.", "I sand the wood."],
                ["Tu ponces la table ?", "Do you sand the table?"],
                ["Elle ponce avec soin.", "She sands carefully."],
                ["Nous ponçons ensemble.", "We sand together."],
                ["Vous poncez souvent ?", "Do you sand often?"],
                ["Ils poncent leurs meubles.", "They sand their furniture."]
            ],
            remplacer: [
                ["Je remplace mon collègue.", "I replace my colleague."],
                ["Tu remplaces qui ?", "Who do you replace?"],
                ["Elle remplace le professeur.", "She replaces the teacher."],
                ["Nous remplaçons l'équipe.", "We replace the team."],
                ["Vous remplacez souvent ?", "Do you replace often?"],
                ["Ils remplacent les pneus.", "They replace the tires."]
            ],
            renoncer: [
                ["Je renonce à mes rêves.", "I give up my dreams."],
                ["Tu renonces facilement ?", "Do you give up easily?"],
                ["Elle renonce à son voyage.", "She gives up her trip."],
                ["Nous renonçons à notre projet.", "We give up our project."],
                ["Vous renoncez vraiment ?", "Are you really giving up?"],
                ["Ils renoncent à leurs droits.", "They give up their rights."]
            ],
            prononcer: [
                ["Je prononce bien.", "I pronounce well."],
                ["Tu prononces correctement ?", "Do you pronounce correctly?"],
                ["Elle prononce son discours.", "She delivers her speech."],
                ["Nous prononçons les mots.", "We pronounce the words."],
                ["Vous prononcez clairement ?", "Do you pronounce clearly?"],
                ["Ils prononcent leur verdict.", "They deliver their verdict."]
            ],
            // Additional -ger verbs examples
            degager: [
                ["Je dégage la voie.", "I clear the way."],
                ["Tu dégages quoi ?", "What do you release?"],
                ["Elle dégage une odeur.", "She gives off a smell."],
                ["Nous dégageons l'entrée.", "We clear the entrance."],
                ["Vous dégagez du temps ?", "Do you free up time?"],
                ["Ils dégagent de la fumée.", "They give off smoke."]
            ],
            demenager: [
                ["Je déménage demain.", "I move house tomorrow."],
                ["Tu déménages souvent ?", "Do you move house often?"],
                ["Elle déménage à Paris.", "She moves to Paris."],
                ["Nous déménageons ensemble.", "We move house together."],
                ["Vous déménagez quand ?", "When are you moving house?"],
                ["Ils déménagent leurs affaires.", "They move their belongings."]
            ],
            exiger: [
                ["J'exige une explication.", "I demand an explanation."],
                ["Tu exiges trop ?", "Do you demand too much?"],
                ["Elle exige le respect.", "She demands respect."],
                ["Nous exigeons des réponses.", "We demand answers."],
                ["Vous exigez la qualité ?", "Do you demand quality?"],
                ["Ils exigent leurs droits.", "They demand their rights."]
            ],
            heberger: [
                ["J'héberge mes amis.", "I host my friends."],
                ["Tu héberges souvent ?", "Do you host often?"],
                ["Elle héberge sa famille.", "She hosts her family."],
                ["Nous hébergeons des invités.", "We host guests."],
                ["Vous hébergez des étudiants ?", "Do you host students?"],
                ["Ils hébergent le site web.", "They host the website."]
            ],
            negliger: [
                ["Je néglige mes devoirs.", "I neglect my duties."],
                ["Tu négliges ta santé ?", "Do you neglect your health?"],
                ["Elle néglige ses amis.", "She neglects her friends."],
                ["Nous négligeons parfois.", "We sometimes neglect."],
                ["Vous négligez vos responsabilités ?", "Do you neglect your responsibilities?"],
                ["Ils négligent l'entretien.", "They neglect the maintenance."]
            ],
            plonger: [
                ["Je plonge dans l'eau.", "I dive into the water."],
                ["Tu plonges profond ?", "Do you dive deep?"],
                ["Elle plonge avec grâce.", "She dives gracefully."],
                ["Nous plongeons ensemble.", "We dive together."],
                ["Vous plongez souvent ?", "Do you dive often?"],
                ["Ils plongent du rocher.", "They dive from the rock."]
            ],
            venger: [
                ["Je venge mon honneur.", "I avenge my honor."],
                ["Tu venges tes amis ?", "Do you avenge your friends?"],
                ["Elle venge sa famille.", "She avenges her family."],
                ["Nous vengeons les injustices.", "We avenge injustices."],
                ["Vous vengez souvent ?", "Do you avenge often?"],
                ["Ils vengent leurs ancêtres.", "They avenge their ancestors."]
            ],
            // Accent-changing verbs examples
            achever: [
                ["J'achève mon travail.", "I complete my work."],
                ["Tu achèves tes études ?", "Are you completing your studies?"],
                ["Elle achève son roman.", "She completes her novel."],
                ["Nous achevons le projet.", "We complete the project."],
                ["Vous achevez la construction ?", "Are you completing the construction?"],
                ["Ils achèvent leur mission.", "They complete their mission."]
            ],
            ceder: [
                ["Je cède ma place.", "I yield my place."],
                ["Tu cèdes facilement ?", "Do you yield easily?"],
                ["Il cède sous la pression.", "He yields under pressure."],
                ["Nous cédons nos droits.", "We yield our rights."],
                ["Vous cédez votre terrain ?", "Are you yielding your land?"],
                ["Elles cèdent leurs parts.", "They yield their shares."]
            ],
            celebrer: [
                ["Je célèbre mon anniversaire.", "I celebrate my birthday."],
                ["Tu célèbres Noël ?", "Do you celebrate Christmas?"],
                ["Elle célèbre sa réussite.", "She celebrates her success."],
                ["Nous célébrons ensemble.", "We celebrate together."],
                ["Vous célébrez comment ?", "How do you celebrate?"],
                ["Ils célèbrent la victoire.", "They celebrate the victory."]
            ],
            considerer: [
                ["Je considère cette option.", "I consider this option."],
                ["Tu considères partir ?", "Are you considering leaving?"],
                ["Elle considère sa réponse.", "She considers her answer."],
                ["Nous considérons les risques.", "We consider the risks."],
                ["Vous considérez ma proposition ?", "Do you consider my proposal?"],
                ["Ils considèrent tous les aspects.", "They consider all aspects."]
            ],
            deleguer: [
                ["Je délègue cette tâche.", "I delegate this task."],
                ["Tu délègues souvent ?", "Do you delegate often?"],
                ["Elle délègue ses responsabilités.", "She delegates her responsibilities."],
                ["Nous déléguons notre pouvoir.", "We delegate our power."],
                ["Vous déléguez à qui ?", "To whom do you delegate?"],
                ["Ils délèguent leurs représentants.", "They delegate their representatives."]
            ],
            emmener: [
                ["J'emmène mes enfants.", "I take my children along."],
                ["Tu emmènes ton chien ?", "Are you taking your dog along?"],
                ["Elle emmène sa sœur.", "She takes her sister along."],
                ["Nous emmenons nos amis.", "We take our friends along."],
                ["Vous emmenez qui ?", "Who are you taking along?"],
                ["Ils emmènent toute la famille.", "They take the whole family along."]
            ],
            enlever: [
                ["J'enlève mes chaussures.", "I remove my shoes."],
                ["Tu enlèves ton manteau ?", "Are you removing your coat?"],
                ["Elle enlève la poussière.", "She removes the dust."],
                ["Nous enlevons les obstacles.", "We remove the obstacles."],
                ["Vous enlevez les taches ?", "Are you removing the stains?"],
                ["Ils enlèvent leurs masques.", "They remove their masks."]
            ],
            esperer: [
                ["J'espère réussir.", "I hope to succeed."],
                ["Tu espères quoi ?", "What do you hope for?"],
                ["Elle espère une promotion.", "She hopes for a promotion."],
                ["Nous espérons du beau temps.", "We hope for good weather."],
                ["Vous espérez venir ?", "Do you hope to come?"],
                ["Ils espèrent gagner.", "They hope to win."]
            ],
            exagerer: [
                ["J'exagère un peu.", "I exaggerate a little."],
                ["Tu exagères toujours ?", "Do you always exaggerate?"],
                ["Elle exagère ses problèmes.", "She exaggerates her problems."],
                ["Nous exagérons parfois.", "We sometimes exaggerate."],
                ["Vous exagérez vraiment ?", "Are you really exaggerating?"],
                ["Ils exagèrent leurs succès.", "They exaggerate their successes."]
            ],
            gerer: [
                ["Je gère mon temps.", "I manage my time."],
                ["Tu gères bien ?", "Do you manage well?"],
                ["Elle gère l'entreprise.", "She manages the company."],
                ["Nous gérons ensemble.", "We manage together."],
                ["Vous gérez comment ?", "How do you manage?"],
                ["Ils gèrent leurs finances.", "They manage their finances."]
            ],
            lecher: [
                ["Je lèche la cuillère.", "I lick the spoon."],
                ["Tu lèches ta glace ?", "Are you licking your ice cream?"],
                ["Il lèche ses doigts.", "He licks his fingers."],
                ["Nous léchons nos lèvres.", "We lick our lips."],
                ["Vous léchez quoi ?", "What are you licking?"],
                ["Ils lèchent leurs blessures.", "They lick their wounds."]
            ],
            lever: [
                ["Je lève la main.", "I raise my hand."],
                ["Tu lèves tôt ?", "Do you get up early?"],
                ["Elle lève les yeux.", "She raises her eyes."],
                ["Nous levons nos verres.", "We raise our glasses."],
                ["Vous levez la séance ?", "Are you adjourning the session?"],
                ["Ils lèvent le camp.", "They break camp."]
            ],
            mener: [
                ["Je mène l'équipe.", "I lead the team."],
                ["Tu mènes bien ?", "Do you lead well?"],
                ["Elle mène sa vie.", "She leads her life."],
                ["Nous menons le projet.", "We lead the project."],
                ["Vous menez la danse ?", "Are you leading the dance?"],
                ["Ils mènent l'enquête.", "They lead the investigation."]
            ],
            peser: [
                ["Je pèse les légumes.", "I weigh the vegetables."],
                ["Tu pèses combien ?", "How much do you weigh?"],
                ["Elle pèse ses mots.", "She weighs her words."],
                ["Nous pesons nos options.", "We weigh our options."],
                ["Vous pesez le pour et le contre ?", "Do you weigh the pros and cons?"],
                ["Ils pèsent les risques.", "They weigh the risks."]
            ],
            posseder: [
                ["Je possède une maison.", "I own a house."],
                ["Tu possèdes une voiture ?", "Do you own a car?"],
                ["Elle possède beaucoup de livres.", "She owns many books."],
                ["Nous possédons cette terre.", "We own this land."],
                ["Vous possédez quoi ?", "What do you own?"],
                ["Ils possèdent plusieurs entreprises.", "They own several businesses."]
            ],
            preferer: [
                ["Je préfère le café.", "I prefer coffee."],
                ["Tu préfères lequel ?", "Which do you prefer?"],
                ["Elle préfère rester.", "She prefers to stay."],
                ["Nous préférons partir.", "We prefer to leave."],
                ["Vous préférez quand ?", "When do you prefer?"],
                ["Ils préfèrent attendre.", "They prefer to wait."]
            ],
            reveler: [
                ["Je révèle la vérité.", "I reveal the truth."],
                ["Tu révèles tout ?", "Do you reveal everything?"],
                ["Elle révèle son secret.", "She reveals her secret."],
                ["Nous révélons les résultats.", "We reveal the results."],
                ["Vous révélez votre identité ?", "Do you reveal your identity?"],
                ["Ils révèlent leurs plans.", "They reveal their plans."]
            ],
            semer: [
                ["Je sème des graines.", "I sow seeds."],
                ["Tu sèmes quoi ?", "What do you sow?"],
                ["Elle sème des fleurs.", "She sows flowers."],
                ["Nous semons le blé.", "We sow wheat."],
                ["Vous semez au printemps ?", "Do you sow in spring?"],
                ["Ils sèment la discorde.", "They sow discord."]
            ],
            // -eler verbs examples
            appeler: [
                ["J'appelle ma mère.", "I call my mother."],
                ["Tu appelles souvent ?", "Do you call often?"],
                ["Elle appelle un taxi.", "She calls a taxi."],
                ["Nous appelons nos amis.", "We call our friends."],
                ["Vous appelez le médecin ?", "Are you calling the doctor?"],
                ["Ils appellent à l'aide.", "They call for help."]
            ],
            ensorceler: [
                ["J'ensorcelle mes lecteurs.", "I bewitch my readers."],
                ["Tu ensorcelles tout le monde ?", "Do you bewitch everyone?"],
                ["Elle ensorcelle par sa beauté.", "She bewitches with her beauty."],
                ["Nous ensorcelons l'audience.", "We bewitch the audience."],
                ["Vous ensorcelez par votre charme ?", "Do you bewitch with your charm?"],
                ["Ils ensorcellent la foule.", "They bewitch the crowd."]
            ],
            etinceler: [
                ["J'étincelle sous les projecteurs.", "I sparkle under the spotlights."],
                ["Tu étincelles ce soir ?", "Are you sparkling tonight?"],
                ["Elle étincelle de joie.", "She sparkles with joy."],
                ["Nous étincelons ensemble.", "We sparkle together."],
                ["Vous étincelez de mille feux ?", "Do you sparkle with a thousand lights?"],
                ["Ils étincellent comme des diamants.", "They sparkle like diamants."]
            ],
            ficeler: [
                ["Je ficelle le colis.", "I tie the package."],
                ["Tu ficelles bien ?", "Do you tie well?"],
                ["Elle ficelle ses cheveux.", "She ties her hair."],
                ["Nous ficelons nos bagages.", "We tie our luggage."],
                ["Vous ficelez souvent ?", "Do you tie often?"],
                ["Ils ficellent les bottes.", "They tie the bundles."]
            ],
            niveler: [
                ["Je nivelle le terrain.", "I level the ground."],
                ["Tu nivelles bien ?", "Do you level well?"],
                ["Elle nivelle les inégalités.", "She levels the inequalities."],
                ["Nous nivelons ensemble.", "We level together."],
                ["Vous nivelez le sol ?", "Are you leveling the floor?"],
                ["Ils nivellent la surface.", "They level the surface."]
            ],
            rappeler: [
                ["Je rappelle mon rendez-vous.", "I remind about my appointment."],
                ["Tu rappelles cette histoire ?", "Do you recall this story?"],
                ["Elle rappelle son passé.", "She recalls her past."],
                ["Nous rappelons les règles.", "We remind about the rules."],
                ["Vous rappelez votre promesse ?", "Do you recall your promise?"],
                ["Ils rappellent leurs souvenirs.", "They recall their memories."]
            ],
            renouveler: [
                ["Je renouvelle mon passeport.", "I renew my passport."],
                ["Tu renouvelles souvent ?", "Do you renew often?"],
                ["Elle renouvelle son abonnement.", "She renews her subscription."],
                ["Nous renouvelons notre confiance.", "We renew our trust."],
                ["Vous renouvelez votre contrat ?", "Are you renewing your contract?"],
                ["Ils renouvellent leurs vœux.", "They renew their vows."]
            ],
            // Additional Type 1 -ir verbs examples
            adoucir: [
                ["J'adoucis ma voix.", "I soften my voice."],
                ["Tu adoucis le ton ?", "Do you soften the tone?"],
                ["Elle adoucit ses paroles.", "She softens her words."],
                ["Nous adoucissons l'atmosphère.", "We soften the atmosphere."],
                ["Vous adoucissez la situation ?", "Do you soften the situation?"],
                ["Ils adoucissent leurs manières.", "They soften their manners."]
            ],
            applaudir: [
                ["J'applaudis le spectacle.", "I applaud the show."],
                ["Tu applaudis souvent ?", "Do you applaud often?"],
                ["Elle applaudit les artistes.", "She applauds the artists."],
                ["Nous applaudissons ensemble.", "We applaud together."],
                ["Vous applaudissez fort ?", "Do you applaud loudly?"],
                ["Ils applaudissent à tout rompre.", "They applaud thunderously."]
            ],
            batir: [
                ["Je bâtis une maison.", "I build a house."],
                ["Tu bâtis ton avenir ?", "Are you building your future?"],
                ["Elle bâtit sa carrière.", "She builds her career."],
                ["Nous bâtissons ensemble.", "We build together."],
                ["Vous bâtissez souvent ?", "Do you build often?"],
                ["Ils bâtissent un empire.", "They build an empire."]
            ],
            benir: [
                ["Je bénis cette union.", "I bless this union."],
                ["Tu bénis souvent ?", "Do you bless often?"],
                ["Elle bénit ses enfants.", "She blesses her children."],
                ["Nous bénissons ce repas.", "We bless this meal."],
                ["Vous bénissez cette maison ?", "Do you bless this house?"],
                ["Ils bénissent les mariés.", "They bless the newlyweds."]
            ],
            eclaircir: [
                ["J'éclaircis mes cheveux.", "I lighten my hair."],
                ["Tu éclaircis la situation ?", "Do you clarify the situation?"],
                ["Elle éclaircit le mystère.", "She clears up the mystery."],
                ["Nous éclaircissons le problème.", "We clarify the problem."],
                ["Vous éclaircissez souvent ?", "Do you clarify often?"],
                ["Ils éclaircissent leurs doutes.", "They clear up their doubts."]
            ],
            epanouir: [
                ["Je m'épanouis au soleil.", "I bloom in the sun."],
                ["Tu t'épanouis bien ?", "Are you blooming well?"],
                ["Elle s'épanouit en musique.", "She blossoms in music."],
                ["Nous nous épanouissons ensemble.", "We bloom together."],
                ["Vous vous épanouissez ici ?", "Do you flourish here?"],
                ["Ils s'épanouissent dans l'art.", "They flourish in art."]
            ],
            evanouir: [
                ["Je m'évanouis de chaleur.", "I faint from heat."],
                ["Tu t'évanouis souvent ?", "Do you faint often?"],
                ["Elle s'évanouit d'émotion.", "She faints from emotion."],
                ["Nous nous évanouissons rarement.", "We rarely faint."],
                ["Vous vous évanouissez facilement ?", "Do you faint easily?"],
                ["Ils s'évanouissent dans la foule.", "They disappear in the crowd."]
            ],
            grossir: [
                ["Je grossis un peu.", "I put on a little weight."],
                ["Tu grossis en hiver ?", "Do you gain weight in winter?"],
                ["Elle grossit pendant les fêtes.", "She gains weight during holidays."],
                ["Nous grossissons avec l'âge.", "We gain weight with age."],
                ["Vous grossissez facilement ?", "Do you gain weight easily?"],
                ["Ils grossissent trop vite.", "They gain weight too fast."]
            ],
            investir: [
                ["J'investis mon argent.", "I invest my money."],
                ["Tu investis en bourse ?", "Do you invest in stocks?"],
                ["Elle investit dans l'immobilier.", "She invests in real estate."],
                ["Nous investissons ensemble.", "We invest together."],
                ["Vous investissez souvent ?", "Do you invest often?"],
                ["Ils investissent prudemment.", "They invest wisely."]
            ],
            maigrir: [
                ["Je maigris facilement.", "I lose weight easily."],
                ["Tu maigris en été ?", "Do you lose weight in summer?"],
                ["Elle maigrit pour sa santé.", "She loses weight for her health."],
                ["Nous maigrissons ensemble.", "We lose weight together."],
                ["Vous maigrissez comment ?", "How do you lose weight?"],
                ["Ils maigrissent trop vite.", "They lose weight too fast."]
            ],
            mincir: [
                ["Je mincis doucement.", "I slim down gently."],
                ["Tu mincis avant l'été ?", "Do you slim down before summer?"],
                ["Elle mincit naturellement.", "She slims down naturally."],
                ["Nous mincissons progressivement.", "We slim down progressively."],
                ["Vous mincissez comment ?", "How do you slim down?"],
                ["Ils mincissent efficacement.", "They slim down effectively."]
            ],
            obeir: [
                ["Je obéis à mes parents.", "I obey my parents."],
                ["Tu obéis aux règles ?", "Do you obey the rules?"],
                ["Elle obéit à sa conscience.", "She obeys her conscience."],
                ["Nous obéissons aux lois.", "We obey the laws."],
                ["Vous obéissez toujours ?", "Do you always obey?"],
                ["Ils obéissent respectueusement.", "They obey respectfully."]
            ],
            palir: [
                ["Je pâlis de peur.", "I turn pale with fear."],
                ["Tu pâlis facilement ?", "Do you turn pale easily?"],
                ["Elle pâlit d'émotion.", "She turns pale with emotion."],
                ["Nous pâlissons de froid.", "We turn pale from cold."],
                ["Vous pâlissez souvent ?", "Do you turn pale often?"],
                ["Ils pâlissent de fatigue.", "They turn pale from fatigue."]
            ],
            rafraichir: [
                ["Je rafraîchis la boisson.", "I refresh the drink."],
                ["Tu rafraîchis l'air ?", "Do you refresh the air?"],
                ["Elle rafraîchit sa mémoire.", "She refreshes her memory."],
                ["Nous rafraîchissons la pièce.", "We refresh the room."],
                ["Vous rafraîchissez souvent ?", "Do you refresh often?"],
                ["Ils rafraîchissent l'atmosphère.", "They refresh the atmosphere."]
            ],
            ralentir: [
                ["Je ralentis ma voiture.", "I slow down my car."],
                ["Tu ralentis dans les virages ?", "Do you slow down in turns?"],
                ["Elle ralentit le rythme.", "She slows down the pace."],
                ["Nous ralentissons ensemble.", "We slow down together."],
                ["Vous ralentissez ici ?", "Do you slow down here?"],
                ["Ils ralentissent prudemment.", "They slow down carefully."]
            ],
            reflechir: [
                ["Je réfléchis à ma vie.", "I reflect on my life."],
                ["Tu réfléchis souvent ?", "Do you reflect often?"],
                ["Elle réfléchit avant d'agir.", "She reflects before acting."],
                ["Nous réfléchissons ensemble.", "We reflect together."],
                ["Vous réfléchissez longtemps ?", "Do you reflect for long?"],
                ["Ils réfléchissent profondément.", "They reflect deeply."]
            ],
            rougir: [
                ["Je rougis de honte.", "I blush with shame."],
                ["Tu rougis facilement ?", "Do you blush easily?"],
                ["Elle rougit de plaisir.", "She blushes with pleasure."],
                ["Nous rougissons ensemble.", "We blush together."],
                ["Vous rougissez souvent ?", "Do you blush often?"],
                ["Ils rougissent d'émotion.", "They blush with emotion."]
            ],
            saisir: [
                ["Je saisis l'occasion.", "I seize the opportunity."],
                ["Tu saisis le sens ?", "Do you grasp the meaning?"],
                ["Elle saisit sa chance.", "She seizes her chance."],
                ["Nous saisissons le moment.", "We seize the moment."],
                ["Vous saisissez rapidement ?", "Do you grasp quickly?"],
                ["Ils saisissent leurs affaires.", "They grab their things."]
            ],
            vieillir: [
                ["Je vieillis bien.", "I age well."],
                ["Tu vieillis vite ?", "Do you age fast?"],
                ["Elle vieillit gracieusement.", "She ages gracefully."],
                ["Nous vieillissons ensemble.", "We grow old together."],
                ["Vous vieillissez comment ?", "How do you age?"],
                ["Ils vieillissent doucement.", "They age gently."]
            ],
            // Type 2 -ir verbs examples
            bouillir: [
                ["Je bous d'impatience.", "I boil with impatience."],
                ["Tu bous le thé ?", "Do you boil the tea?"],
                ["Elle bout de colère.", "She boils with anger."],
                ["Nous bouillons de l'eau.", "We boil water."],
                ["Vous bouillez souvent ?", "Do you boil often?"],
                ["Ils bouillent d'excitation.", "They boil with excitement."]
            ],
            courir: [
                ["Je cours tous les matins.", "I run every morning."],
                ["Tu cours vite ?", "Do you run fast?"],
                ["Elle court au parc.", "She runs in the park."],
                ["Nous courons ensemble.", "We run together."],
                ["Vous courez souvent ?", "Do you run often?"],
                ["Ils courent un marathon.", "They run a marathon."]
            ],
            couvrir: [
                ["Je couvre le plat.", "I cover the dish."],
                ["Tu couvres ta tête ?", "Do you cover your head?"],
                ["Elle couvre ses frais.", "She covers her expenses."],
                ["Nous couvrons la distance.", "We cover the distance."],
                ["Vous couvrez l'événement ?", "Do you cover the event?"],
                ["Ils couvrent leurs arrières.", "They cover their backs."]
            ],
            cueillir: [
                ["Je cueille des fleurs.", "I pick flowers."],
                ["Tu cueilles des fruits ?", "Do you pick fruits?"],
                ["Elle cueille des cerises.", "She picks cherries."],
                ["Nous cueillons ensemble.", "We pick together."],
                ["Vous cueillez quand ?", "When do you pick?"],
                ["Ils cueillent des pommes.", "They pick apples."]
            ],
            dormir: [
                ["Je dors huit heures.", "I sleep eight hours."],
                ["Tu dors bien ?", "Do you sleep well?"],
                ["Elle dort profondément.", "She sleeps deeply."],
                ["Nous dormons ensemble.", "We sleep together."],
                ["Vous dormez tard ?", "Do you sleep late?"],
                ["Ils dorment chez nous.", "They sleep at our place."]
            ],
            fuir: [
                ["Je fuis le danger.", "I flee from danger."],
                ["Tu fuis tes responsabilités ?", "Do you flee your responsibilities?"],
                ["Elle fuit la réalité.", "She flees reality."],
                ["Nous fuyons la ville.", "We flee the city."],
                ["Vous fuyez souvent ?", "Do you flee often?"],
                ["Ils fuient leurs problèmes.", "They flee their problems."]
            ],
            mentir: [
                ["Je mens parfois.", "I lie sometimes."],
                ["Tu mens souvent ?", "Do you lie often?"],
                ["Elle ment sur son âge.", "She lies about her age."],
                ["Nous mentons rarement.", "We rarely lie."],
                ["Vous mentez jamais ?", "Do you never lie?"],
                ["Ils mentent tout le temps.", "They lie all the time."]
            ],
            mourir: [
                ["Je meurs de faim.", "I'm dying of hunger."],
                ["Tu meurs d'envie ?", "Are you dying with desire?"],
                ["Elle meurt de rire.", "She's dying of laughter."],
                ["Nous mourons d'impatience.", "We're dying of impatience."],
                ["Vous mourez de soif ?", "Are you dying of thirst?"],
                ["Ils meurent de peur.", "They're dying of fear."]
            ],
            obtenir: [
                ["J'obtiens de bons résultats.", "I get good results."],
                ["Tu obtiens ce que tu veux ?", "Do you get what you want?"],
                ["Elle obtient une promotion.", "She gets a promotion."],
                ["Nous obtenons une réponse.", "We get an answer."],
                ["Vous obtenez satisfaction ?", "Do you get satisfaction?"],
                ["Ils obtiennent leur diplôme.", "They get their diploma."]
            ],
            offrir: [
                ["J'offre un cadeau.", "I offer a gift."],
                ["Tu offres ton aide ?", "Do you offer your help?"],
                ["Elle offre ses services.", "She offers her services."],
                ["Nous offrons nos condoléances.", "We offer our condolences."],
                ["Vous offrez à boire ?", "Do you offer a drink?"],
                ["Ils offrent leur support.", "They offer their support."]
            ],
            ouvrir: [
                ["J'ouvre la porte.", "I open the door."],
                ["Tu ouvres la fenêtre ?", "Do you open the window?"],
                ["Elle ouvre son livre.", "She opens her book."],
                ["Nous ouvrons le magasin.", "We open the store."],
                ["Vous ouvrez quand ?", "When do you open?"],
                ["Ils ouvrent leurs cœurs.", "They open their hearts."]
            ],
            partir: [
                ["Je pars en vacances.", "I leave for vacation."],
                ["Tu pars quand ?", "When do you leave?"],
                ["Elle part tôt.", "She leaves early."],
                ["Nous partons ensemble.", "We leave together."],
                ["Vous partez demain ?", "Are you leaving tomorrow?"],
                ["Ils partent en voyage.", "They leave on a trip."]
            ],
            sentir: [
                ["Je sens une odeur.", "I smell an odor."],
                ["Tu sens le parfum ?", "Do you smell the perfume?"],
                ["Elle sent la fatigue.", "She feels the fatigue."],
                ["Nous sentons la brise.", "We feel the breeze."],
                ["Vous sentez la différence ?", "Do you feel the difference?"],
                ["Ils sentent bon.", "They smell good."]
            ],
            servir: [
                ["Je sers le dîner.", "I serve dinner."],
                ["Tu sers à boire ?", "Are you serving drinks?"],
                ["Elle sert ses clients.", "She serves her clients."],
                ["Nous servons ensemble.", "We serve together."],
                ["Vous servez quoi ?", "What do you serve?"],
                ["Ils servent la patrie.", "They serve the country."]
            ],
            souffrir: [
                ["Je souffre du dos.", "I suffer from back pain."],
                ["Tu souffres beaucoup ?", "Do you suffer a lot?"],
                ["Elle souffre en silence.", "She suffers in silence."],
                ["Nous souffrons ensemble.", "We suffer together."],
                ["Vous souffrez aussi ?", "Do you suffer too?"],
                ["Ils souffrent de la chaleur.", "They suffer from the heat."]
            ],
            // Additional -re verbs examples
            descendre: [
                ["Je descends l'escalier.", "I go down the stairs."],
                ["Tu descends en ville ?", "Are you going down to town?"],
                ["Elle descend du train.", "She gets off the train."],
                ["Nous descendons ensemble.", "We go down together."],
                ["Vous descendez ici ?", "Are you getting off here?"],
                ["Ils descendent la montagne.", "They go down the mountain."]
            ],
            detendre: [
                ["Je détends l'atmosphère.", "I relax the atmosphere."],
                ["Tu détends la corde ?", "Are you loosening the rope?"],
                ["Elle détend ses muscles.", "She relaxes her muscles."],
                ["Nous détendons la situation.", "We ease the situation."],
                ["Vous détendez vos épaules ?", "Are you relaxing your shoulders?"],
                ["Ils détendent leurs visages.", "They relax their faces."]
            ],
            etendre: [
                ["J'étends le linge.", "I hang out the laundry."],
                ["Tu étends tes bras ?", "Are you extending your arms?"],
                ["Elle étend sa couverture.", "She spreads her blanket."],
                ["Nous étendons notre territoire.", "We extend our territory."],
                ["Vous étendez votre influence ?", "Are you extending your influence?"],
                ["Ils étendent leurs connaissances.", "They extend their knowledge."]
            ],
            mordre: [
                ["Je mords dans la pomme.", "I bite into the apple."],
                ["Tu mords tes ongles ?", "Do you bite your nails?"],
                ["Elle mord sa lèvre.", "She bites her lip."],
                ["Nous mordons à l'hameçon.", "We take the bait."],
                ["Vous mordez dans la vie ?", "Do you bite into life?"],
                ["Ils mordent la poussière.", "They bite the dust."]
            ],
            pretendre: [
                ["Je prétends avoir raison.", "I claim to be right."],
                ["Tu prétends savoir ?", "Do you claim to know?"],
                ["Elle prétend être malade.", "She claims to be sick."],
                ["Nous prétendons comprendre.", "We claim to understand."],
                ["Vous prétendez quoi ?", "What do you claim?"],
                ["Ils prétendent être innocents.", "They claim to be innocent."]
            ],
            rendre: [
                ["Je rends le livre.", "I return the book."],
                ["Tu rends visite ?", "Are you paying a visit?"],
                ["Elle rend service.", "She does a favor."],
                ["Nous rendons hommage.", "We pay tribute."],
                ["Vous rendez l'argent ?", "Are you returning the money?"],
                ["Ils rendent justice.", "They render justice."]
            ],
            repandre: [
                ["Je répands la nouvelle.", "I spread the news."],
                ["Tu répands du sel ?", "Are you spilling salt?"],
                ["Elle répand son parfum.", "She spreads her perfume."],
                ["Nous répandons la joie.", "We spread joy."],
                ["Vous répandez des rumeurs ?", "Are you spreading rumors?"],
                ["Ils répandent la terreur.", "They spread terror."]
            ],
            tendre: [
                ["Je tends la main.", "I extend my hand."],
                ["Tu tends l'oreille ?", "Are you listening carefully?"],
                ["Elle tend un piège.", "She sets a trap."],
                ["Nous tendons vers le succès.", "We strive for success."],
                ["Vous tendez la perche ?", "Are you throwing a lifeline?"],
                ["Ils tendent leurs filets.", "They spread their nets."]
            ],
            tordre: [
                ["Je tords le linge.", "I wring the laundry."],
                ["Tu tords ta cheville ?", "Are you twisting your ankle?"],
                ["Elle tord ses cheveux.", "She twists her hair."],
                ["Nous tordons le métal.", "We twist the metal."],
                ["Vous tordez le cou ?", "Are you twisting your neck?"],
                ["Ils tordent de douleur.", "They writhe in pain."]
            ],
            // Irregular -re verbs examples
            apprendre: [
                ["J'apprends le français.", "I learn French."],
                ["Tu apprends vite ?", "Do you learn quickly?"],
                ["Elle apprend à conduire.", "She learns to drive."],
                ["Nous apprenons ensemble.", "We learn together."],
                ["Vous apprenez par cœur ?", "Are you learning by heart?"],
                ["Ils apprennent de leurs erreurs.", "They learn from their mistakes."]
            ],
            comprendre: [
                ["Je comprends la leçon.", "I understand the lesson."],
                ["Tu comprends l'anglais ?", "Do you understand English?"],
                ["Elle comprend la situation.", "She understands the situation."],
                ["Nous comprenons vos raisons.", "We understand your reasons."],
                ["Vous comprenez tout ?", "Do you understand everything?"],
                ["Ils comprennent enfin.", "They finally understand."]
            ],
            entreprendre: [
                ["J'entreprends un voyage.", "I undertake a journey."],
                ["Tu entreprends quoi ?", "What are you undertaking?"],
                ["Elle entreprend des réformes.", "She undertakes reforms."],
                ["Nous entreprenons un projet.", "We undertake a project."],
                ["Vous entreprenez seuls ?", "Are you undertaking alone?"],
                ["Ils entreprennent des travaux.", "They undertake work."]
            ],
            surprendre: [
                ["Je surprends mes amis.", "I surprise my friends."],
                ["Tu surprends souvent ?", "Do you surprise often?"],
                ["Elle surprend par son talent.", "She surprises with her talent."],
                ["Nous surprenons tout le monde.", "We surprise everyone."],
                ["Vous surprenez comment ?", "How do you surprise?"],
                ["Ils surprennent l'ennemi.", "They surprise the enemy."]
            ]
        });

        // Get best French voice (same as main file)
        function getBestFrenchVoice() {
            const voices = window.speechSynthesis.getVoices();
            // Always prefer Microsoft Claude - French (Canada) if available
            let claude = voices.find(v => v.name === 'Microsoft Claude - French (Canada)');
            if (claude) return claude;
            // Fallbacks
            let frCaVoices = voices.filter(v => v.lang === 'fr-CA');
            if (frCaVoices.length > 0) return frCaVoices[0];
            let frVoices = voices.filter(v => v.lang.startsWith('fr'));
            if (frVoices.length > 0) return frVoices[0];
            return null;
        }

        // Highlight word function
        function highlightWord(word) {
            // Remove any existing highlights
            document.querySelectorAll('.word-highlight').forEach(el => {
                el.classList.remove('word-highlight');
            });
            
            // Find and highlight the word in tables
            const tables = document.querySelectorAll('table');
            tables.forEach(table => {
                const cells = table.querySelectorAll('td');
                cells.forEach(cell => {
                    const cellText = cell.textContent.trim();
                    const searchWord = word.trim();
                    
                    // First try exact match
                    if (cellText === searchWord || cellText.toLowerCase() === searchWord.toLowerCase()) {
                        cell.classList.add('word-highlight');
                    }
                    // Then try partial matches for pronoun combinations
                    else if (cellText.includes('/')) {
                        // Handle cases like "Il/Elle parle" when audio is any part of it
                        if (cellText.includes('Il/Elle ')) {
                            const verbPart = cellText.split('Il/Elle ')[1];
                            if (searchWord === 'Il ' + verbPart || 
                                searchWord === 'Elle ' + verbPart || 
                                searchWord === 'Il/Elle ' + verbPart) {
                                cell.classList.add('word-highlight');
                            }
                        }
                        // Handle cases like "Ils/Elles parlent" when audio is any part of it
                        else if (cellText.includes('Ils/Elles ')) {
                            const verbPart = cellText.split('Ils/Elles ')[1];
                            if (searchWord === 'Ils ' + verbPart || 
                                searchWord === 'Elles ' + verbPart || 
                                searchWord === 'Ils/Elles ' + verbPart) {
                                cell.classList.add('word-highlight');
                            }
                        }
                        // Legacy support for old "Il/Elle/On" format
                        else if (cellText.includes('Il/Elle/On ')) {
                            const verbPart = cellText.split('Il/Elle/On ')[1];
                            if (searchWord === 'Il ' + verbPart || 
                                searchWord === 'Elle ' + verbPart || 
                                searchWord === 'On ' + verbPart) {
                                cell.classList.add('word-highlight');
                            }
                        }
                    }
                });
            });
        }

        // Remove highlight function
        function removeHighlight() {
            document.querySelectorAll('.word-highlight').forEach(el => {
                el.classList.remove('word-highlight');
            });
        }

        // Audio function for pronunciation (same as main file)
        function playAudio(text) {
            // Highlight the word
            highlightWord(text);
            
            const utterance = new SpeechSynthesisUtterance(text);
            const voice = getBestFrenchVoice();
            if (voice) utterance.voice = voice;
            utterance.lang = voice ? voice.lang : 'fr-CA';
            utterance.rate = 0.8; // Medium-slow rate for clarity
            
            // Remove highlight when audio ends
            utterance.onend = function() {
                setTimeout(removeHighlight, 200);
            };
            
            window.speechSynthesis.speak(utterance);
        }

        // Play all conjugations for a verb (same as main file)
        function playAll(verb) {
            const phrases = conjugations[verb];
            if (!phrases) return;
            
            let idx = 0;
            function speakNext() {
                if (idx < phrases.length) {
                    // Highlight current conjugation
                    highlightWord(phrases[idx][0]);
                    
                    const utterance = new SpeechSynthesisUtterance(phrases[idx][0]);
                    const voice = getBestFrenchVoice();
                    if (voice) utterance.voice = voice;
                    utterance.lang = voice ? voice.lang : 'fr-CA';
                    utterance.rate = 0.8; // Medium-slow rate for clarity
                    utterance.onend = function() {
                        idx++;
                        if (idx >= phrases.length) {
                            // Remove highlight when all done
                            setTimeout(removeHighlight, 200);
                            return; // Exit here to prevent calling speakNext() again
                        }
                        // Small pause between conjugations for clarity
                        setTimeout(speakNext, 300);
                    };
                    window.speechSynthesis.speak(utterance);
                }
            }
            window.speechSynthesis.cancel();
            removeHighlight(); // Clear any existing highlights
            
            // Ensure voices are loaded before starting
            if (window.speechSynthesis.getVoices().length === 0) {
                window.speechSynthesis.onvoiceschanged = function() {
                    // Clear the event handler to prevent multiple calls
                    window.speechSynthesis.onvoiceschanged = null;
                    speakNext();
                };
            } else {
                speakNext();
            }
        }

        // Play all example sentences for a verb (same as main file)
        function playAllSentences(verb) {
            const sentences = exampleSentences[verb];
            if (!sentences) return;
            
            let idx = 0;
            function speakNext() {
                if (idx < sentences.length) {
                    // Highlight current sentence
                    highlightWord(sentences[idx][0]);
                    
                    const utterance = new SpeechSynthesisUtterance(sentences[idx][0]);
                    const voice = getBestFrenchVoice();
                    if (voice) utterance.voice = voice;
                    utterance.lang = voice ? voice.lang : 'fr-CA';
                    utterance.rate = 0.7; // Slightly slower for sentences
                    utterance.onend = function() {
                        idx++;
                        if (idx >= sentences.length) {
                            // Remove highlight when all done
                            setTimeout(removeHighlight, 200);
                            return; // Exit here to prevent calling speakNext() again
                        }
                        // Longer pause between sentences
                        setTimeout(speakNext, 1200);
                    };
                    window.speechSynthesis.speak(utterance);
                }
            }
            window.speechSynthesis.cancel();
            removeHighlight(); // Clear any existing highlights
            
            // Ensure voices are loaded before starting
            if (window.speechSynthesis.getVoices().length === 0) {
                window.speechSynthesis.onvoiceschanged = function() {
                    // Clear the event handler to prevent multiple calls
                    window.speechSynthesis.onvoiceschanged = null;
                    speakNext();
                };
            } else {
                speakNext();
            }
        }

        // Sidebar functionality
        function toggleSection(sectionId) {
            const content = document.getElementById(sectionId + '-content');
            const icon = document.getElementById(sectionId + '-icon');
            
            if (!content || !icon) {
                console.error('❌ Missing elements for section:', sectionId);
                return;
            }
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                icon.classList.remove('expanded');
                icon.textContent = '▶';
                
                // Also collapse all nested sections when main section is collapsed
                if (sectionId === 'verbs') {
                    const nestedSections = [
                        'regular-er', 'cer-verbs', 'ger-verbs', 'accent-verbs', 
                        'eler-verbs', 'ir-verbs', 'ir2-verbs', 're-verbs', 'irre-verbs'
                    ];
                    nestedSections.forEach(nestedId => {
                        const nestedContent = document.getElementById(nestedId + '-content');
                        const nestedIcon = document.getElementById(nestedId + '-icon');
                        if (nestedContent && nestedIcon) {
                            nestedContent.classList.remove('expanded');
                            nestedIcon.classList.remove('expanded');
                            nestedIcon.textContent = '▶';
                        }
                    });
                }
            } else {
                content.classList.add('expanded');
                icon.classList.add('expanded');
                icon.textContent = '▼';
            }
        }

        // Comprehensive search functionality
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            const resultsContainer = document.getElementById('searchResults');
            
            if (!searchTerm) {
                resultsContainer.classList.remove('show');
                return;
            }

            // Sample verb data for search
            const verbData = [
                { name: 'accepter', meaning: 'to accept', category: 'Regular -er Verbs' },
                { name: 'aimer', meaning: 'to like, to love', category: 'Regular -er Verbs' },
                { name: 'parler', meaning: 'to speak', category: 'Regular -er Verbs' },
                { name: 'manger', meaning: 'to eat', category: '-ger Verbs' },
                { name: 'finir', meaning: 'to finish', category: '-ir Verbs' },
                { name: 'attendre', meaning: 'to wait', category: '-re Verbs' },
                { name: 'annuler', meaning: 'to cancel', category: 'Regular -er Verbs' },
                { name: 'apporter', meaning: 'to bring', category: 'Regular -er Verbs' },
                { name: 'attraper', meaning: 'to catch', category: 'Regular -er Verbs' },
                { name: 'augmenter', meaning: 'to increase', category: 'Regular -er Verbs' },
                { name: 'bavarder', meaning: 'to chat', category: 'Regular -er Verbs' },
                { name: 'casser', meaning: 'to break', category: 'Regular -er Verbs' },
                { name: 'chercher', meaning: 'to look for', category: 'Regular -er Verbs' },
                { name: 'commander', meaning: 'to order', category: 'Regular -er Verbs' },
                { name: 'couper', meaning: 'to cut', category: 'Regular -er Verbs' },
                { name: 'danser', meaning: 'to dance', category: 'Regular -er Verbs' },
                { name: 'déjeuner', meaning: 'to have lunch', category: 'Regular -er Verbs' },
                { name: 'demander', meaning: 'to ask', category: 'Regular -er Verbs' },
                { name: 'dessiner', meaning: 'to draw', category: 'Regular -er Verbs' },
                { name: 'donner', meaning: 'to give', category: 'Regular -er Verbs' },
                { name: 'emprunter', meaning: 'to borrow', category: 'Regular -er Verbs' },
                { name: 'étudier', meaning: 'to study', category: 'Regular -er Verbs' },
                { name: 'exprimer', meaning: 'to express', category: 'Regular -er Verbs' },
                { name: 'gagner', meaning: 'to win, to earn', category: 'Regular -er Verbs' },
                { name: 'garder', meaning: 'to keep', category: 'Regular -er Verbs' },
                { name: 'habiter', meaning: 'to live', category: 'Regular -er Verbs' },
                { name: 'laver', meaning: 'to wash', category: 'Regular -er Verbs' },
                { name: 'mériter', meaning: 'to deserve', category: 'Regular -er Verbs' },
                { name: 'oublier', meaning: 'to forget', category: 'Regular -er Verbs' },
                { name: 'porter', meaning: 'to carry', category: 'Regular -er Verbs' },
                { name: 'prêter', meaning: 'to lend', category: 'Regular -er Verbs' },
                { name: 'refuser', meaning: 'to refuse', category: 'Regular -er Verbs' },
                { name: 'regarder', meaning: 'to watch', category: 'Regular -er Verbs' },
                { name: 'saluer', meaning: 'to greet', category: 'Regular -er Verbs' },
                { name: 'sauter', meaning: 'to jump', category: 'Regular -er Verbs' },
                { name: 'tomber', meaning: 'to fall', category: 'Regular -er Verbs' },
                { name: 'travailler', meaning: 'to work', category: 'Regular -er Verbs' },
                { name: 'visiter', meaning: 'to visit', category: 'Regular -er Verbs' },
                { name: 'accomplir', meaning: 'to accomplish', category: '-ir Verbs' },
                { name: 'grandir', meaning: 'to grow up', category: '-ir Verbs' },
                { name: 'remplir', meaning: 'to fill', category: '-ir Verbs' },
                { name: 'réussir', meaning: 'to succeed', category: '-ir Verbs' },
                { name: 'défendre', meaning: 'to defend', category: '-re Verbs' },
                { name: 'entendre', meaning: 'to hear', category: '-re Verbs' },
                { name: 'perdre', meaning: 'to lose', category: '-re Verbs' },
                { name: 'répondre', meaning: 'to answer', category: '-re Verbs' }
            ];

            // Filter results
            const results = verbData.filter(verb => 
                verb.name.toLowerCase().includes(searchTerm) || 
                verb.meaning.toLowerCase().includes(searchTerm) ||
                verb.category.toLowerCase().includes(searchTerm)
            );

            if (results.length > 0) {
                resultsContainer.innerHTML = results.map(result => 
                    `<div class="search-result-item" onclick="window.location.href='#${result.name}'">
                        <strong>${result.name}</strong> - ${result.category}<br>
                        <small>${result.meaning}</small>
                    </div>`
                ).join('');
                resultsContainer.classList.add('show');
            } else {
                resultsContainer.innerHTML = '<div class="search-no-results">No results found for "' + searchTerm + '"</div>';
                resultsContainer.classList.add('show');
            }
        }

        // Allow search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // Hide results when clicking outside
        document.addEventListener('click', function(e) {
            const searchContainer = document.querySelector('.search-container');
            if (!searchContainer.contains(e.target)) {
                document.getElementById('searchResults').classList.remove('show');
            }
        });

        // Mobile menu toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }

        // Auto-expand sections for direct navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we have a hash in the URL
            const hash = window.location.hash;
            if (hash) {
                // Auto-expand relevant sections based on the verb being accessed
                const verbName = hash.replace('#', '');
                // You could add logic here to auto-expand the appropriate verb category
            }
        });

        // Function to update conjugations to include Elle and Elles
        function updateConjugations() {
            Object.keys(conjugations).forEach(verb => {
                conjugations[verb] = conjugations[verb].map(conjugation => {
                    let [french, english] = conjugation;
                    
                    // Update Il to Il/Elle
                    if (french.startsWith('Il ') && !french.includes('/Elle')) {
                        french = french.replace('Il ', 'Il/Elle ');
                        english = english.replace('He/She/One ', 'He/She ').replace('He/She/It ', 'He/She ');
                    }
                    
                    // Update Ils to Ils/Elles
                    if (french.startsWith('Ils ') && !french.includes('/Elles')) {
                        french = french.replace('Ils ', 'Ils/Elles ');
                        english = english.replace('They ', 'They (masculine/feminine) ');
                    }
                    
                    return [french, english];
                });
            });
            
            // Also update example sentences
            Object.keys(exampleSentences).forEach(verb => {
                exampleSentences[verb] = exampleSentences[verb].map(sentence => {
                    let [french, english] = sentence;
                    
                    // Update example sentences that start with Il to Il/Elle (only at beginning)
                    if (french.startsWith('Il ') && !french.includes('/Elle')) {
                        // Only update if it's a verb form, not proper nouns
                        const words = french.split(' ');
                        if (words.length > 1 && words[1].match(/^[a-z]/)) { // lowercase indicates verb
                            french = french.replace('Il ', 'Il/Elle ');
                            english = english.replace('He ', 'He/She ').replace('It ', 'He/She ');
                        }
                    }
                    
                    // Update example sentences that start with Ils to Ils/Elles
                    if (french.startsWith('Ils ') && !french.includes('/Elles')) {
                        french = french.replace('Ils ', 'Ils/Elles ');
                        english = english.replace('They ', 'They ');
                    }
                    
                    return [french, english];
                });
            });
        }

        // Dynamically generate all verb sections when page loads
        window.onload = function() {
            // Update all conjugations first
            updateConjugations();
            
            // All verb categories with their verbs
            const verbCategories = {
                'regular-er': [
                    ["annuler", "to cancel"],
                    ["apporter", "to bring"],
                    ["attraper", "to catch"],
                    ["augmenter", "to increase"],
                    ["bavarder", "to chat"],
                    ["casser", "to break"],
                    ["chercher", "to look for"],
                    ["commander", "to order"],
                    ["couper", "to cut"],
                    ["danser", "to dance"],
                    ["dejeuner", "to have lunch"],
                    ["demander", "to ask"],
                    ["dessiner", "to draw"],
                    ["donner", "to give"],
                    ["emprunter", "to borrow"],
                    ["etudier", "to study"],
                    ["exprimer", "to express"],
                    ["gagner", "to win, to earn"],
                    ["garder", "to keep"],
                    ["habiter", "to live"],
                    ["laver", "to wash"],
                    ["meriter", "to deserve"],
                    ["oublier", "to forget"],
                    ["porter", "to carry"],
                    ["preter", "to lend"],
                    ["refuser", "to refuse"],
                    ["regarder", "to watch"],
                    ["saluer", "to greet"],
                    ["sauter", "to jump"],
                    ["tomber", "to fall"],
                    ["travailler", "to work"],
                    ["visiter", "to visit"]
                ],
                'cer-verbs': [
                    ["annoncer", "to announce"],
                    ["avancer", "to move forward"],
                    ["balancer", "to swing"],
                    ["commencer", "to start"],
                    ["defoncer", "to smash in"],
                    ["deplacer", "to move"],
                    ["devancer", "to get ahead of"],
                    ["effacer", "to erase"],
                    ["epicer", "to spice"],
                    ["faconner", "to craft, to manufacture"],
                    ["financer", "to finance"],
                    ["grimacer", "to make faces"],
                    ["influencer", "to influence"],
                    ["lacer", "to lace up, to tie"],
                    ["menacer", "to threaten"],
                    ["percer", "to pierce"],
                    ["placer", "to place"],
                    ["poncer", "to sand"],
                    ["remplacer", "to replace"],
                    ["renoncer", "to give up"],
                    ["prononcer", "to pronounce"]
                ],
                'ger-verbs': [
                    ["bouger", "to move"],
                    ["changer", "to change"],
                    ["corriger", "to correct"],
                    ["degager", "to release, to free"],
                    ["demenager", "to move house"],
                    ["encourager", "to encourage"],
                    ["exiger", "to demand"],
                    ["heberger", "to host"],
                    ["melanger", "to mix"],
                    ["nager", "to swim"],
                    ["negliger", "to neglect"],
                    ["partager", "to share"],
                    ["plonger", "to dive"],
                    ["proteger", "to protect"],
                    ["ranger", "to put away"],
                    ["venger", "to avenge"]
                ],
                'accent-verbs': [
                    ["achever", "to complete"],
                    ["ceder", "to yield"],
                    ["celebrer", "to celebrate"],
                    ["considerer", "to consider"],
                    ["deleguer", "to delegate"],
                    ["emmener", "to take along"],
                    ["enlever", "to remove"],
                    ["esperer", "to hope"],
                    ["exagerer", "to exaggerate"],
                    ["gerer", "to manage"],
                    ["lecher", "to lick"],
                    ["lever", "to raise"],
                    ["mener", "to lead"],
                    ["peser", "to weigh"],
                    ["posseder", "to own"],
                    ["preferer", "to prefer"],
                    ["reveler", "to reveal"],
                    ["semer", "to sow"]
                ],
                'eler-verbs': [
                    ["appeler", "to call"],
                    ["ensorceler", "to bewitch"],
                    ["etinceler", "to sparkle"],
                    ["ficeler", "to tie"],
                    ["niveler", "to level"],
                    ["rappeler", "to remind"],
                    ["renouveler", "to renew"]
                ],
                'ir-verbs': [
                    ["accomplir", "to accomplish"],
                    ["adoucir", "to soften"],
                    ["agrandir", "to enlarge"],
                    ["applaudir", "to applaud"],
                    ["batir", "to build"],
                    ["benir", "to bless"],
                    ["eclaircir", "to lighten"],
                    ["epanouir", "to bloom"],
                    ["evanouir", "to faint"],
                    ["grandir", "to grow up"],
                    ["grossir", "to put on weight"],
                    ["investir", "to invest"],
                    ["maigrir", "to lose weight"],
                    ["mincir", "to slim down"],
                    ["obeir", "to obey"],
                    ["palir", "to turn pale"],
                    ["rafraichir", "to refresh"],
                    ["ralentir", "to slow down"],
                    ["reflechir", "to reflect"],
                    ["remplir", "to fill"],
                    ["reussir", "to succeed"],
                    ["rougir", "to blush"],
                    ["saisir", "to seize"],
                    ["vieillir", "to grow old"]
                ],
                'ir2-verbs': [
                    ["bouillir", "to boil"],
                    ["courir", "to run"],
                    ["couvrir", "to cover"],
                    ["cueillir", "to pick"],
                    ["dormir", "to sleep"],
                    ["fuir", "to flee"],
                    ["mentir", "to lie"],
                    ["mourir", "to die"],
                    ["obtenir", "to get"],
                    ["offrir", "to offer"],
                    ["ouvrir", "to open"],
                    ["partir", "to leave"],
                    ["sentir", "to feel/smell"],
                    ["servir", "to serve"],
                    ["souffrir", "to suffer"]
                ],
                're-verbs': [
                    ["defendre", "to defend"],
                    ["descendre", "to go down"],
                    ["detendre", "to relax"],
                    ["entendre", "to hear"],
                    ["etendre", "to extend"],
                    ["mordre", "to bite"],
                    ["perdre", "to lose"],
                    ["pretendre", "to claim"],
                    ["rendre", "to return"],
                    ["repandre", "to spread"],
                    ["repondre", "to answer"],
                    ["tendre", "to stretch"],
                    ["tordre", "to twist"]
                ],
                'irre-verbs': [
                    ["apprendre", "to learn"],
                    ["comprendre", "to understand"],
                    ["entreprendre", "to undertake"],
                    ["surprendre", "to surprise"]
                ]
            };

            // Generate sections for all verb categories
            Object.entries(verbCategories).forEach(([category, verbs]) => {
                verbs.forEach(([verb, meaning]) => {
                    // Skip verbs that are already manually added
                    if (['accepter', 'aimer', 'parler', 'manger', 'finir', 'attendre'].includes(verb)) return;
                    
                    const section = document.createElement('div');
                    section.className = 'verb-section';
                    section.id = verb;
                    
                    const sentenceSection = exampleSentences[verb] ? `
                        <h3 style="margin-top: 2rem; text-align: center; color: #8b4513;">Example Sentences</h3>
                        <button class="master-play" onclick="playAllSentences('${verb}')">▶️ Play All Example Sentences</button>
                        <table style="margin-top: 1rem;">
                            <thead>
                                <tr><th>French Sentence</th><th>English Translation</th><th>Audio</th></tr>
                            </thead>
                            <tbody>
                                ${exampleSentences[verb].map(([fr, en]) => `<tr><td>${fr}</td><td>${en}</td><td><button onclick="playAudio('${fr.replace(/'/g, "\\'")}')" title="Play: ${fr}">🔊</button></td></tr>`).join('')}
                            </tbody>
                        </table>` : '';
                    
                    section.innerHTML = `
                        <a class="drill-up" href="#verb-overview">↑ Back to Overview</a>
                        <h2>${verb} (${meaning})</h2>
                        <button class="master-play" onclick="playAll('${verb}')">▶️ Play All French Conjugations</button>
                        <table>
                            <thead>
                                <tr><th>French</th><th>English</th><th>Audio</th></tr>
                            </thead>
                            <tbody>
                                ${conjugations[verb] ? conjugations[verb].map(([fr, en]) => `<tr><td>${fr}</td><td>${en}</td><td><button onclick="playAudio('${fr.replace(/'/g, "\\'")}')\">🔊</button></td></tr>`).join('') : '<tr><td colspan="3">Conjugation data not found</td></tr>'}
                            </tbody>
                        </table>
                        ${sentenceSection}
                    `;
                    mainContent.appendChild(section);
                });
            });
            
            // Initialize sidebar sections - expand main verbs section to show sub-sections
            toggleSection('verbs');
            // toggleSection('regular-er');
        };

        // Authentication Functions
        function toggleAuthButtons(isSignedIn, userName = '', subscriptionStatus = 'free') {
            console.log('🔄 toggleAuthButtons called:', { isSignedIn, userName, subscriptionStatus });
            
            // Debug: Check current user subscription status from localStorage
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            console.log('🔍 Current user from localStorage:', currentUser);
            console.log('📋 Subscription object:', currentUser?.subscription);
            console.log('⭐ Subscription status:', currentUser?.subscription?.status);
            
            const authButtons = document.querySelector('.auth-buttons');
            const userStatus = document.getElementById('userStatus');
            const userGreeting = document.getElementById('userGreeting');
            const subscriptionStatusSpan = document.getElementById('subscriptionStatus');
            const signOutBtn = document.getElementById('signOutBtn');
            const donateBtn = document.querySelector('.nav-donate');
            
            if (isSignedIn) {
                // User is signed in - show user status and hide sign in/up buttons
                console.log('👤 Showing user status for:', userName);
                
                // Validate userName to prevent password from being displayed
                const displayName = (userName && typeof userName === 'string' && userName.trim() && !userName.includes('@')) 
                    ? userName.trim() 
                    : 'User';
                
                if (authButtons) {
                    const signInBtn = authButtons.querySelector('.sign-in-btn');
                    const signUpBtn = authButtons.querySelector('.sign-up-btn');
                    console.log('🔍 Sign-in button found:', !!signInBtn);
                    console.log('🔍 Sign-up button found:', !!signUpBtn);
                    if (signInBtn) {
                        signInBtn.style.display = 'none';
                        console.log('✅ Sign-in button hidden');
                    }
                    if (signUpBtn) {
                        signUpBtn.style.display = 'none';
                        console.log('✅ Sign-up button hidden');
                    }
                } else {
                    console.log('❌ Auth buttons container not found!');
                }
                
                if (userStatus) userStatus.style.display = 'flex';
                if (userGreeting) {
                    userGreeting.textContent = `Welcome, ${displayName}!`;
                    userGreeting.style.display = 'inline'; // Ensure greeting is visible
                }
                if (signOutBtn) signOutBtn.style.display = 'inline-block';
                // Show Support Us button only for premium users
                if (donateBtn) {
                    if (subscriptionStatus === 'premium') {
                        donateBtn.style.display = 'block';
                        console.log('✅ Support Us button shown for premium user');
                    } else {
                        donateBtn.style.display = 'none';
                        console.log('❌ Support Us button hidden for non-premium user');
                    }
                }
                
                // Handle subscription button based on premium status (copied from index.html)
                const subscriptionBtn = document.getElementById('subscriptionBtn');
                if (subscriptionBtn) {
                    if (subscriptionStatus === 'premium') {
                        console.log('🎯 Direct premium check - hiding Go Premium button');
                        subscriptionBtn.style.display = 'none';
                    } else {
                        console.log('🎯 Direct non-premium check - showing Go Premium button');
                        subscriptionBtn.style.display = 'inline-flex';
                        subscriptionBtn.textContent = '💎 Go Premium';
                    }
                }
                
                // Update subscription status
                updateSubscriptionUI(subscriptionStatus);
                
            } else {
                // User is signed out - show sign in/up buttons and hide user status
                console.log('🚪 Hiding user status, showing sign in/up buttons');
                
                if (authButtons) {
                    const signInBtn = authButtons.querySelector('.sign-in-btn');
                    const signUpBtn = authButtons.querySelector('.sign-up-btn');
                    console.log('🔍 Sign-in button found (signed-out):', !!signInBtn);
                    console.log('🔍 Sign-up button found (signed-out):', !!signUpBtn);
                    if (signInBtn) {
                        signInBtn.style.display = 'inline-block';
                        console.log('✅ Sign-in button shown');
                    }
                    if (signUpBtn) {
                        signUpBtn.style.display = 'inline-block';
                        console.log('✅ Sign-up button shown');
                    }
                } else {
                    console.log('❌ Auth buttons container not found (signed-out)!');
                }
                
                if (userStatus) userStatus.style.display = 'none';
                if (signOutBtn) signOutBtn.style.display = 'none';
                if (donateBtn) donateBtn.style.display = 'none'; // Hide Support Us button when signed out
                
                // Reset user name and subscription status to default guest state
                if (userGreeting) userGreeting.textContent = 'Welcome!';
                
                // Force reset subscription UI to free/guest state
                if (subscriptionStatusSpan) {
                    subscriptionStatusSpan.textContent = 'Free';
                    subscriptionStatusSpan.className = 'subscription-status free';
                }
                
                // Also call updateSubscriptionUI for consistency
                updateSubscriptionUI('free');
                
                console.log('✅ UI reset to guest state');
            }
        }

        function signOut() {
            console.log('🚪 COMPLETE SIGN OUT from French-Verbs.html');
            
            // STEP 1: Set Firebase persistence to NONE to prevent auto-restore
            console.log('🔥 Step 1: Disabling Firebase persistence...');
            if (typeof firebase !== 'undefined' && firebase.auth) {
                firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE).then(() => {
                    console.log('✅ Firebase persistence disabled');
                    return firebase.auth().signOut();
                }).then(() => {
                    console.log('✅ Firebase sign out successful - now clearing storage...');
                    completeLocalSignOut();
                }).catch((error) => {
                    console.log('❌ Firebase operations error, proceeding with fallback cleanup:', error);
                    // Force sign out even if persistence change fails
                    firebase.auth().signOut().catch(() => {});
                    completeLocalSignOut();
                });
            } else {
                console.log('🔥 No Firebase available, proceeding with local cleanup...');
                completeLocalSignOut();
            }
        }

        // Helper function to complete local sign-out after Firebase sign-out
        function completeLocalSignOut() {
            console.log('🧹 Step 2: Clearing browser storage...');
            
            // Clear storage (this will trigger storage event in other tabs)
            localStorage.clear();
            sessionStorage.clear();
            
            console.log('🧹 Step 3: UI reset...');
            try {
                toggleAuthButtons(false);
                // Reset any page-specific UI
                updateMenuAccess();
            } catch (error) {
                console.log('UI reset error (ignored):', error);
            }
            
            // Show feedback
            alert('✅ SUCCESSFULLY SIGNED OUT! Page will refresh to guest state...');
            
            console.log('🧹 Step 4: Force page refresh...');
            // Force complete page refresh to ensure clean state
            setTimeout(() => {
                window.location.reload(true); // Force reload from server
            }, 500);
        }

        function openSignInModal() {
            document.getElementById('signInModal').style.display = 'block';
            clearMessages();
        }

        function openSignUpModal() {
            document.getElementById('signUpModal').style.display = 'block';
            clearMessages();
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            clearMessages();
        }

        function switchToSignIn() {
            closeModal('signUpModal');
            openSignInModal();
        }

        function switchToSignUp() {
            closeModal('signInModal');
            openSignUpModal();
        }

        function clearMessages() {
            document.querySelectorAll('.error-message, .success-message').forEach(msg => {
                msg.style.display = 'none';
                msg.textContent = '';
            });
        }

        function openSubscriptionModal() {
            console.log('🎯 Opening subscription modal...');
            
            // Check both Firebase auth and localStorage for current user
            const localUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            const firebaseUser = (typeof firebase !== 'undefined' && firebase.auth && firebase.auth().currentUser) ? firebase.auth().currentUser : null;
            
            if (!localUser && !firebaseUser) {
                alert('Please sign in first to subscribe.');
                openSignInModal();
                return;
            }
            
            // If Firebase user exists but localStorage doesn't, sync them
            if (firebaseUser && !localUser) {
                const userData = {
                    email: firebaseUser.email,
                    name: firebaseUser.displayName || firebaseUser.email,
                    registeredAt: new Date().toISOString(),
                    subscription: {
                        status: 'free',
                        plan: null,
                        startDate: null,
                        endDate: null
                    }
                };
                localStorage.setItem('french_app_current_user', JSON.stringify(userData));
            }
            
            // Reset modal state
            selectedPlan = null;
            document.querySelectorAll('.plan-card').forEach(card => card.classList.remove('selected'));
            document.getElementById('paymentSection').style.display = 'none';
            
            // Update pricing based on user's country before showing modal
            updateSubscriptionPricingForUser().catch(error => {
                console.error('❌ Error updating subscription pricing:', error);
            });
            
            // Update button text to show correct currency immediately
            updatePaymentButtonCurrency().catch(error => {
                console.error('❌ Error updating payment button currency:', error);
            });
            
            // Show modal
            document.getElementById('subscriptionModal').style.display = 'block';
            clearMessages();
            
            // Show helpful message
            showSuccess('subscriptionSuccess', '👆 Please select a plan above to continue with payment');
            
            // Initialize Stripe if not already done
            if (!stripe) {
                initializeStripe();
            }
        }

        // Country-specific pricing functions (Enhanced Firebase integration)
        async function getUserCurrency() {
            try {
                // First, try to get country from Firebase Firestore
                const firebaseUser = (typeof firebase !== 'undefined' && firebase.auth && firebase.auth().currentUser) ? firebase.auth().currentUser : null;
                
                if (firebaseUser && typeof firebase.firestore !== 'undefined') {
                    console.log('🔍 Checking Firebase for country data for user:', firebaseUser.uid);
                    
                    try {
                        const doc = await firebase.firestore().collection('users').doc(firebaseUser.uid).get();
                        if (doc.exists) {
                            const userData = doc.data();
                            const firebaseCountry = userData.country;
                            
                            console.log('🌍 Firebase country data:', firebaseCountry);
                            
                            if (firebaseCountry) {
                                // Update localStorage with Firebase data
                                const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || '{}');
                                currentUser.country = firebaseCountry;
                                localStorage.setItem('french_app_current_user', JSON.stringify(currentUser));
                                
                                if (firebaseCountry === 'Canada') {
                                    console.log('💰 Using CAD currency for Canada (from Firebase)');
                                    return 'CAD';
                                } else if (firebaseCountry === 'India') {
                                    console.log('💰 Using INR currency for India (from Firebase)');
                                    return 'INR';
                                }
                            }
                        }
                    } catch (firebaseError) {
                        console.log('⚠️ Firebase query failed, falling back to localStorage:', firebaseError.message);
                    }
                }
                
                // Fallback to localStorage
                const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || '{}');
                console.log('💰 Getting user currency from localStorage for:', currentUser.country);
                
                if (currentUser.country === 'Canada') {
                    return 'CAD';
                } else if (currentUser.country === 'India') {
                    return 'INR';
                }
                
                // Default to USD for other countries or if no country specified
                console.log('💰 Using USD currency (default/fallback)');
                return 'USD';
                
            } catch (error) {
                console.error('❌ Error in getUserCurrency:', error);
                return 'USD';
            }
        }

        async function updateSubscriptionPricingForUser() {
            try {
                const currency = await getUserCurrency();
                
                console.log('🎯 Updating subscription pricing for currency:', currency);
                
                if (currency === 'CAD') {
                    console.log('🍁 Applying Canadian pricing');
                    updatePlanPrices('CAD', 13.47, 36.44, 135);
                } else if (currency === 'INR') {
                    console.log('🇮🇳 Applying Indian pricing');
                    updatePlanPrices('INR', 499, 1497, 5988);
                } else {
                    // Use default USD pricing for other countries
                    console.log('🇺🇸 Using default USD pricing');
                    updatePlanPrices('USD', 9.99, 26.99, 99.99);
                }
            } catch (error) {
                console.error('❌ Error in updateSubscriptionPricingForUser:', error);
                // Fallback to USD
                updatePlanPrices('USD', 9.99, 26.99, 99.99);
            }
        }

        function updatePlanPrices(currency, monthly, quarterly, yearly) {
            // Update the main price display
            const monthlyPrice = document.querySelector('#monthlyPlan .plan-price');
            const quarterlyPrice = document.querySelector('#quarterlyPlan .plan-price');
            const yearlyPrice = document.querySelector('#yearlyPlan .plan-price');
            
            const symbol = currency === 'CAD' ? '$' : currency === 'INR' ? '₹' : '$';
            
            console.log('💰 Updating plan prices to:', currency, { monthly, quarterly, yearly });
            
            if (monthlyPrice) {
                monthlyPrice.innerHTML = `<span class="currency">${symbol}</span>${monthly}<span class="period">/month</span>`;
                console.log('✅ Updated monthly price');
            } else {
                console.log('⚠️ Monthly price element not found');
            }
            
            if (quarterlyPrice) {
                quarterlyPrice.innerHTML = `<span class="currency">${symbol}</span>${quarterly}<span class="period">/3 months</span>`;
                console.log('✅ Updated quarterly price');
            } else {
                console.log('⚠️ Quarterly price element not found');
            }
            
            if (yearlyPrice) {
                yearlyPrice.innerHTML = `<span class="currency">${symbol}</span>${yearly}<span class="period">/year</span>`;
                console.log('✅ Updated yearly price');
            } else {
                console.log('⚠️ Yearly price element not found');
            }
        }

        function ensureUserHasCountryData() {
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || '{}');
            
            // If user exists but has no country data, prompt them
            if (currentUser.email && !currentUser.country) {
                console.log('⚠️ User missing country data, prompting for selection...');
                const userChoice = prompt(
                    '🌍 Country Selection Required\n\nTo show you the correct pricing, please select your country:\n\n1 - Canada (CAD pricing)\n2 - India (INR pricing)\n3 - Other countries (USD pricing)\n\nEnter 1, 2, or 3:'
                );
                
                let country = 'Other';
                if (userChoice === '1') {
                    country = 'Canada';
                } else if (userChoice === '2') {
                    country = 'India';
                }
                
                // Update user data with country
                currentUser.country = country;
                localStorage.setItem('french_app_current_user', JSON.stringify(currentUser));
                
                console.log('✅ Country updated to:', country);
                return country;
            }
            
            return currentUser.country || 'Other';
        }

        async function updatePaymentButtonCurrency() {
            console.log('🔍 updatePaymentButtonCurrency called');
            
            try {
                // Get currency from Firebase first, then localStorage
                const userCurrency = await getUserCurrency();
                const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || '{}');
                const btnText = document.getElementById('subscribeBtnText');
                
                console.log('👤 Current user data:', currentUser);
                console.log('💰 Detected currency:', userCurrency);
                
                if (btnText) {
                    let defaultText;
                    if (userCurrency === 'CAD') {
                        defaultText = 'Complete Payment $13.47 CAD/month';
                    } else if (userCurrency === 'INR') {
                        defaultText = 'Complete Payment ₹499 INR/month';
                    } else {
                        defaultText = 'Complete Payment $9.99 USD/month';
                    }
                    btnText.textContent = defaultText;
                    console.log('✅ Button currency updated to:', defaultText);
                    console.log('✅ Button element updated successfully');
                } else {
                    console.error('❌ subscribeBtnText element not found!');
                }
            } catch (error) {
                console.error('❌ Error in updatePaymentButtonCurrency:', error);
                // Fallback to USD if there's an error
                const btnText = document.getElementById('subscribeBtnText');
                if (btnText) {
                    btnText.textContent = 'Complete Payment $9.99 USD/month';
                }
            }
        }

        // Tech-Pay Centralized Payment System Configuration
        // Environment Configuration - UPDATE FOR LIVE INTEGRATION
        const STRIPE_CONFIG = {
            environment: 'live',  // 'test' or 'live' - LIVE ENVIRONMENT ACTIVATED
            test: {
                publishableKey: 'pk_test_TYooMQauvdEDq54NiTphI7jx',
            },
            live: {
                publishableKey: 'pk_live_51Rr5H03QiDHRr52effkP2HrTynAiO7NYD8VQfmbQiHTfpj3zvbw7q4p3uSeRWHHK0ehhHAoYqHyxXwIjmuyGVz3Q00BJL8lkM9',
            }
        };

        // Get current Stripe publishable key based on environment
        function getStripePublishableKey() {
            const config = STRIPE_CONFIG[STRIPE_CONFIG.environment];
            console.log(`🔧 Using ${STRIPE_CONFIG.environment} Stripe environment`);
            return config.publishableKey;
        }

        // Global Stripe variables (from Tech-Pay.html)
        // Check if variables already exist to avoid redeclaration
        if (typeof selectedPlan === 'undefined') var selectedPlan = null;
        if (typeof stripe === 'undefined') var stripe = null;
        if (typeof elements === 'undefined') var elements = null;
        if (typeof cardElement === 'undefined') var cardElement = null;

        // Live Payment Helper Function
        function logPaymentSuccess(paymentIntent, planType, currency, amount) {
            console.log('📊 Payment Success Log:', {
                payment_id: paymentIntent?.id || 'demo_' + Date.now(),
                plan: planType,
                currency: currency,
                amount: amount,
                timestamp: new Date().toISOString(),
                environment: STRIPE_CONFIG.environment
            });

            // Store payment info in localStorage for tracking
            const paymentHistory = JSON.parse(localStorage.getItem('payment_history') || '[]');
            paymentHistory.push({
                id: paymentIntent?.id || 'demo_' + Date.now(),
                plan: planType,
                currency: currency,
                amount: amount,
                date: new Date().toISOString(),
                status: 'completed'
            });
            localStorage.setItem('payment_history', JSON.stringify(paymentHistory));
        }

        async function selectPlan(planType) {
            console.log('🎯 Plan selected:', planType);
            
            try {
                selectedPlan = planType;
                
                // Clear any existing error messages
                clearMessages();
                
                // Update UI - remove selected class from all cards
                document.querySelectorAll('.plan-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                // Add selected class to the chosen plan
                const selectedCard = document.getElementById(planType + 'Plan');
                if (selectedCard) {
                    selectedCard.classList.add('selected');
                    console.log('✅ Plan card updated:', planType + 'Plan');
                } else {
                    console.error('❌ Could not find plan card:', planType + 'Plan');
                }
                
                // Show payment section with smooth transition
                const paymentSection = document.getElementById('paymentSection');
                if (paymentSection) {
                    paymentSection.style.display = 'block';
                    paymentSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    console.log('✅ Payment section shown');
                } else {
                    console.error('❌ Could not find payment section');
                }
                
                // Update button text with selected plan amount based on user's country
                const userCurrency = await getUserCurrency();
                let amount;
                
                if (userCurrency === 'CAD') {
                    if (planType === 'monthly') {
                        amount = '$13.47 CAD/month';
                    } else if (planType === 'quarterly') {
                        amount = '$36.44 CAD/3 months';
                    } else if (planType === 'yearly') {
                        amount = '$135 CAD/year';
                    }
                } else if (userCurrency === 'INR') {
                    if (planType === 'monthly') {
                        amount = '₹499 INR/month';
                    } else if (planType === 'quarterly') {
                        amount = '₹1,497 INR/3 months';
                    } else if (planType === 'yearly') {
                        amount = '₹5,988 INR/year';
                    }
                } else {
                    // Default USD pricing
                    if (planType === 'monthly') {
                        amount = '$9.99 USD/month';
                    } else if (planType === 'quarterly') {
                        amount = '$26.99 USD/3 months';
                    } else if (planType === 'yearly') {
                        amount = '$99.99 USD/year';
                    }
                }
                
                const btnText = document.getElementById('subscribeBtnText');
                if (btnText) {
                    btnText.textContent = `Complete Payment ${amount}`;
                    console.log('✅ Button text updated:', amount);
                } else {
                    console.error('❌ Could not find subscribe button text');
                }
                
                // Initialize Stripe if not already done
                if (!stripe) {
                    console.log('🔄 Initializing Stripe...');
                    initializeStripe();
                }
                
                // Show success message for plan selection
                const planName = planType === 'monthly' ? 'Monthly' : planType === 'quarterly' ? 'Quarterly' : 'Yearly';
                showSuccess('subscriptionSuccess', `${planName} Premium plan selected! Please fill in your payment details below.`);
                
                console.log('🎉 Plan selection completed successfully');
                
            } catch (error) {
                console.error('❌ Error in selectPlan:', error);
                showError('subscriptionError', 'There was an error selecting your plan. Please try again.');
            }
        }

        // Tech-Pay Centralized Stripe Initialization (from Tech-Pay.html)
        function initializeStripe() {
            console.log('🔄 Initializing Stripe...');
            
            if (typeof Stripe === 'undefined') {
                console.error('❌ Stripe.js not loaded');
                showError('subscriptionError', 'Payment system not available. Please refresh the page.');
                return;
            }

            try {
                // Initialize Stripe with environment-appropriate key (Tech-Pay System)
                const publishableKey = getStripePublishableKey();
                stripe = Stripe(publishableKey);
                elements = stripe.elements();
                
                // Create card element optimized for international users
                // Supports CAD, INR, USD, and other international cards
                cardElement = elements.create('card', {
                    style: {
                        base: {
                            fontSize: '16px',
                            color: '#424770',
                            '::placeholder': {
                                color: '#aab7c4',
                            },
                        },
                    },
                    hidePostalCode: true // International-friendly: Remove ZIP code requirement
                });
                
                cardElement.mount('#card-element');
                
                // Handle real-time validation errors from the card Element
                cardElement.on('change', ({error}) => {
                    const displayError = document.getElementById('card-errors');
                    if (error) {
                        displayError.textContent = error.message;
                    } else {
                        displayError.textContent = '';
                    }
                });
                
                console.log('✅ Stripe initialized successfully with Tech-Pay system');
                
            } catch (error) {
                console.error('❌ Error initializing Stripe:', error);
                showError('subscriptionError', 'Payment system initialization failed. Please refresh the page.');
            }
        }

        // Tech-Pay Centralized Payment Processing (Live Bank Integration Ready)
        async function processPayment() {
            if (!selectedPlan) {
                showError('subscriptionError', 'Please select a subscription plan.');
                return;
            }
            
            const cardholderName = document.getElementById('cardholderName').value;
            if (!cardholderName.trim()) {
                showError('subscriptionError', 'Please enter the cardholder name.');
                return;
            }
            
            // Show loading
            const subscribeBtn = document.getElementById('subscribeBtn');
            const subscribeBtnText = document.getElementById('subscribeBtnText');
            const subscribeSpinner = document.getElementById('subscribeSpinner');
            
            subscribeBtnText.style.display = 'none';
            subscribeSpinner.style.display = 'inline';
            subscribeBtn.disabled = true;
            
            try {
                // Create payment method with Stripe
                const {error, paymentMethod} = await stripe.createPaymentMethod({
                    type: 'card',
                    card: cardElement,
                    billing_details: {
                        name: cardholderName,
                    },
                });
                
                if (error) {
                    throw new Error(error.message);
                }
                
                console.log('✅ Payment method created:', paymentMethod.id);
                
                // Get pricing for the selected plan and currency
                const userCurrency = await getUserCurrency();
                let priceInCents;
                
                if (userCurrency === 'CAD') {
                    priceInCents = selectedPlan === 'monthly' ? 1347 : selectedPlan === 'quarterly' ? 3644 : 13500;
                } else if (userCurrency === 'INR') {
                    priceInCents = selectedPlan === 'monthly' ? 49900 : selectedPlan === 'quarterly' ? 149700 : 598800; // INR uses paisa (1/100)
                } else {
                    priceInCents = selectedPlan === 'monthly' ? 999 : selectedPlan === 'quarterly' ? 2699 : 9999;
                }
                
                console.log('💳 Processing payment for:', priceInCents, userCurrency);
                
                // LIVE ENVIRONMENT: Backend Payment Processing with Stripe Payment Intents
                if (STRIPE_CONFIG.environment === 'live') {
                    console.log('🚀 Processing LIVE payment with backend integration');
                    
                    try {
                        console.log('💳 Creating payment intent with backend...');
                        
                        // Get current user for customer details
                        const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || '{}');
                        
                        // Create payment intent via backend
                        const response = await fetch('https://foundation-backend-chi.vercel.app/create-payment-intent', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                planType: selectedPlan,
                                currency: userCurrency,
                                amount: priceInCents,
                                customerEmail: currentUser.email || '',
                                customerName: currentUser.displayName || cardholderName
                            })
                        });
                        
                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(errorData.error || 'Payment setup failed');
                        }
                        
                        const { clientSecret, paymentIntentId } = await response.json();
                        console.log('✅ Payment intent created:', paymentIntentId);
                        
                        // Confirm payment with Stripe
                        const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
                            payment_method: paymentMethod.id
                        });
                        
                        if (confirmError) {
                            throw new Error(confirmError.message);
                        }
                        
                        if (paymentIntent.status === 'succeeded') {
                            console.log('✅ LIVE payment processed successfully!');
                            console.log('💰 Payment Details:', paymentIntent);
                            
                            // Log the successful payment for tracking
                            logPaymentSuccess(paymentIntent, selectedPlan, userCurrency, priceInCents);
                        } else {
                            throw new Error('Payment was not completed successfully');
                        }
                        
                    } catch (liveError) {
                        console.error('❌ Live payment processing error:', liveError);
                        
                        // Redirect to error page with details
                        const errorParams = new URLSearchParams({
                            error: liveError.message || 'Payment processing failed',
                            code: liveError.code || 'PAYMENT_FAILED',
                            plan: selectedPlan,
                            amount: priceInCents,
                            currency: userCurrency
                        });
                        
                        window.location.href = 'payment-error.html?' + errorParams.toString();
                        return;
                    }
                } else {
                    // Test environment processing
                    console.log('✅ Payment processed successfully with Stripe using test card');
                }
                
                // Update user subscription in Firebase
                console.log('💳 Payment successful, updating Firebase...');
                const updateResult = await updateUserSubscription(selectedPlan);
                
                if (!updateResult || !updateResult.success) {
                    console.error('❌ Subscription update failed:', updateResult);
                    const errorMsg = updateResult?.error || 'Unknown Firebase error';
                    throw new Error(`Failed to update subscription in Firebase: ${errorMsg}`);
                }
                
                console.log('✅ Firebase updated successfully, updating localStorage...');
                
                // Update localStorage with the actual Firebase data
                const currentUser = JSON.parse(localStorage.getItem('french_app_current_user'));
                currentUser.subscription = {
                    status: 'premium',
                    plan: selectedPlan,
                    startDate: new Date().toISOString(),
                    endDate: new Date(Date.now() + (selectedPlan === 'monthly' ? 30 : selectedPlan === 'quarterly' ? 90 : 365) * 24 * 60 * 60 * 1000).toISOString(),
                    active: true,
                    paymentMethod: 'stripe'
                };
                localStorage.setItem('french_app_current_user', JSON.stringify(currentUser));
                
                console.log('✅ localStorage updated with premium status');
                
                showSuccess('subscriptionSuccess', '🎉 Payment successful! Welcome to Premium!');
                
                setTimeout(() => {
                    closeModal('subscriptionModal');
                    
                    // Update UI to show premium status
                    if (typeof updateSubscriptionUI === 'function') {
                        updateSubscriptionUI('premium');
                    }
                    
                    // Force refresh the menu access
                    if (typeof updateMenuAccess === 'function') {
                        updateMenuAccess();
                    }
                    
                }, 2000);
                
            } catch (error) {
                console.error('❌ Payment processing error:', error);
                showError('subscriptionError', error.message);
                
            } finally {
                // Reset button state
                subscribeBtnText.style.display = 'inline';
                subscribeSpinner.style.display = 'none';
                subscribeBtn.disabled = false;
            }
        }

        async function updateUserSubscription(plan) {
            const firebaseUser = firebase.auth().currentUser;
            if (!firebaseUser) {
                console.log('❌ No Firebase user for subscription update');
                return { success: false, error: 'No authenticated user' };
            }
            
            try {
                console.log('🔍 Starting Firebase subscription update...');
                console.log('🆔 Plan parameter:', plan);
                console.log('🆔 FirebaseUser UID:', firebaseUser.uid);
                
                const userDocRef = firebase.firestore().collection('users').doc(firebaseUser.uid);
                
                const subscriptionData = {
                    status: 'premium',
                    plan: plan,
                    startDate: new Date(),
                    endDate: new Date(Date.now() + (plan === 'monthly' ? 30 : plan === 'quarterly' ? 90 : 365) * 24 * 60 * 60 * 1000),
                    paymentMethod: 'stripe',
                    active: true,
                    updatedAt: new Date()
                };
                
                console.log('📝 Attempting to update subscription data:', subscriptionData);
                
                try {
                    // Try to update existing document first
                    await userDocRef.update({
                        subscription: subscriptionData
                    });
                    console.log('✅ Updated existing user document');
                } catch (updateError) {
                    console.log('⚠️ Update failed, attempting set instead:', updateError.message);
                    // If update fails (document doesn't exist), create it
                    await userDocRef.set({
                        email: firebaseUser.email,
                        name: firebaseUser.displayName || firebaseUser.email,
                        subscription: subscriptionData,
                        createdAt: new Date()
                    });
                    console.log('✅ Created new user document');
                }
                
                console.log('✅ Firebase subscription update completed successfully');
                return { success: true };
                
            } catch (error) {
                console.error('❌ Firebase subscription update failed:', error);
                return { success: false, error: error.message };
            }
        }

        function updateSubscriptionUI(status) {
            console.log('🎭 updateSubscriptionUI called with status:', status);
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            console.log('🔘 Subscription button found:', !!subscriptionBtn);
            
            if (status === 'premium') {
                console.log('👑 Premium status detected - hiding Go Premium button');
                // Hide the subscription button for premium users to keep it clean
                if (subscriptionBtn) subscriptionBtn.style.display = 'none';
            } else {
                console.log('📝 Non-premium status - showing Go Premium button');
                if (subscriptionBtn) {
                    subscriptionBtn.innerHTML = '💎 Go Premium';
                    subscriptionBtn.className = 'subscription-btn';
                    subscriptionBtn.style.display = 'inline-flex';
                    subscriptionBtn.onclick = openSubscriptionModal;
                }
            }
        }

        // Debug function to manually check and fix subscription UI
        window.debugSubscriptionStatus = function() {
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            console.log('🔍 Debug: Current user:', currentUser);
            console.log('📋 Debug: Subscription:', currentUser?.subscription);
            console.log('⭐ Debug: Status:', currentUser?.subscription?.status);
            
            if (currentUser && currentUser.subscription?.status === 'premium') {
                console.log('👑 Debug: User is premium, forcing UI update...');
                updateSubscriptionUI('premium');
                console.log('✅ Debug: UI updated for premium user');
            } else {
                console.log('📝 Debug: User is not premium');
                updateSubscriptionUI(currentUser?.subscription?.status || 'free');
            }
        }

        // Comprehensive debug function to check Go Premium button issue
        window.debugGoPremiumButton = function() {
            console.log('🔍 === GO PREMIUM BUTTON DEBUG ===');
            
            // Check HTML elements
            const userStatus = document.getElementById('userStatus');
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            const authButtons = document.querySelector('.auth-buttons');
            
            console.log('📍 HTML Elements:');
            console.log('- userStatus element:', !!userStatus);
            console.log('- userStatus display:', userStatus?.style.display);
            console.log('- subscriptionBtn element:', !!subscriptionBtn);
            console.log('- subscriptionBtn display:', subscriptionBtn?.style.display);
            console.log('- subscriptionBtn innerHTML:', subscriptionBtn?.innerHTML);
            console.log('- authButtons element:', !!authButtons);
            
            // Check localStorage
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            console.log('📍 localStorage:');
            console.log('- currentUser:', currentUser);
            console.log('- subscription status:', currentUser?.subscription?.status);
            
            // Check Firebase
            console.log('📍 Firebase:');
            console.log('- Firebase available:', typeof firebase !== 'undefined');
            console.log('- Firebase auth available:', typeof firebase !== 'undefined' && !!firebase.auth);
            if (typeof firebase !== 'undefined' && firebase.auth) {
                const firebaseUser = firebase.auth().currentUser;
                console.log('- Firebase user:', firebaseUser ? firebaseUser.email : 'No user');
            }
            
            // Manual fix attempt
            if (currentUser && subscriptionBtn) {
                const status = currentUser.subscription?.status || 'free';
                console.log('🔧 MANUAL FIX ATTEMPT:');
                console.log('- User status:', status);
                
                if (status === 'premium') {
                    console.log('- HIDING button for premium user');
                    subscriptionBtn.style.display = 'none';
                } else {
                    console.log('- SHOWING button for non-premium user');
                    subscriptionBtn.style.display = 'inline-flex';
                    subscriptionBtn.textContent = '💎 Go Premium';
                }
                
                // Show userStatus div if user is signed in
                if (userStatus) {
                    userStatus.style.display = 'flex';
                    console.log('- USER STATUS div set to flex');
                }
                
                console.log('- Button display after fix:', subscriptionBtn.style.display);
                console.log('- userStatus display after fix:', userStatus?.style.display);
            } else {
                console.log('❌ CANNOT FIX: Missing currentUser or subscriptionBtn element');
            }
            
            console.log('🔍 === END DEBUG ===');
        }

        // Test function to force show Go Premium button (for testing)
        window.forceShowGoPremiumButton = function() {
            console.log('🧪 FORCE SHOWING Go Premium button...');
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            const userStatus = document.getElementById('userStatus');
            
            if (subscriptionBtn && userStatus) {
                // Force show userStatus div
                userStatus.style.display = 'flex';
                // Force show subscription button
                subscriptionBtn.style.display = 'inline-flex';
                subscriptionBtn.style.visibility = 'visible';
                subscriptionBtn.textContent = '💎 Go Premium';
                
                console.log('✅ FORCED: userStatus display:', userStatus.style.display);
                console.log('✅ FORCED: subscriptionBtn display:', subscriptionBtn.style.display);
                console.log('✅ FORCED: subscriptionBtn visibility:', subscriptionBtn.style.visibility);
            } else {
                console.log('❌ CANNOT FORCE: Elements not found');
                console.log('- subscriptionBtn:', !!subscriptionBtn);
                console.log('- userStatus:', !!userStatus);
            }
        }

        // Test function to hide Go Premium button (for testing)
        window.forceHideGoPremiumButton = function() {
            console.log('🧪 FORCE HIDING Go Premium button...');
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            
            if (subscriptionBtn) {
                subscriptionBtn.style.display = 'none';
                console.log('✅ FORCED: subscriptionBtn hidden');
            } else {
                console.log('❌ CANNOT HIDE: Button not found');
            }
        }

        // Test function to verify Support Us button premium-only visibility
        window.testSupportUsPremiumVisibility = function() {
            console.log('🔍 === TESTING SUPPORT US PREMIUM VISIBILITY ===');
            
            const supportUsBtn = document.querySelector('.nav-donate');
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            
            if (currentUser) {
                const subscriptionStatus = currentUser.subscription?.status || 'free';
                const isVisible = supportUsBtn && window.getComputedStyle(supportUsBtn).display !== 'none';
                
                console.log('👤 Current User:', currentUser.name);
                console.log('📋 Subscription Status:', subscriptionStatus);
                console.log('👁️ Support Us Button Visible:', isVisible);
                
                if (subscriptionStatus === 'premium') {
                    console.log(isVisible ? '✅ CORRECT: Support Us button visible for premium user' : '❌ ERROR: Support Us button should be visible for premium user');
                } else {
                    console.log(isVisible ? '❌ ERROR: Support Us button should NOT be visible for non-premium user' : '✅ CORRECT: Support Us button hidden for non-premium user');
                }
            } else {
                console.log('👤 No signed-in user');
                const isVisible = supportUsBtn && window.getComputedStyle(supportUsBtn).display !== 'none';
                console.log(isVisible ? '❌ ERROR: Support Us button should NOT be visible for signed-out user' : '✅ CORRECT: Support Us button hidden for signed-out user');
            }
            
            console.log('🔍 === END SUPPORT US PREMIUM VISIBILITY TEST ===');
        }

        // Test function to verify Support Us button matches menu items
        window.testSupportUsMenuAlignment = function() {
            console.log('🔍 === TESTING SUPPORT US MENU ALIGNMENT ===');
            
            // Get menu item styling
            const menuLink = document.querySelector('.nav-links a');
            const supportUsBtn = document.querySelector('.nav-donate-btn');
            
            if (menuLink && supportUsBtn) {
                const menuStyles = window.getComputedStyle(menuLink);
                const supportStyles = window.getComputedStyle(supportUsBtn);
                
                console.log('📊 Menu Item Styles:');
                console.log('- Color:', menuStyles.color);
                console.log('- Font-size:', menuStyles.fontSize);
                console.log('- Font-weight:', menuStyles.fontWeight);
                console.log('- Padding:', menuStyles.padding);
                
                console.log('📊 Support Us Button Styles:');
                console.log('- Color:', supportStyles.color);
                console.log('- Font-size:', supportStyles.fontSize);
                console.log('- Font-weight:', supportStyles.fontWeight);
                console.log('- Padding:', supportStyles.padding);
                
                console.log('✅ Alignment Check:');
                console.log('- Colors match:', menuStyles.color === supportStyles.color);
                console.log('- Font sizes match:', menuStyles.fontSize === supportStyles.fontSize);
                console.log('- Font weights match:', menuStyles.fontWeight === supportStyles.fontWeight);
                
                // Check underline alignment
                const menuRect = menuLink.getBoundingClientRect();
                const supportRect = supportUsBtn.getBoundingClientRect();
                console.log('📐 Position Alignment:');
                console.log('- Menu baseline:', menuRect.bottom);
                console.log('- Support Us baseline:', supportRect.bottom);
                console.log('- Vertically aligned:', Math.abs(menuRect.bottom - supportRect.bottom) < 5);
                
            } else {
                console.log('❌ Could not find menu link or Support Us button');
            }
            
            console.log('🔍 === END SUPPORT US MENU ALIGNMENT TEST ===');
        }

        // Manual test functions for Support Us button visibility
        window.testSupportUsForPremium = function() {
            console.log('🧪 Testing Support Us button for premium user...');
            const donateBtn = document.querySelector('.nav-donate');
            if (donateBtn) {
                donateBtn.style.display = 'block';
                console.log('✅ Support Us button shown (simulating premium user)');
            }
        }

        window.testSupportUsForFree = function() {
            console.log('🧪 Testing Support Us button for free user...');
            const donateBtn = document.querySelector('.nav-donate');
            if (donateBtn) {
                donateBtn.style.display = 'none';
                console.log('❌ Support Us button hidden (simulating free user)');
            }
        }

        // COMPREHENSIVE TEST AND FIX for Go Premium button
        window.testAndFixGoPremiumButton = async function() {
            console.log('🔍 === COMPREHENSIVE GO PREMIUM BUTTON TEST ===');
            
            // Step 1: Check HTML elements
            const userStatus = document.getElementById('userStatus');
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            const userGreeting = document.getElementById('userGreeting');
            const signOutBtn = document.getElementById('signOutBtn');
            
            console.log('🧩 STEP 1 - DOM Elements:');
            console.log('- userStatus:', !!userStatus);
            console.log('- subscriptionBtn:', !!subscriptionBtn);
            console.log('- userGreeting:', !!userGreeting);
            console.log('- signOutBtn:', !!signOutBtn);
            
            if (!userStatus || !subscriptionBtn) {
                console.log('❌ CRITICAL: Missing essential DOM elements!');
                return;
            }
            
            // Step 2: Check authentication state
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            console.log('🧩 STEP 2 - Auth State:');
            console.log('- currentUser exists:', !!currentUser);
            console.log('- User email:', currentUser?.email);
            console.log('- Subscription status:', currentUser?.subscription?.status);
            
            // Step 3: Check Firebase state
            console.log('🧩 STEP 3 - Firebase State:');
            if (typeof firebase !== 'undefined' && firebase.auth) {
                const firebaseUser = firebase.auth().currentUser;
                console.log('- Firebase user:', firebaseUser ? firebaseUser.email : 'No user');
                
                if (firebaseUser) {
                    try {
                        const firestoreStatus = await getUserSubscriptionStatus(firebaseUser.uid);
                        console.log('- Firestore subscription status:', firestoreStatus);
                    } catch (error) {
                        console.log('- Firestore error:', error.message);
                    }
                }
            } else {
                console.log('- Firebase not available');
            }
            
            // Step 4: FORCE CORRECT UI STATE
            console.log('🔧 STEP 4 - FORCING CORRECT UI:');
            
            if (currentUser) {
                const subscriptionStatus = currentUser.subscription?.status || 'free';
                const userName = currentUser.name || currentUser.email?.split('@')[0] || 'User';
                
                console.log(`- Setting UI for signed-in ${subscriptionStatus} user: ${userName}`);
                
                // Show user status container
                userStatus.style.display = 'flex';
                console.log('✅ userStatus set to flex');
                
                // Set greeting
                if (userGreeting) {
                    userGreeting.textContent = `Welcome, ${userName}!`;
                    userGreeting.style.display = 'inline';
                    console.log('✅ userGreeting set');
                }
                
                // Handle Go Premium button based on subscription
                if (subscriptionStatus === 'premium') {
                    subscriptionBtn.style.display = 'none';
                    console.log('✅ Go Premium button HIDDEN for premium user');
                } else {
                    subscriptionBtn.style.display = 'inline-flex';
                    subscriptionBtn.style.visibility = 'visible';
                    subscriptionBtn.textContent = '💎 Go Premium';
                    console.log('✅ Go Premium button SHOWN for non-premium user');
                }
                
                // Show sign out button
                if (signOutBtn) {
                    signOutBtn.style.display = 'inline-block';
                    console.log('✅ Sign out button shown');
                }
                
                // Hide sign in/up buttons
                const signInBtn = document.getElementById('signInBtn');
                const signUpBtn = document.getElementById('signUpBtn');
                if (signInBtn) signInBtn.style.display = 'none';
                if (signUpBtn) signUpBtn.style.display = 'none';
                console.log('✅ Sign in/up buttons hidden');
                
            } else {
                console.log('- Setting UI for signed-out user');
                userStatus.style.display = 'none';
                console.log('✅ userStatus hidden for signed-out user');
            }
            
            // Step 5: Final verification
            console.log('🧩 STEP 5 - FINAL VERIFICATION:');
            console.log('- userStatus display:', userStatus.style.display);
            console.log('- subscriptionBtn display:', subscriptionBtn.style.display);
            console.log('- subscriptionBtn visibility:', subscriptionBtn.style.visibility);
            console.log('- subscriptionBtn text:', subscriptionBtn.textContent);
            
            console.log('🔍 === END COMPREHENSIVE TEST ===');
            
            // Return the current state for verification
            return {
                userSignedIn: !!currentUser,
                subscriptionStatus: currentUser?.subscription?.status || 'none',
                userStatusVisible: userStatus.style.display === 'flex',
                goPremiumVisible: subscriptionBtn.style.display === 'inline-flex'
            };
        }

        // SIMPLE FORCE FIX - manually show Go Premium button for testing
        window.simpleShowGoPremium = function() {
            console.log('🔧 SIMPLE FORCE: Showing Go Premium button...');
            
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            const userStatus = document.getElementById('userStatus');
            
            if (userStatus) {
                userStatus.style.display = 'flex';
                console.log('✅ userStatus forced to flex');
            }
            
            if (subscriptionBtn) {
                subscriptionBtn.style.display = 'inline-flex';
                subscriptionBtn.style.visibility = 'visible';
                subscriptionBtn.textContent = '💎 Go Premium';
                console.log('✅ Go Premium button forced to visible');
                console.log('✅ Final button display:', subscriptionBtn.style.display);
                console.log('✅ Final button visibility:', subscriptionBtn.style.visibility);
            } else {
                console.log('❌ subscriptionBtn element not found');
            }
        }

        // Ultimate debug and fix function for Go Premium button
        window.ultimateGoPremiumFix = async function() {
            console.log('🚨 === ULTIMATE GO PREMIUM DEBUG & FIX ===');
            
            // Step 1: Check all elements
            const userStatus = document.getElementById('userStatus');
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            const userGreeting = document.getElementById('userGreeting');
            const signInBtn = document.getElementById('signInBtn');
            const signUpBtn = document.getElementById('signUpBtn');
            const signOutBtn = document.getElementById('signOutBtn');
            
            console.log('🔍 STEP 1 - HTML Elements:');
            console.log('- userStatus:', !!userStatus, userStatus?.style.display);
            console.log('- subscriptionBtn:', !!subscriptionBtn, subscriptionBtn?.style.display);
            console.log('- userGreeting:', !!userGreeting, userGreeting?.textContent);
            console.log('- signInBtn:', !!signInBtn, signInBtn?.style.display);
            console.log('- signUpBtn:', !!signUpBtn, signUpBtn?.style.display);
            console.log('- signOutBtn:', !!signOutBtn, signOutBtn?.style.display);
            
            // Step 2: Check localStorage
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            console.log('🔍 STEP 2 - localStorage:');
            console.log('- currentUser:', currentUser);
            console.log('- subscription status:', currentUser?.subscription?.status);
            
            // Step 3: Check Firebase
            console.log('🔍 STEP 3 - Firebase:');
            if (typeof firebase !== 'undefined' && firebase.auth) {
                const firebaseUser = firebase.auth().currentUser;
                console.log('- Firebase user:', firebaseUser ? firebaseUser.email : 'No user');
                
                if (firebaseUser) {
                    try {
                        const subscriptionStatus = await getUserSubscriptionStatus(firebaseUser.uid);
                        console.log('- Fresh Firebase subscription status:', subscriptionStatus);
                        
                        // Step 4: FORCE CORRECT UI STATE
                        console.log('🔧 STEP 4 - FORCING CORRECT UI:');
                        
                        if (subscriptionStatus === 'premium') {
                            console.log('- User is PREMIUM - HIDING Go Premium button');
                            if (userStatus) userStatus.style.display = 'flex';
                            if (userGreeting) userGreeting.textContent = `Welcome, ${firebaseUser.displayName || firebaseUser.email.split('@')[0]}!`;
                            if (subscriptionBtn) subscriptionBtn.style.display = 'none';
                            if (signInBtn) signInBtn.style.display = 'none';
                            if (signUpBtn) signUpBtn.style.display = 'none';
                            if (signOutBtn) signOutBtn.style.display = 'inline-block';
                        } else {
                            console.log('- User is NON-PREMIUM - SHOWING Go Premium button');
                            if (userStatus) userStatus.style.display = 'flex';
                            if (userGreeting) userGreeting.textContent = `Welcome, ${firebaseUser.displayName || firebaseUser.email.split('@')[0]}!`;
                            if (subscriptionBtn) {
                                subscriptionBtn.style.display = 'inline-flex';
                                subscriptionBtn.textContent = '💎 Go Premium';
                            }
                            if (signInBtn) signInBtn.style.display = 'none';
                            if (signUpBtn) signUpBtn.style.display = 'none';
                            if (signOutBtn) signOutBtn.style.display = 'inline-block';
                        }
                        
                        console.log('✅ UI FORCED - Check the page now!');
                        console.log('- userStatus display:', userStatus?.style.display);
                        console.log('- subscriptionBtn display:', subscriptionBtn?.style.display);
                        
                    } catch (error) {
                        console.error('❌ Error getting Firebase subscription status:', error);
                    }
                }
            } else {
                console.log('- Firebase not available');
            }
            
            console.log('🚨 === END ULTIMATE DEBUG ===');
        }

        // Manual refresh function to force Firebase check (for debugging/user convenience)
        window.forceRefreshFromFirebase = async function() {
            console.log('🔄 MANUAL REFRESH: Forcing Firebase check...');
            
            try {
                if (typeof firebase !== 'undefined' && firebase.auth) {
                    const firebaseUser = firebase.auth().currentUser;
                    console.log('🔥 Manual refresh Firebase user:', firebaseUser ? firebaseUser.email : 'No user');
                    
                    if (firebaseUser) {
                        console.log('✅ Manual refresh: Fetching latest subscription status...');
                        const subscriptionStatus = await getUserSubscriptionStatus(firebaseUser.uid);
                        console.log('📊 Manual refresh subscription status:', subscriptionStatus);
                        
                        // Update localStorage with fresh data
                        const userData = {
                            email: firebaseUser.email,
                            name: firebaseUser.displayName || firebaseUser.email.split('@')[0],
                            uid: firebaseUser.uid,
                            subscription: { 
                                status: subscriptionStatus,
                                plan: subscriptionStatus === 'premium' ? 'monthly' : null 
                            },
                            lastUpdated: new Date().toISOString()
                        };
                        
                        localStorage.setItem('french_app_current_user', JSON.stringify(userData));
                        console.log('💾 Manual refresh: localStorage updated');
                        
                        // Force UI update
                        toggleAuthButtons(true, userData.name, subscriptionStatus);
                        updateMenuAccess();
                        
                        console.log('🎯 Manual refresh: Go Premium button should be:', subscriptionStatus === 'premium' ? 'HIDDEN' : 'VISIBLE');
                        console.log('✅ Manual refresh completed successfully');
                        
                        // Check if button is actually visible/hidden
                        const subscriptionBtn = document.getElementById('subscriptionBtn');
                        if (subscriptionBtn) {
                            console.log('🔘 Manual refresh: Go Premium button display style:', subscriptionBtn.style.display);
                            console.log('🔘 Manual refresh: Go Premium button is visible:', subscriptionBtn.style.display !== 'none');
                        }
                        
                    } else {
                        console.log('🚶 Manual refresh: No Firebase user');
                        localStorage.removeItem('french_app_current_user');
                        toggleAuthButtons(false);
                    }
                } else {
                    console.log('❌ Manual refresh: Firebase not available');
                }
            } catch (error) {
                console.error('❌ Manual refresh error:', error);
            }
        }

        // Debug function to manually check authentication state
        window.debugAuthState = function() {
            console.log('🔍 MANUAL AUTH DEBUG:');
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            console.log('- localStorage user:', currentUser);
            
            // Check Firebase user
            if (typeof firebase !== 'undefined' && firebase.auth) {
                const firebaseUser = firebase.auth().currentUser;
                console.log('- Firebase user:', firebaseUser ? firebaseUser.email : 'none');
                console.log('- Firebase vs localStorage match:', 
                    firebaseUser?.email === currentUser?.email);
            }
            
            const authButtons = document.querySelector('.auth-buttons');
            console.log('- Auth buttons container:', !!authButtons);
            
            if (authButtons) {
                const signInBtn = authButtons.querySelector('.sign-in-btn');
                const signUpBtn = authButtons.querySelector('.sign-up-btn');
                const signOutBtn = document.getElementById('signOutBtn');
                
                console.log('- Sign-in button:', !!signInBtn, 'display:', signInBtn?.style.display);
                console.log('- Sign-up button:', !!signUpBtn, 'display:', signUpBtn?.style.display);
                console.log('- Sign-out button:', !!signOutBtn, 'display:', signOutBtn?.style.display);
            }
            
            const userStatus = document.getElementById('userStatus');
            console.log('- User status element:', !!userStatus, 'display:', userStatus?.style.display);
            
            console.log('🎯 Manually calling toggleAuthButtons...');
            if (currentUser) {
                toggleAuthButtons(true, currentUser.name, currentUser.subscription?.status || 'free');
            } else {
                toggleAuthButtons(false);
            }
        }
        
        // Function to force Firebase auth sync
        window.forceFirebaseSync = function() {
            console.log('🔄 FORCING FIREBASE SYNC...');
            if (typeof firebase !== 'undefined' && firebase.auth) {
                const firebaseUser = firebase.auth().currentUser;
                console.log('🔥 Current Firebase user:', firebaseUser ? firebaseUser.email : 'none');
                
                if (firebaseUser) {
                    console.log('✅ Firebase user found - triggering manual sync');
                    // Manually trigger the auth state changed handler
                    firebase.auth().onAuthStateChanged(async function(user) {
                        if (user) {
                            console.log('🔄 Manual auth state sync triggered for:', user.email);
                            const subscriptionStatus = await getUserSubscriptionStatus(user.uid);
                            
                            const userData = {
                                email: user.email,
                                name: user.displayName || user.email,
                                subscription: { status: subscriptionStatus }
                            };
                            
                            localStorage.setItem('french_app_current_user', JSON.stringify(userData));
                            toggleAuthButtons(true, userData.name, subscriptionStatus);
                            console.log('✅ Manual sync completed');
                        }
                    });
                } else {
                    console.log('❌ No Firebase user to sync');
                }
            } else {
                console.log('❌ Firebase not available');
            }
        }

        // Manual Firebase refresh function (simplified)
        window.refreshFromFirebase = async function() {
            console.log('🔄 Manual Firebase refresh triggered...');
            
            try {
                const firebaseUser = firebase.auth().currentUser;
                if (!firebaseUser) {
                    console.log('❌ No Firebase user authenticated');
                    alert('❌ No Firebase user authenticated');
                    return;
                }

                const subscriptionStatus = await getUserSubscriptionStatus(firebaseUser.uid);
                console.log('✅ Fresh subscription status:', subscriptionStatus);
                
                // Update UI
                const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
                if (currentUser) {
                    currentUser.subscription.status = subscriptionStatus;
                    localStorage.setItem('french_app_current_user', JSON.stringify(currentUser));
                    toggleAuthButtons(true, currentUser.name, subscriptionStatus);
                }
                
                alert(`✅ Subscription status refreshed: ${subscriptionStatus}`);
            } catch (error) {
                console.error('❌ Error refreshing subscription:', error);
                alert('❌ Failed to refresh subscription status');
            }
        }

        // Function to get validated subscription status from Firebase (copied from index.html)
        async function getUserSubscriptionStatus(userId) {
            try {
                console.log('🔍 getUserSubscriptionStatus called for userId:', userId);
                const doc = await firebase.firestore().collection('users').doc(userId).get();
                
                if (doc.exists) {
                    const userData = doc.data();
                    console.log('📄 User document exists, data:', userData);
                    const subscription = userData.subscription || { status: 'free' };
                    console.log('📋 Subscription data:', subscription);
                    
                    // Check if subscription is expired
                    if (subscription.status === 'premium' && subscription.endDate) {
                        const endDate = subscription.endDate.toDate ? subscription.endDate.toDate() : new Date(subscription.endDate);
                        console.log('📅 Checking expiration - endDate:', endDate, 'now:', new Date());
                        if (endDate < new Date()) {
                            console.log('⏰ Subscription expired, updating to expired status');
                            // Update status to expired
                            await firebase.firestore().collection('users').doc(userId).update({
                                'subscription.status': 'expired',
                                'subscription.active': false
                            });
                            return 'expired';
                        }
                    }
                    
                    const finalStatus = subscription.status || 'free';
                    console.log('✅ Final subscription status determined:', finalStatus);
                    return finalStatus;
                }
                
                console.log('📄 User document does not exist, returning free status');
                return 'free';
            } catch (error) {
                console.error('❌ Error getting subscription status:', error);
                return 'free';
            }
        }

        // Global debug function to manually test premium button hiding
        window.testPremiumButtonHiding = function() {
            console.log('🧪 Testing premium button hiding...');
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            if (subscriptionBtn) {
                console.log('🔍 Current button state:', {
                    display: subscriptionBtn.style.display,
                    visibility: subscriptionBtn.style.visibility,
                    isVisible: subscriptionBtn.offsetWidth > 0 && subscriptionBtn.offsetHeight > 0,
                    centralizedState: subscriptionButtonState
                });
                
                // Use centralized controller for testing
                setSubscriptionButtonState(false, 'manual test hiding');
                console.log('✅ Button hidden using centralized controller');
                
                setTimeout(() => {
                    console.log('🔍 After hiding:', {
                        display: subscriptionBtn.style.display,
                        visibility: subscriptionBtn.style.visibility,
                        isVisible: subscriptionBtn.offsetWidth > 0 && subscriptionBtn.offsetHeight > 0,
                        centralizedState: subscriptionButtonState
                    });
                }, 100);
            } else {
                console.log('❌ Subscription button not found');
            }
        }

        // Additional debug function to show current button controller state
        window.checkButtonState = function() {
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            console.log('🔍 Button Controller State:', {
                centralizedState: subscriptionButtonState,
                controlLock: buttonControlLock,
                actualDisplay: subscriptionBtn?.style.display,
                actualVisibility: subscriptionBtn?.style.visibility,
                isVisible: subscriptionBtn ? (subscriptionBtn.offsetWidth > 0 && subscriptionBtn.offsetHeight > 0) : false,
                userSubscriptionStatus: currentUser?.subscription?.status,
                isPremiumUser: isPremiumUser,
                buttonExists: !!subscriptionBtn
            });
        }

        // Override console.log temporarily to catch any unexpected button manipulations
        if (isPremiumUser) {
            const originalConsoleLog = console.log;
            console.log = function(...args) {
                // Check if any log mentions subscription button
                const logText = args.join(' ').toLowerCase();
                if (logText.includes('subscription') || logText.includes('premium') || logText.includes('button')) {
                    originalConsoleLog.apply(console, ['📝 TRACKED:', ...args]);
                    
                    // Check button state after any subscription-related log
                    setTimeout(() => {
                        const subscriptionBtn = document.getElementById('subscriptionBtn');
                        if (subscriptionBtn && (subscriptionBtn.style.display !== 'none' || subscriptionBtn.style.visibility !== 'hidden')) {
                            originalConsoleLog('🚨 BUTTON-TRACKER: Button unexpectedly visible after:', args[0]);
                            subscriptionBtn.style.display = 'none';
                            subscriptionBtn.style.visibility = 'hidden';
                        }
                    }, 10);
                } else {
                    originalConsoleLog.apply(console, args);
                }
            };
            
            // Restore original console.log after 10 seconds
            setTimeout(() => {
                console.log = originalConsoleLog;
                console.log('🔌 BUTTON-TRACKER: Console monitoring disabled');
            }, 10000);
        }

        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
        }

        function showSuccess(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
        }

        // Function to handle numbers feature access
        function handleNumbersAccess(event, targetUrl = null) {
            event.preventDefault();
            
            // Default targetUrl if none provided
            if (!targetUrl) {
                targetUrl = 'French-Numbers.html';
            }
            
            console.log('🔢 handleNumbersAccess called from French-Verbs.html:', {
                hasTargetUrl: !!targetUrl,
                targetUrl: targetUrl,
                clickedElement: event.target.textContent.trim()
            });
            
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            
            if (!currentUser) {
                // Not signed in
                console.log('❌ User not signed in');
                alert('🔐 Please sign in first to access French Numbers.\n\nThis is a premium feature that requires an account.');
                openSignInModal();
                return false;
            }
            
            console.log('👤 User found:', {
                email: currentUser.email,
                subscriptionStatus: currentUser.subscription?.status
            });
            
            if (currentUser.subscription?.status === 'premium') {
                // Premium user - allow access
                console.log('✅ Premium user detected, navigating to:', targetUrl);
                
                try {
                    // Multiple navigation methods for reliability
                    if (targetUrl) {
                        console.log('🚀 Attempting navigation...');
                        
                        // Method 1: Direct navigation
                        window.location.href = targetUrl;
                        
                        // Method 2: Fallback with timeout
                        setTimeout(() => {
                            if (window.location.href.indexOf(targetUrl) === -1) {
                                console.log('🔄 Fallback navigation attempt...');
                                window.location.assign(targetUrl);
                            }
                        }, 100);
                        
                        // Method 3: Ultimate fallback
                        setTimeout(() => {
                            if (window.location.href.indexOf(targetUrl) === -1) {
                                console.log('🆘 Final fallback navigation attempt...');
                                window.open(targetUrl, '_self');
                            }
                        }, 500);
                        
                        console.log('✅ Navigation initiated successfully');
                    } else {
                        console.log('❌ No targetUrl provided for navigation');
                    }
                } catch (error) {
                    console.error('❌ Navigation error:', error);
                    alert('Navigation error occurred. Please try refreshing the page.');
                }
                
                return true;
            } else {
                // Free user - show premium prompt
                console.log('🔒 Free user, showing premium prompt');
                alert('🔒 Premium Feature Required\n\n"French Numbers" is available exclusively for Premium subscribers.\n\nUpgrade to Premium to unlock:\n\n✨ Complete French Numbers (1-100)\n✨ Pronunciation guides\n✨ Interactive exercises\n✨ Audio practice\n✨ All future content updates');
                
                // Open subscription modal directly
                openSubscriptionModal();
                return false;
            }
        }

        // localStorage-based authentication (demo mode)
        async function handleSignUp(event) {
            event.preventDefault();
            
            // Clear any existing error messages first
            clearMessages();
            
            const email = document.getElementById('signUpEmail').value;
            const password = document.getElementById('signUpPassword').value;
            const name = document.getElementById('signUpName').value;
            const country = document.getElementById('signUpCountry').value;
            
            // Basic validation
            if (!email || !password || !name || !country) {
                showError('signUpError', 'Please fill in all fields.');
                return;
            }
            
            if (password.length < 6) {
                showError('signUpError', 'Password must be at least 6 characters long.');
                return;
            }
            
            console.log('✅ Form validation passed');
            
            const signUpBtn = document.getElementById('signUpBtn');
            const signUpBtnText = document.getElementById('signUpBtnText');
            const signUpSpinner = document.getElementById('signUpSpinner');
            
            try {
                // Show loading state
                signUpBtn.disabled = true;
                signUpBtnText.style.display = 'none';
                signUpSpinner.style.display = 'inline-block';
                
                console.log('🔐 Starting Firebase signup for:', email);
                
                const user = await firebaseSignUp(email, password, name, country);
                
                // Store user data in localStorage
                const userData = {
                    email: user.email,
                    name: name,
                    country: country,
                    uid: user.uid,
                    subscription: { status: 'free' }
                };
                localStorage.setItem('french_app_current_user', JSON.stringify(userData));
                
                showSuccess('signUpSuccess', 'Account created successfully!');
                setTimeout(() => {
                    closeModal('signUpModal');
                    toggleAuthButtons(true, name, 'free');
                }, 1500);
                
            } catch (error) {
                console.error('Sign up error:', error);
                showError('signUpError', error.message);
            } finally {
                // Reset button state
                signUpBtn.disabled = false;
                signUpBtnText.style.display = 'inline';
                signUpSpinner.style.display = 'none';
            }
        }

        async function handleSignIn(event) {
            event.preventDefault();
            
            // Clear any existing error messages first
            clearMessages();
            
            const email = document.getElementById('signInEmail').value;
            const password = document.getElementById('signInPassword').value;
            
            // Basic validation
            if (!email || !password) {
                showError('signInError', 'Please fill in all fields.');
                return;
            }
            
            console.log('✅ Form validation passed for:', email);
            
            const signInBtn = document.getElementById('signInBtn');
            const signInBtnText = document.getElementById('signInBtnText');
            const signInSpinner = document.getElementById('signInSpinner');
            
            try {
                // Show loading state
                signInBtn.disabled = true;
                signInBtnText.style.display = 'none';
                signInSpinner.style.display = 'inline-block';
                
                console.log('🔐 Starting Firebase authentication for:', email);
                const userCredential = await firebaseSignIn(email, password);
                const user = userCredential.user;
                console.log('✅ Firebase authentication successful:', user.email);
                
                // Get user data from Firestore (in separate try-catch to avoid interference)
                let userData = {
                    email: user.email,
                    name: user.displayName || user.email.split('@')[0],
                    subscription: { status: 'free' }
                };
                
                try {
                    const userDoc = await db.collection('users').doc(user.uid).get();
                    if (userDoc.exists) {
                        userData = { ...userData, ...userDoc.data() };
                        console.log('✅ Firestore user data retrieved:', userData);
                    } else {
                        console.log('ℹ️ No Firestore document found, using defaults');
                    }
                } catch (firestoreError) {
                    console.log('⚠️ Firestore operation failed, using defaults:', firestoreError.message);
                    // Don't show error to user, just use default data
                }
                
                // Store in localStorage
                const localUserData = {
                    email: user.email,
                    name: userData.name,
                    country: userData.country || 'US',
                    uid: user.uid,
                    subscription: userData.subscription || { status: 'free' }
                };
                localStorage.setItem('french_app_current_user', JSON.stringify(localUserData));
                
                showSuccess('signInSuccess', 'Successfully signed in! Welcome back!');
                
                setTimeout(() => {
                    closeModal('signInModal');
                    toggleAuthButtons(true, localUserData.name, localUserData.subscription?.status || 'free');
                    // Update subscription pricing based on user's country (silently)
                    try {
                        updateSubscriptionPricingForUser();
                    } catch (pricingError) {
                        console.log('⚠️ Pricing update failed silently, using defaults');
                    }
                }, 1500);
                
                // Additional safeguard: Clear any error messages that might appear after success
                setTimeout(() => {
                    const errorElements = document.querySelectorAll('.error-message');
                    errorElements.forEach(el => {
                        el.style.display = 'none';
                        el.textContent = '';
                    });
                }, 2500);
                
            } catch (error) {
                console.error('❌ Sign-in error:', error);
                
                // Provide user-friendly error messages
                let errorMessage = 'Sign-in failed. Please try again.';
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'No account found with this email address.';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'Incorrect password. Please try again.';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Please enter a valid email address.';
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = 'Too many failed attempts. Please try again later.';
                }
                
                showError('signInError', errorMessage);
            } finally {
                // Reset button state
                signInBtn.disabled = false;
                signInBtnText.style.display = 'inline';
                signInSpinner.style.display = 'none';
            }
        }

        // OLD checkAuthStatus function - REPLACED with window.load pattern like other pages
        // This function is no longer used but kept for reference
        /*
        function checkAuthStatus() {
            // This was causing timing issues - replaced with window.load pattern
        }
        */

          // Global Firebase error handler to prevent error flashing
        window.addEventListener('unhandledrejection', function(event) {
            if (event.reason && event.reason.message && 
                (event.reason.message.includes('Firebase') || 
                 event.reason.message.includes('auth/') ||
                 event.reason.message.includes('firestore'))) {
                console.warn('🛡️ Caught unhandled Firebase error:', event.reason.message);
                event.preventDefault(); // Prevent the error from showing to user
            }
        });
        
        // Firebase auth state listener (EXACT COPY from index.html)
        if (typeof firebase !== 'undefined' && firebase.auth) {
            console.log('🔥 Setting up Firebase auth state listener on verb page');
            firebase.auth().onAuthStateChanged(async function(user) {
                console.log('🔄 Firebase onAuthStateChanged triggered on VERB PAGE:', {
                    hasUser: !!user,
                    userEmail: user?.email,
                    currentUrl: window.location.href,
                    timestamp: new Date().toISOString()
                });

                // CRITICAL: Check for sign-out flags before doing anything
                const urlParams = new URLSearchParams(window.location.search);
                const sessionFlags = {
                    signedOut: urlParams.get('signedOut') === 'true' || urlParams.get('firebaseSignedOut') === 'true',
                    forceGuest: urlParams.get('forceGuest') === 'true',
                    justSignedOut: sessionStorage.getItem('just_signed_out') === 'true',
                    firebaseSignedOut: sessionStorage.getItem('firebase_signed_out') === 'true',
                    forceGuestState: sessionStorage.getItem('force_guest_state') === 'true'
                };

                const isSignOutProcess = Object.values(sessionFlags).some(flag => flag) || window.FORCE_GUEST_MODE;

                console.log('🔍 Sign-out flags check:', sessionFlags, 'isSignOutProcess:', isSignOutProcess);

                if (isSignOutProcess) {
                    console.log('🚫 SIGN-OUT PROCESS DETECTED - onAuthStateChanged will NOT restore localStorage');
                    
                    // If there's still a Firebase user during sign-out process, sign them out
                    if (user) {
                        console.log('⚠️ Firebase user still exists during sign-out process, force signing out...');
                        firebase.auth().signOut().catch(error => {
                            console.log('Firebase sign-out error in onAuthStateChanged (ignored):', error);
                        });
                    }
                    
                    // Ensure localStorage is cleared and UI is in guest state
                    localStorage.removeItem('french_app_current_user');
                    if (typeof toggleAuthButtons === 'function') {
                        toggleAuthButtons(false);
                    }
                    return; // STOP HERE - do not restore localStorage
                }

                if (user) {
                    console.log('✅ Valid user sign-in detected - syncing localStorage...');
                    // User is signed in - get their subscription status and sync localStorage
                    try {
                        const subscriptionStatus = await getUserSubscriptionStatus(user.uid);
                        
                        // Ensure localStorage is synced with Firebase user data
                        const doc = await firebase.firestore().collection('users').doc(user.uid).get();
                        let userData = {
                            email: user.email,
                            name: user.displayName || user.email,
                            country: null, // Default to null, will be set from Firestore if available
                            registeredAt: new Date().toISOString(),
                            subscription: {
                                status: subscriptionStatus,
                                plan: null,
                                startDate: null,
                                endDate: null
                            }
                        };
                        
                        if (doc.exists) {
                            const firestoreData = doc.data();
                            // Use the subscription status determined by getUserSubscriptionStatus, not raw Firestore data
                            // This ensures proper expiration checking and status validation
                            userData.subscription = {
                                status: subscriptionStatus, // Use the validated status from getUserSubscriptionStatus
                                plan: firestoreData.subscription?.plan || null,
                                startDate: firestoreData.subscription?.startDate || null,
                                endDate: firestoreData.subscription?.endDate || null,
                                active: firestoreData.subscription?.active || false,
                                paymentMethod: firestoreData.subscription?.paymentMethod || null
                            };
                            userData.name = firestoreData.name || userData.name;
                            userData.country = firestoreData.country || null; // Retrieve country from Firestore
                            userData.registeredAt = firestoreData.createdAt ? firestoreData.createdAt.toDate().toISOString() : userData.registeredAt;
                        }
                        
                        localStorage.setItem('french_app_current_user', JSON.stringify(userData));
                        if (typeof toggleAuthButtons === 'function') {
                            toggleAuthButtons(true, user.displayName || user.email, userData.subscription.status);
                        }
                        
                        console.log('✅ localStorage synced for authenticated user');
                    } catch (error) {
                        console.error('Error getting user subscription:', error);
                        // Still create basic localStorage entry
                        const userData = {
                            email: user.email,
                            name: user.displayName || user.email,
                            country: null, // No country data available in error case
                            registeredAt: new Date().toISOString(),
                            subscription: { status: 'free', plan: null, startDate: null, endDate: null }
                        };
                        localStorage.setItem('french_app_current_user', JSON.stringify(userData));
                        if (typeof toggleAuthButtons === 'function') {
                            toggleAuthButtons(true, user.displayName || user.email, 'free');
                        }
                    }
                } else {
                    console.log('🚫 No Firebase user - clearing localStorage and setting guest state');
                    // User is signed out - clear localStorage
                    localStorage.removeItem('french_app_current_user');
                    if (typeof toggleAuthButtons === 'function') {
                        toggleAuthButtons(false);
                    }
                }
            }, function(error) {
                console.warn('🛡️ Auth state change error caught silently:', error.message);
                // Don't let this error bubble up to user
            });
        }

                // Initialize form event listeners when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            const signUpForm = document.getElementById('signUpForm');
            const signInForm = document.getElementById('signInForm');
            
            if (signUpForm) {
                signUpForm.addEventListener('submit', handleSignUp);
            }
            
            if (signInForm) {
                signInForm.addEventListener('submit', handleSignIn);
            }
        });
            
        // FIREBASE-FIRST: Check Firebase auth and Firestore on every page load/refresh
        window.addEventListener('load', async function() {
            console.log('🌐 Window load event fired on verb page - checking Firebase auth');
            
            // IMMEDIATE STATUS CHECK
            console.log('⚡ IMMEDIATE STATUS CHECK:');
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            console.log('- localStorage user:', currentUser);
            console.log('- User signed in?:', !!currentUser);
            console.log('- Subscription status:', currentUser?.subscription?.status);
            
            const subscriptionBtn = document.getElementById('subscriptionBtn');
            const userStatus = document.getElementById('userStatus');
            console.log('- subscriptionBtn element:', !!subscriptionBtn);
            console.log('- userStatus element:', !!userStatus);
            console.log('- subscriptionBtn display:', subscriptionBtn?.style.display);
            console.log('- userStatus display:', userStatus?.style.display);
            
            try {
                // Check Firebase initialization first
                console.log('🔥 Firebase check:', {
                    firebaseExists: typeof firebase !== 'undefined',
                    authExists: typeof firebase !== 'undefined' && !!firebase.auth,
                    firestoreExists: typeof firebase !== 'undefined' && !!firebase.firestore
                });
                
                // Priority 1: Check Firebase authentication status first
                if (typeof firebase !== 'undefined' && firebase.auth) {
                    const firebaseUser = firebase.auth().currentUser;
                    console.log('🔥 Firebase user check:', firebaseUser ? firebaseUser.email : 'No user');
                    
                    if (firebaseUser) {
                        console.log('✅ Firebase user found, fetching latest subscription status...');
                        
                        // Fetch FRESH subscription status from Firestore
                        const subscriptionStatus = await getUserSubscriptionStatus(firebaseUser.uid);
                        console.log('📊 Fresh subscription status from Firestore:', subscriptionStatus);
                        
                        // Create/update localStorage with fresh data
                        const userData = {
                            email: firebaseUser.email,
                            name: firebaseUser.displayName || firebaseUser.email.split('@')[0],
                            uid: firebaseUser.uid,
                            subscription: { 
                                status: subscriptionStatus,
                                plan: subscriptionStatus === 'premium' ? 'monthly' : null 
                            },
                            lastUpdated: new Date().toISOString()
                        };
                        
                        localStorage.setItem('french_app_current_user', JSON.stringify(userData));
                        console.log('💾 localStorage updated with fresh Firebase data');
                        
                        // Update UI with fresh subscription status
                        toggleAuthButtons(true, userData.name, subscriptionStatus);
                        
                        console.log('🎯 Go Premium button should be:', subscriptionStatus === 'premium' ? 'HIDDEN' : 'VISIBLE');
                        
                        // FORCE CORRECT UI STATE (immediate fix)
                        const subscriptionBtn = document.getElementById('subscriptionBtn');
                        const userStatus = document.getElementById('userStatus');
                        
                        if (userStatus) {
                            userStatus.style.display = 'flex';
                            console.log('🔧 FORCED: userStatus shown');
                        }
                        
                        if (subscriptionBtn) {
                            if (subscriptionStatus === 'premium') {
                                subscriptionBtn.style.display = 'none';
                                console.log('🔧 FORCED: Go Premium button hidden (premium user)');
                            } else {
                                subscriptionBtn.style.display = 'inline-flex';
                                subscriptionBtn.textContent = '💎 Go Premium';
                                console.log('🔧 FORCED: Go Premium button shown (non-premium user)');
                            }
                        }
                        
                        // Debug: Check if button is actually visible after UI update
                        setTimeout(() => {
                            const subscriptionBtn = document.getElementById('subscriptionBtn');
                            if (subscriptionBtn) {
                                console.log('🔘 VERIFICATION: Go Premium button display style:', subscriptionBtn.style.display);
                                console.log('🔘 VERIFICATION: Go Premium button is actually visible:', subscriptionBtn.style.display !== 'none');
                                console.log('🔘 VERIFICATION: User status div display:', document.getElementById('userStatus')?.style.display);
                            } else {
                                console.log('❌ VERIFICATION: Go Premium button element not found!');
                            }
                            
                            // Run comprehensive debug and fix
                            if (typeof window.testAndFixGoPremiumButton === 'function') {
                                setTimeout(async () => {
                                    await window.testAndFixGoPremiumButton();
                                }, 100);
                            }
                        }, 200);
                        
                    } else {
                        console.log('🚶 No Firebase user - guest mode');
                        localStorage.removeItem('french_app_current_user');
                        toggleAuthButtons(false);
                    }
                } else {
                    console.log('⚠️ Firebase not available, checking localStorage fallback');
                    const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
                    if (currentUser) {
                        console.log('📄 Using localStorage fallback - user found:', currentUser.email);
                        toggleAuthButtons(true, currentUser.name, currentUser.subscription?.status || 'free');
                        
                        // Additional fallback: ensure button is shown for signed-in users (IMMEDIATE)
                        const subscriptionBtn = document.getElementById('subscriptionBtn');
                        const userStatus = document.getElementById('userStatus');
                        
                        if (userStatus) {
                            userStatus.style.display = 'flex';
                            console.log('🔧 FALLBACK: userStatus set to flex');
                        }
                        
                        if (subscriptionBtn) {
                            if (currentUser.subscription?.status === 'premium') {
                                subscriptionBtn.style.display = 'none';
                                console.log('🔧 FALLBACK: Go Premium button hidden (premium user)');
                            } else {
                                subscriptionBtn.style.display = 'inline-flex';
                                subscriptionBtn.textContent = '💎 Go Premium';
                                console.log('🔧 FALLBACK: Go Premium button shown for non-premium user');
                            }
                        }
                        
                        console.log('🔧 FALLBACK IMMEDIATE: subscriptionBtn display:', subscriptionBtn?.style.display);
                        console.log('🔧 FALLBACK IMMEDIATE: userStatus display:', userStatus?.style.display);
                    } else {
                        console.log('📄 Using localStorage fallback - no user found');
                        toggleAuthButtons(false);
                    }
                }
                
                // Update menu access after UI update
                setTimeout(() => {
                    updateMenuAccess();
                }, 100);
                
                // Auto-test after 3 seconds to ensure Go Premium button is working
                setTimeout(async () => {
                    console.log('🧪 AUTO-TEST: Checking Go Premium button after 3 seconds...');
                    if (typeof window.testAndFixGoPremiumButton === 'function') {
                        const result = await window.testAndFixGoPremiumButton();
                        console.log('🧪 AUTO-TEST RESULT:', result);
                        
                        if (result && result.userSignedIn && result.subscriptionStatus === 'free' && !result.goPremiumVisible) {
                            console.log('🚨 AUTO-FIX: Go Premium button should be visible but is not - forcing fix...');
                            const subscriptionBtn = document.getElementById('subscriptionBtn');
                            const userStatus = document.getElementById('userStatus');
                            
                            if (userStatus) userStatus.style.display = 'flex';
                            if (subscriptionBtn) {
                                subscriptionBtn.style.display = 'inline-flex';
                                subscriptionBtn.textContent = '💎 Go Premium';
                            }
                            console.log('🚨 AUTO-FIX: Applied emergency fix');
                        }
                                         }
                     
                     // Test Support Us button alignment with menu items
                     if (typeof window.testSupportUsMenuAlignment === 'function') {
                         setTimeout(() => {
                             window.testSupportUsMenuAlignment();
                         }, 1000);
                     }
                     
                     // Test Support Us button premium-only visibility
                     if (typeof window.testSupportUsPremiumVisibility === 'function') {
                         setTimeout(() => {
                             window.testSupportUsPremiumVisibility();
                         }, 1500);
                     }
                 }, 3000);
                
            } catch (error) {
                console.error('❌ Error during Firebase check on page load:', error);
                // Fallback to localStorage if Firebase fails
                const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
                if (currentUser) {
                    toggleAuthButtons(true, currentUser.name, currentUser.subscription?.status || 'free');
                } else {
                    toggleAuthButtons(false);
                }
                updateMenuAccess();
            }
        });
        
        // Handle browser back/forward navigation with Firebase check
        window.addEventListener('pageshow', async function(event) {
            console.log('🔄 pageshow event triggered on verb page');
            
            // Small delay to prevent conflicts with load event
            setTimeout(async () => {
                try {
                    if (typeof firebase !== 'undefined' && firebase.auth) {
                        const firebaseUser = firebase.auth().currentUser;
                        console.log('🔥 pageshow Firebase user check:', firebaseUser ? firebaseUser.email : 'No user');
                        
                        if (firebaseUser) {
                            console.log('✅ pageshow: Firebase user found, fetching latest subscription status...');
                            const subscriptionStatus = await getUserSubscriptionStatus(firebaseUser.uid);
                            console.log('📊 pageshow fresh subscription status:', subscriptionStatus);
                            
                            toggleAuthButtons(true, firebaseUser.displayName || firebaseUser.email.split('@')[0], subscriptionStatus);
                        } else {
                            console.log('🚶 pageshow: No Firebase user');
                            toggleAuthButtons(false);
                        }
                    } else {
                        // Fallback to localStorage
                        const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
                        if (currentUser) {
                            toggleAuthButtons(true, currentUser.name, currentUser.subscription?.status || 'free');
                        } else {
                            toggleAuthButtons(false);
                        }
                    }
                    updateMenuAccess();
                } catch (error) {
                    console.error('❌ Error during pageshow Firebase check:', error);
                    // Fallback to localStorage
                    const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
                    if (currentUser) {
                        toggleAuthButtons(true, currentUser.name, currentUser.subscription?.status || 'free');
                    } else {
                        toggleAuthButtons(false);
                    }
                    updateMenuAccess();
                }
            }, 30);
        });
        
        // Listen for localStorage changes from other tabs/pages AND check Firebase
        window.addEventListener('storage', async function(event) {
            if (event.key === 'french_app_current_user') {
                console.log('🔄 localStorage changed from another tab:', event.newValue);
                
                // Always verify with Firebase to ensure consistency
                try {
                    if (typeof firebase !== 'undefined' && firebase.auth) {
                        const firebaseUser = firebase.auth().currentUser;
                        
                        if (firebaseUser) {
                            console.log('🔥 Cross-tab sync: Re-checking Firebase subscription status...');
                            const subscriptionStatus = await getUserSubscriptionStatus(firebaseUser.uid);
                            console.log('📊 Cross-tab fresh subscription status:', subscriptionStatus);
                            
                            toggleAuthButtons(true, firebaseUser.displayName || firebaseUser.email.split('@')[0], subscriptionStatus);
                        } else {
                            console.log('🚶 Cross-tab sync: No Firebase user');
                            toggleAuthButtons(false);
                        }
                    } else {
                        // Fallback to localStorage if Firebase not available
                        const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
                        if (currentUser) {
                            toggleAuthButtons(true, currentUser.name, currentUser.subscription?.status || 'free');
                        } else {
                            toggleAuthButtons(false);
                        }
                    }
                } catch (error) {
                    console.error('❌ Error during cross-tab Firebase check:', error);
                    // Fallback to localStorage
                    const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
                    if (currentUser) {
                        toggleAuthButtons(true, currentUser.name, currentUser.subscription?.status || 'free');
                    } else {
                        toggleAuthButtons(false);
                    }
                }
                
                updateMenuAccess();
            }
        });
        
        // Function to check if current user has premium access (copied from other pages)
        function isPremiumUser() {
            const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || 'null');
            return currentUser && currentUser.subscription?.status === 'premium';
        }

        // Function to update menu access based on subscription status (copied from other pages)
        function updateMenuAccess() {
            const isSignedIn = JSON.parse(localStorage.getItem('french_app_current_user') || 'null') !== null;
            const isPremium = isPremiumUser();
            
            // Get numbers menu elements
            const numbersLinks = document.querySelectorAll('[data-feature="numbers"] a, [data-feature="numbers-submenu"] a');
            
            if (numbersLinks.length > 0) {
                // Remove existing classes
                numbersLinks.forEach(link => {
                    link.classList.remove('premium-feature', 'premium-locked');
                });
                
                if (!isSignedIn) {
                    // Not signed in - show locked state
                    numbersLinks.forEach(link => {
                        link.classList.add('premium-locked');
                        link.title = 'Please sign in to access this premium feature';
                    });
                } else if (isPremium) {
                    // Premium user - full access with premium styling
                    numbersLinks.forEach(link => {
                        link.classList.add('premium-feature');
                        link.title = 'French Numbers - Premium Feature (You have access)';
                    });
                } else {
                    // Free user - show locked premium state
                    numbersLinks.forEach(link => {
                        link.classList.add('premium-locked');
                        link.title = 'Premium Feature - Click to upgrade and unlock French Numbers';
                    });
                }
            }
        }

        function clearMessages() {
            document.querySelectorAll('.error-message, .success-message').forEach(msg => {
                msg.style.display = 'none';
                msg.textContent = '';
            });
        }

        // Subscription Functions
        async function selectPlan(planType) {
            console.log('🎯 Plan selected:', planType);
            
            try {
                selectedPlan = planType;
                
                // Clear any existing error messages
                clearMessages();
                
                // Update UI - remove selected class from all cards
                document.querySelectorAll('.plan-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                // Add selected class to the chosen plan
                const selectedCard = document.getElementById(planType + 'Plan');
                if (selectedCard) {
                    selectedCard.classList.add('selected');
                    console.log('✅ Plan card updated:', planType + 'Plan');
                } else {
                    console.error('❌ Could not find plan card:', planType + 'Plan');
                }
                
                // Show payment section with smooth transition
                const paymentSection = document.getElementById('paymentSection');
                if (paymentSection) {
                    paymentSection.style.display = 'block';
                    paymentSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    console.log('✅ Payment section shown');
                } else {
                    console.error('❌ Could not find payment section');
                }
                
                // Update button text with selected plan amount (Firebase-aware)
                const userCurrency = await getUserCurrency();
                let amount;
                
                if (userCurrency === 'CAD') {
                    if (planType === 'monthly') {
                        amount = '$13.47 CAD/month';
                    } else if (planType === 'quarterly') {
                        amount = '$36.44 CAD/3 months';
                    } else if (planType === 'yearly') {
                        amount = '$135 CAD/year';
                    }
                } else if (userCurrency === 'INR') {
                    if (planType === 'monthly') {
                        amount = '₹499 INR/month';
                    } else if (planType === 'quarterly') {
                        amount = '₹1,497 INR/3 months';
                    } else if (planType === 'yearly') {
                        amount = '₹5,988 INR/year';
                    }
                } else {
                    // Default USD pricing
                    if (planType === 'monthly') {
                        amount = '$9.99 USD/month';
                    } else if (planType === 'quarterly') {
                        amount = '$26.99 USD/3 months';
                    } else if (planType === 'yearly') {
                        amount = '$99.99 USD/year';
                    }
                }
                
                const btnText = document.getElementById('subscribeBtnText');
                if (btnText) {
                    btnText.textContent = `Complete Payment ${amount}`;
                    console.log('✅ Button text updated:', amount);
                } else {
                    console.error('❌ Could not find subscribe button text');
                }
                
                // Show success message for plan selection
                const planName = planType === 'monthly' ? 'Monthly' : planType === 'quarterly' ? 'Quarterly' : 'Yearly';
                showSuccess('subscriptionSuccess', `${planName} Premium plan selected! Please fill in your payment details below.`);
                
                console.log('🎉 Plan selection completed successfully');
                
            } catch (error) {
                console.error('❌ Error in selectPlan:', error);
                showError('subscriptionError', 'There was an error selecting your plan. Please try again.');
            }
        }

        // NOTE: Firebase Auth State Listener removed - using the main one above that matches index.html structure
        // NOTE: Duplicate getUserSubscriptionStatus function removed - using the main one above

        // Enable Firebase Authentication
        function enableFirebaseAuth() {
            // Make functions available globally
            window.handleFirebaseSignUp = handleFirebaseSignUp;
            window.handleFirebaseSignIn = handleFirebaseSignIn;
            window.handleFirebaseSignOut = handleFirebaseSignOut;
            window.getUserSubscriptionStatus = getUserSubscriptionStatus;
            window.signOut = handleFirebaseSignOut;
        }

        // Auto-enable Firebase auth when Firebase is loaded
        if (typeof firebase !== 'undefined') {
            enableFirebaseAuth();
        }

    </script>

    <!-- Sign Up Modal -->
    <div id="signUpModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('signUpModal')">&times;</span>
            <h2>Create Account</h2>
            <div id="signUpError" class="error-message"></div>
            <div id="signUpSuccess" class="success-message"></div>
            <form id="signUpForm" novalidate>
                <div class="form-group">
                    <label for="signUpEmail">Email Address</label>
                    <input type="email" id="signUpEmail" name="email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="signUpPassword">Password</label>
                    <input type="password" id="signUpPassword" name="password" required placeholder="Enter your password">
                </div>
                <div class="form-group">
                    <label for="signUpName">Full Name</label>
                    <input type="text" id="signUpName" name="name" required placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="signUpCountry">Country</label>
                    <select id="signUpCountry" name="country" required>
                        <option value="">Select your country</option>
                        <option value="Canada">🇨🇦 Canada</option>
                        <option value="India">🇮🇳 India</option>
                        <option value="United States">🇺🇸 United States</option>
                        <option value="United Kingdom">🇬🇧 United Kingdom</option>
                        <option value="Germany">🇩🇪 Germany</option>
                        <option value="France">🇫🇷 France</option>
                        <option value="Japan">🇯🇵 Japan</option>
                        <option value="Australia">🇦🇺 Australia</option>
                        <option value="Other">🌐 Other</option>
                    </select>
                </div>
                <button type="submit" class="auth-btn" id="signUpBtn">
                    <span id="signUpBtnText">Create Account</span>
                    <span id="signUpSpinner" class="spinner"></span>
                </button>
            </form>
            <div class="switch-auth">
                Already have an account? <a href="#" onclick="switchToSignIn()">Sign In</a>
            </div>
        </div>
    </div>

    <!-- Sign In Modal -->
    <div id="signInModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('signInModal')">&times;</span>
            <h2>Welcome Back</h2>
            <div id="signInError" class="error-message"></div>
            <div id="signInSuccess" class="success-message"></div>
                            <form id="signInForm" novalidate>
                <div class="form-group">
                    <label for="signInEmail">Email Address</label>
                    <input type="email" id="signInEmail" name="email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="signInPassword">Password</label>
                    <input type="password" id="signInPassword" name="password" required placeholder="Enter your password">
                </div>
                <button type="submit" class="auth-btn" id="signInBtn">
                    <span id="signInBtnText">Sign In</span>
                    <span id="signInSpinner" class="spinner"></span>
                </button>
            </form>
            <div class="switch-auth">
                Don't have an account? <a href="#" onclick="switchToSignUp()">Sign Up</a>
            </div>
        </div>
    </div>

    <!-- Subscription Modal -->
    <div id="subscriptionModal" class="modal">
        <div class="modal-content subscription-modal-content">
            <span class="close" onclick="closeModal('subscriptionModal')">&times;</span>
            <h2>🌟 Upgrade to Premium</h2>
            <div id="subscriptionError" class="error-message"></div>
            <div id="subscriptionSuccess" class="success-message"></div>
            
            <div class="subscription-plans">
                <div class="plan-card" onclick="selectPlan('monthly')" id="monthlyPlan">
                    <div class="plan-name">Monthly Premium</div>
                    <div class="plan-price">
                        <span class="currency">$</span>9.99<span class="period">/month</span>
                    </div>
                    <ul class="plan-features">
                        <li>Unlimited access to all modules</li>
                        <li>Advanced pronunciation guides</li>
                        <li>Interactive exercises</li>
                        <li>Progress tracking</li>
                        <li>Downloadable content</li>
                        <li>Priority support</li>
                    </ul>
                </div>
                
                <div class="plan-card popular" onclick="selectPlan('quarterly')" id="quarterlyPlan">
                    <div class="plan-name">Quarterly Premium</div>
                    <div class="plan-price">
                        <span class="currency">$</span>26.99<span class="period">/3 months</span>
                    </div>
                    <div style="background: #3498db; color: white; padding: 0.3rem; border-radius: 15px; margin: 0.5rem 0; font-weight: 600; font-size: 0.7rem;">
                        Save $3.98 (10% off)
                    </div>
                    <ul class="plan-features">
                        <li>Everything in Monthly Premium</li>
                        <li>10% discount vs monthly</li>
                        <li>Quarterly progress reports</li>
                        <li>Flexible learning schedule</li>
                        <li>Mid-term assessments</li>
                        <li>Enhanced support</li>
                    </ul>
                </div>
                
                <div class="plan-card premium" onclick="selectPlan('yearly')" id="yearlyPlan">
                    <div class="plan-name">Yearly Premium</div>
                    <div class="plan-price">
                        <span class="currency">$</span>99.99<span class="period">/year</span>
                    </div>
                    <div style="background: #ff8c00; color: white; padding: 0.5rem; border-radius: 20px; margin: 1rem 0; font-weight: 600;">
                        Save $19.89 (17% off)
                    </div>
                    <ul class="plan-features">
                        <li>Everything in Monthly Premium</li>
                        <li>2 months free (14 months total)</li>
                        <li>Advanced AI tutoring</li>
                        <li>Custom learning paths</li>
                        <li>Offline mode</li>
                        <li>Certificate of completion</li>
                    </ul>
                </div>
            </div>

            <div class="payment-section" id="paymentSection" style="display: none;">
                <h3>💳 Payment Information</h3>
                <div class="payment-form">
                    <div class="form-group">
                        <label for="cardholderName">Cardholder Name</label>
                        <input type="text" id="cardholderName" name="cardholderName" required placeholder="Enter cardholder name">
                    </div>
                    
                    <div class="form-group">
                        <label for="card-element">Credit or Debit Card</label>
                        <div id="card-element">
                            <!-- Stripe Elements will create form elements here -->
                        </div>
                        <div id="card-errors" role="alert" style="color: #721c24; margin-top: 0.5rem;"></div>
                    </div>

                    <button type="button" class="subscription-btn-modal" id="subscribeBtn" onclick="processPayment()">
                        <span id="subscribeBtnText">Complete Payment & Subscribe</span>
                        <span id="subscribeSpinner" class="spinner"></span>
                    </button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 1rem; color: #666; font-size: 0.85rem;">
                <p style="margin: 0.25rem 0;">🔒 Secure payment processing by Stripe</p>
                <p style="margin: 0.25rem 0;">Cancel anytime • 30-day money-back guarantee</p>
            </div>

        </div>
    </div>

    <!-- Donation Modal -->
    <div id="donationModal" class="modal">
        <div class="modal-content subscription-modal-content">
            <span class="close" onclick="closeModal('donationModal')">&times;</span>
            <h2>❤️ Support Global Education</h2>
            <p style="text-align: center; color: #666; margin-bottom: 2rem;">
                Help support the GK Foundation's mission to provide free education globally. Your donation directly funds the development of new educational content, maintains our learning platform, and expands access to quality education for students and professionals worldwide.
            </p>
            <div id="donationError" class="error-message"></div>
            <div id="donationSuccess" class="success-message"></div>
            
            <!-- Suggested Donation Amounts -->
            <div class="donation-amounts">
                <h3 style="text-align: center; margin-bottom: 1rem;">Choose an amount</h3>
                <div class="amount-buttons">
                    <button class="amount-btn" onclick="selectDonationAmount(5)">$5</button>
                    <button class="amount-btn" onclick="selectDonationAmount(10)">$10</button>
                    <button class="amount-btn" onclick="selectDonationAmount(25)">$25</button>
                    <button class="amount-btn" onclick="selectDonationAmount(50)">$50</button>
                </div>
                
                <!-- Custom Amount Input -->
                <div class="custom-amount">
                    <label for="customAmount">Or enter a custom amount:</label>
                    <div class="amount-input-container">
                        <span class="currency-symbol">$</span>
                        <input type="number" 
                               id="customAmount" 
                               placeholder="0.00" 
                               min="1" 
                               step="0.01"
                               onchange="selectCustomAmount(this.value)"
                               onfocus="clearAmountSelection()">
                    </div>
                </div>
            </div>

            <!-- Payment Section -->
            <div id="donationPaymentSection" class="payment-section" style="display: none; margin-top: 2rem;">
                <h3>Payment Details</h3>
                
                <div class="selected-amount-display">
                    <p>Donation Amount: <strong id="selectedDonationAmount">$0.00</strong></p>
                </div>

                <div class="form-group">
                    <label for="donationCardholderName">Cardholder Name</label>
                    <input type="text" id="donationCardholderName" placeholder="Your full name" required>
                </div>

                <div class="form-group">
                    <label for="donation-card-element">Credit or Debit Card</label>
                    <div id="donation-card-element">
                        <!-- Stripe Elements will create form elements here -->
                    </div>
                    <div id="donation-card-errors" role="alert" style="color: #721c24; margin-top: 0.5rem;"></div>
                </div>

                <button type="button" class="subscription-btn-modal" id="donateProcessBtn" onclick="processDonation()">
                    <span id="donateBtnText">Complete Donation</span>
                    <span id="donateSpinner" class="spinner"></span>
                </button>
            </div>

            <div style="text-align: center; margin-top: 1rem; color: #666; font-size: 0.85rem;">
                <p style="margin: 0.25rem 0;">🔒 Secure donation processing by Stripe</p>
                <p style="margin: 0.25rem 0;">💝 Every contribution supports the Foundation's educational mission</p>
            </div>
        </div>
    </div>

    <script>
        // Donation system variables
        let selectedDonationAmount = 0;
        let donationCardElement = null;

        // Function to update donation amounts based on user currency
        async function updateDonationAmounts() {
            try {
                const userCurrency = await getUserCurrency();
                const amountButtons = document.querySelectorAll('.amount-btn');
                const currencySymbol = document.querySelector('.currency-symbol');
                
                let amounts, symbol;
                
                if (userCurrency === 'INR') {
                    amounts = [10, 20, 30, 40]; // INR amounts (₹10 to ₹40)
                    symbol = '₹';
                } else if (userCurrency === 'CAD') {
                    amounts = [3, 4, 5, 6]; // CAD amounts ($3 to $6 CAD)
                    symbol = '$';
                } else {
                    amounts = [2, 3, 4, 5]; // USD amounts ($2 to $5 USD - default)
                    symbol = '$';
                }
                
                // Update amount buttons
                amountButtons.forEach((btn, index) => {
                    if (index < amounts.length) {
                        const amount = amounts[index];
                        btn.textContent = `${symbol}${amount}`;
                        btn.onclick = () => selectDonationAmount(amount);
                    }
                });
                
                // Update currency symbol in custom input
                if (currencySymbol) {
                    currencySymbol.textContent = symbol;
                }
                
                console.log('💰 Updated donation amounts for currency:', userCurrency, amounts);
            } catch (error) {
                console.error('❌ Error updating donation amounts:', error);
                // Fallback to USD
                const amountButtons = document.querySelectorAll('.amount-btn');
                amountButtons.forEach((btn, index) => {
                    const amounts = [2, 3, 4, 5]; // USD fallback amounts
                    if (index < amounts.length) {
                        btn.textContent = `$${amounts[index]}`;
                        btn.onclick = () => selectDonationAmount(amounts[index]);
                    }
                });
            }
        }

        // Open Donation Modal
        function openDonationModal() {
            console.log('🎁 Opening donation modal...');
            
            // Reset any previous selections
            selectedDonationAmount = 0;
            clearAmountSelection();
            document.getElementById('donationPaymentSection').style.display = 'none';
            document.getElementById('donationError').textContent = '';
            document.getElementById('donationSuccess').textContent = '';
            
            // Update donation amounts based on user currency
            updateDonationAmounts();
            
            // Initialize Stripe for donations if not already done
            if (!donationCardElement) {
                initializeDonationStripe();
            }
            
            document.getElementById('donationModal').style.display = 'block';
        }

        // Initialize Stripe Elements for Donation
        function initializeDonationStripe() {
            console.log('🔄 Initializing Stripe for donations...');
            
            if (typeof Stripe === 'undefined') {
                console.error('❌ Stripe.js not loaded');
                showError('donationError', 'Payment system not available. Please refresh the page.');
                return;
            }

            try {
                // Use existing stripe instance from Tech-Pay system
                if (!stripe) {
                    const publishableKey = getStripePublishableKey();
                    stripe = Stripe(publishableKey);
                    elements = stripe.elements();
                }
                
                // Create separate card element for donations
                donationCardElement = elements.create('card', {
                    style: {
                        base: {
                            fontSize: '16px',
                            color: '#424770',
                            '::placeholder': {
                                color: '#aab7c4',
                            },
                        },
                    },
                    hidePostalCode: true
                });
                
                donationCardElement.mount('#donation-card-element');
                
                // Handle real-time validation errors
                donationCardElement.on('change', ({error}) => {
                    const displayError = document.getElementById('donation-card-errors');
                    if (error) {
                        displayError.textContent = error.message;
                    } else {
                        displayError.textContent = '';
                    }
                });
                
                console.log('✅ Donation Stripe initialized successfully');
                
            } catch (error) {
                console.error('❌ Error initializing donation Stripe:', error);
                showError('donationError', 'Payment system initialization failed. Please refresh the page.');
            }
        }

        // Select Donation Amount (Preset)
        function selectDonationAmount(amount) {
            console.log('💝 Donation amount selected:', amount);
            
            selectedDonationAmount = amount;
            
            // Clear custom amount input
            document.getElementById('customAmount').value = '';
            
            // Update button states
            updateAmountButtons(amount);
            
            // Show payment section
            showDonationPaymentSection();
        }

        // Select Custom Donation Amount
        function selectCustomAmount(amount) {
            const numAmount = parseFloat(amount);
            if (numAmount && numAmount >= 1) {
                console.log('💝 Custom donation amount:', numAmount);
                selectedDonationAmount = numAmount;
                
                // Clear preset button selections
                clearAmountSelection();
                
                // Show payment section
                showDonationPaymentSection();
            } else {
                selectedDonationAmount = 0;
                document.getElementById('donationPaymentSection').style.display = 'none';
            }
        }

        // Clear Amount Selection
        function clearAmountSelection() {
            document.querySelectorAll('.amount-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        // Update Amount Button States
        function updateAmountButtons(selectedAmount) {
            document.querySelectorAll('.amount-btn').forEach(btn => {
                btn.classList.remove('selected');
                if (btn.textContent === `$${selectedAmount}`) {
                    btn.classList.add('selected');
                }
            });
        }

        // Show Donation Payment Section
        function showDonationPaymentSection() {
            document.getElementById('selectedDonationAmount').textContent = `$${selectedDonationAmount.toFixed(2)}`;
            document.getElementById('donationPaymentSection').style.display = 'block';
            
            // Scroll to payment section
            document.getElementById('donationPaymentSection').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'nearest' 
            });
        }

        // Process Donation (Tech-Pay Integration)
        async function processDonation() {
            if (!selectedDonationAmount || selectedDonationAmount < 1) {
                showError('donationError', 'Please select a donation amount of at least $1.');
                return;
            }
            
            const cardholderName = document.getElementById('donationCardholderName').value;
            if (!cardholderName.trim()) {
                showError('donationError', 'Please enter the cardholder name.');
                return;
            }
            
            // Show loading
            const donateBtn = document.getElementById('donateProcessBtn');
            const donateBtnText = document.getElementById('donateBtnText');
            const donateSpinner = document.getElementById('donateSpinner');
            
            donateBtnText.style.display = 'none';
            donateSpinner.style.display = 'inline';
            donateBtn.disabled = true;
            
            try {
                // Create payment method with Stripe
                const {error, paymentMethod} = await stripe.createPaymentMethod({
                    type: 'card',
                    card: donationCardElement,
                    billing_details: {
                        name: cardholderName,
                    },
                });
                
                if (error) {
                    throw new Error(error.message);
                }
                
                console.log('✅ Donation payment method created:', paymentMethod.id);
                
                // Get user currency (reuse existing function)
                const userCurrency = await getUserCurrency();
                // 💰 CLEAR PRICING: Customer pays exactly what's displayed
                let amountInCents = Math.round(selectedDonationAmount * 100);
                
                // Standard currency conversion (displayed prices already include fees)
                if (userCurrency === 'CAD') {
                    amountInCents = Math.round(selectedDonationAmount * 100); // CAD cents
                } else if (userCurrency === 'INR') {
                    amountInCents = Math.round(selectedDonationAmount * 100); // INR paisa (1 INR = 100 paisa)
                } else {
                    amountInCents = Math.round(selectedDonationAmount * 100); // USD cents
                }
                
                console.log('💳 Processing donation:', amountInCents, userCurrency);
                
                // LIVE ENVIRONMENT: Backend Donation Processing with Stripe Payment Intents
                if (STRIPE_CONFIG.environment === 'live') {
                    try {
                        console.log('💝 Creating donation payment intent with backend...');
                        
                        // Get current user for customer details
                        const currentUser = JSON.parse(localStorage.getItem('french_app_current_user') || '{}');
                        
                        // Create donation payment intent via backend
                        const response = await fetch('https://foundation-backend-chi.vercel.app/create-payment-intent', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                planType: 'donation',
                                currency: userCurrency,
                                amount: amountInCents,
                                customerEmail: currentUser.email || '',
                                customerName: currentUser.displayName || cardholderName
                            })
                        });
                        
                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(errorData.error || 'Donation setup failed');
                        }
                        
                        const { clientSecret, paymentIntentId } = await response.json();
                        console.log('✅ Donation payment intent created:', paymentIntentId);
                        
                        // Confirm donation payment with Stripe
                        const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
                            payment_method: paymentMethod.id
                        });
                        
                        if (confirmError) {
                            throw new Error(confirmError.message);
                        }
                        
                        if (paymentIntent.status !== 'succeeded') {
                            throw new Error('Donation was not completed successfully');
                        }
                        
                        console.log('✅ LIVE donation processed successfully!');
                        console.log('💰 Donation Details:', paymentIntent);
                        
                    } catch (donationError) {
                        console.error('❌ Live donation processing error:', donationError);
                        throw donationError;
                    }
                } else {
                    // Test environment processing
                    console.log('✅ Donation processed successfully with Stripe using test card');
                }
                
                // Log donation in Firebase (optional)
                await logDonation(selectedDonationAmount, userCurrency, paymentMethod.id, cardholderName);
                
                console.log('✅ Donation completed successfully');
                
                showSuccess('donationSuccess', `🎉 Thank you for your $${selectedDonationAmount.toFixed(2)} donation! Your support helps the GK Foundation expand free educational access globally.`);
                
                // Store amount before modal reset
                const finalDonationAmount = selectedDonationAmount;
                
                setTimeout(() => {
                    closeModal('donationModal');
                    
                    // Show appreciation message with preserved amount
                    alert(`💝 Thank you for supporting the GK Foundation! Your $${finalDonationAmount.toFixed(2)} donation helps us fulfill our mission of providing free, quality education to students and professionals worldwide.`);
                }, 2000);
                
            } catch (error) {
                console.error('❌ Donation processing error:', error);
                showError('donationError', error.message);
                
            } finally {
                // Reset button state
                donateBtnText.style.display = 'inline';
                donateSpinner.style.display = 'none';
                donateBtn.disabled = false;
            }
        }

        // Log Donation (Optional - for record keeping)
        async function logDonation(amount, currency, paymentMethodId, donorName) {
            try {
                const currentUser = JSON.parse(localStorage.getItem('french_app_current_user'));
                const firebaseUser = firebase.auth().currentUser;
                
                const donationData = {
                    amount: amount,
                    currency: currency,
                    donorName: donorName,
                    paymentMethodId: paymentMethodId,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    userId: firebaseUser ? firebaseUser.uid : null,
                    userEmail: firebaseUser ? firebaseUser.email : 'anonymous',
                    environment: STRIPE_CONFIG.environment
                };
                
                // Log to Firebase (if available)
                if (typeof firebase !== 'undefined' && firebase.firestore) {
                    await firebase.firestore().collection('donations').add(donationData);
                    console.log('📝 Donation logged to Firebase');
                }
                
            } catch (error) {
                console.warn('⚠️ Could not log donation:', error);
                // Don't throw error - donation was successful even if logging failed
            }
        }
    </script>

</body>
</html>